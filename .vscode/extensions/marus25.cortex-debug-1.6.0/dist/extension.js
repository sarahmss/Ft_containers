/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={4651:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSession=t.ErrorDestination=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.ContinuedEvent=t.StoppedEvent=t.CompletionItem=t.Module=t.Breakpoint=t.Variable=t.Thread=t.StackFrame=t.Scope=t.Source=void 0;const r=s(1839),n=s(601),i=s(8153),o=s(7310);t.Source=class{constructor(e,t,s=0,r,n){this.name=e,this.path=t,this.sourceReference=s,r&&(this.origin=r),n&&(this.adapterData=n)}},t.Scope=class{constructor(e,t,s=!1){this.name=e,this.variablesReference=t,this.expensive=s}},t.StackFrame=class{constructor(e,t,s,r=0,n=0){this.id=e,this.source=s,this.line=r,this.column=n,this.name=t}},t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}},t.Variable=class{constructor(e,t,s=0,r,n){this.name=e,this.value=t,this.variablesReference=s,"number"==typeof n&&(this.namedVariables=n),"number"==typeof r&&(this.indexedVariables=r)}},t.Breakpoint=class{constructor(e,t,s,r){this.verified=e;const n=this;"number"==typeof t&&(n.line=t),"number"==typeof s&&(n.column=s),r&&(n.source=r)}setId(e){this.id=e}},t.Module=class{constructor(e,t){this.id=e,this.name=t}},t.CompletionItem=class{constructor(e,t,s=0){this.label=e,this.start=t,this.length=s}};class a extends n.Event{constructor(e,t,s){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof s&&(this.body.text=s)}}t.StoppedEvent=a;class c extends n.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class h extends n.Event{constructor(){super("initialized")}}t.InitializedEvent=h;class l extends n.Event{constructor(e){super("terminated"),("boolean"==typeof e||e)&&(this.body={restart:e})}}t.TerminatedEvent=l;class u extends n.Event{constructor(e){super("exited"),this.body={exitCode:e}}}t.ExitedEvent=u;class d extends n.Event{constructor(e,t="console",s){super("output"),this.body={category:t,output:e},void 0!==s&&(this.body.data=s)}}t.OutputEvent=d;class p extends n.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=p;class f extends n.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=f;class m extends n.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=m;class g extends n.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=g;class y extends n.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=y;class b extends n.Event{constructor(e,t,s){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof s&&(this.body.message=s)}}t.ProgressStartEvent=b;class v extends n.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=v;class w extends n.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressEndEvent=w;class T extends n.Event{constructor(e,t,s){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),s&&(this.body.stackFrameId=s)}}t.InvalidatedEvent=T;class S extends n.Event{constructor(e,t,s){super("memory"),this.body={memoryReference:e,offset:t,count:s}}}var C;t.MemoryEvent=S,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(C=t.ErrorDestination||(t.ErrorDestination={}));class E extends r.ProtocolServer{constructor(e,t){super();const s="boolean"==typeof e&&e;this._debuggerLinesStartAt1=s,this._debuggerColumnsStartAt1=s,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,i.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,s,r,n=C.User){let i;"number"==typeof t?(i={id:t,format:s},r&&(i.variables=r),n&C.User&&(i.showUser=!0),n&C.Telemetry&&(i.sendTelemetry=!0)):i=t,e.success=!1,e.message=E.formatPII(i.format,!0,i.variables),e.body||(e.body={}),e.body.error=i,this.sendResponse(e)}runInTerminalRequest(e,t,s){this.sendRequest("runInTerminal",e,t,s)}dispatchRequest(e){const t=new n.Response(e);try{if("initialize"===e.command){var s=e.arguments;if("boolean"==typeof s.linesStartAt1&&(this._clientLinesStartAt1=s.linesStartAt1),"boolean"==typeof s.columnsStartAt1&&(this._clientColumnsStartAt1=s.columnsStartAt1),"path"!==s.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,C.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,s)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"writeMemory"===e.command?this.writeMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},C.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,s){this.sendResponse(e),this.shutdown()}launchRequest(e,t,s){this.sendResponse(e)}attachRequest(e,t,s){this.sendResponse(e)}terminateRequest(e,t,s){this.sendResponse(e)}restartRequest(e,t,s){this.sendResponse(e)}setBreakPointsRequest(e,t,s){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,s){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,s){this.sendResponse(e)}configurationDoneRequest(e,t,s){this.sendResponse(e)}continueRequest(e,t,s){this.sendResponse(e)}nextRequest(e,t,s){this.sendResponse(e)}stepInRequest(e,t,s){this.sendResponse(e)}stepOutRequest(e,t,s){this.sendResponse(e)}stepBackRequest(e,t,s){this.sendResponse(e)}reverseContinueRequest(e,t,s){this.sendResponse(e)}restartFrameRequest(e,t,s){this.sendResponse(e)}gotoRequest(e,t,s){this.sendResponse(e)}pauseRequest(e,t,s){this.sendResponse(e)}sourceRequest(e,t,s){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,s){this.sendResponse(e)}stackTraceRequest(e,t,s){this.sendResponse(e)}scopesRequest(e,t,s){this.sendResponse(e)}variablesRequest(e,t,s){this.sendResponse(e)}setVariableRequest(e,t,s){this.sendResponse(e)}setExpressionRequest(e,t,s){this.sendResponse(e)}evaluateRequest(e,t,s){this.sendResponse(e)}stepInTargetsRequest(e,t,s){this.sendResponse(e)}gotoTargetsRequest(e,t,s){this.sendResponse(e)}completionsRequest(e,t,s){this.sendResponse(e)}exceptionInfoRequest(e,t,s){this.sendResponse(e)}loadedSourcesRequest(e,t,s){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,s){this.sendResponse(e)}setDataBreakpointsRequest(e,t,s){this.sendResponse(e)}readMemoryRequest(e,t,s){this.sendResponse(e)}writeMemoryRequest(e,t,s){this.sendResponse(e)}disassembleRequest(e,t,s){this.sendResponse(e)}cancelRequest(e,t,s){this.sendResponse(e)}breakpointLocationsRequest(e,t,s){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,s){this.sendResponse(e)}customRequest(e,t,s,r){this.sendErrorResponse(t,1014,"unrecognized request",null,C.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?E.uri2path(e):E.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?E.uri2path(e):E.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new o.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new o.URL(e),s=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(s)&&(s=s[1].toLowerCase()+s.substr(2)),s=s.replace(/\//g,"\\")),s}static formatPII(e,t,s){return e.replace(E._formatPIIRegexp,(function(e,r){return t&&r.length>0&&"_"!==r[0]?e:s[r]&&s.hasOwnProperty(r)?s[r]:e}))}}t.DebugSession=E,E._formatPIIRegexp=/{([^}]+)}/g},527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=void 0,t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},7309:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLogger=void 0;const n=s(7147),i=s(1017),o=s(1890),a=s(4100);function c(){let e=new Date;return h(2,String(e.getUTCHours()))+":"+h(2,String(e.getUTCMinutes()))+":"+h(2,String(e.getUTCSeconds()))+"."+h(3,String(e.getUTCMilliseconds()))+" UTC"}function h(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.InternalLogger=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=a.LogLevel.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return r(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(i.isAbsolute(e.logFilePath)){const t=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,a.LogLevel.Error);try{yield o(i.dirname(e.logFilePath)),this.log("Verbose logs are written to:\n",a.LogLevel.Warn),this.log(e.logFilePath+"\n",a.LogLevel.Warn),this._logFileStream=n.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{t(e)}))}catch(e){t(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,a.LogLevel.Error)}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+c();this.log(t+"\n",a.LogLevel.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,s=!0){if(this._minLogLevel!==a.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const s=t===a.LogLevel.Error?console.error:t===a.LogLevel.Warn?console.warn:null;s&&s((0,a.trimLastNewline)(e))}t===a.LogLevel.Error&&(e=`[${a.LogLevel[t]}] ${e}`),this._prependTimestamp&&s&&(e="["+c()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const s=new a.LogOutputEvent(e,t);this._logCallback(s)}}}},4100:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimLastNewline=t.LogOutputEvent=t.logger=t.Logger=t.LogLevel=void 0;const r=s(7309),n=s(4651);var i;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(i=t.LogLevel||(t.LogLevel={}));class o{constructor(){this._pendingLogQ=[]}log(e,t=i.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,i.Verbose)}warn(e){this.log(e,i.Warn)}error(e){this.log(e,i.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=i.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,s=!0){const r="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:r,prependTimestamp:s};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,s){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new r.InternalLogger(e,s),this._logFilePathFromInit=t}}t.Logger=o,t.logger=new o;class a extends n.OutputEvent{constructor(e,t){super(e,t===i.Error?"stderr":t===i.Warn?"console":"stdout")}}t.LogOutputEvent=a,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")}},1212:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDebugSession=void 0;const r=s(4100),n=r.logger,i=s(4651);class o extends i.DebugSession{constructor(e,t,s){super(t,s),this.obsolete_logFilePath=e,this.on("error",(e=>{n.error(e.body)}))}start(e,t){super.start(e,t),n.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof r.LogOutputEvent)){let t=e;e instanceof i.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign(Object.assign({},e.body),{output:"<output not logged>"})),n.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,s,r){n.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${s}`),super.sendRequest(e,t,s,r)}sendResponse(e){n.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){n.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=o},9955:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=t.Response=t.Event=t.ErrorDestination=t.CompletionItem=t.Module=t.Source=t.Breakpoint=t.Variable=t.Scope=t.StackFrame=t.Thread=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ContinuedEvent=t.StoppedEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.logger=t.Logger=t.LoggingDebugSession=t.DebugSession=void 0;const r=s(4651);Object.defineProperty(t,"DebugSession",{enumerable:!0,get:function(){return r.DebugSession}}),Object.defineProperty(t,"InitializedEvent",{enumerable:!0,get:function(){return r.InitializedEvent}}),Object.defineProperty(t,"TerminatedEvent",{enumerable:!0,get:function(){return r.TerminatedEvent}}),Object.defineProperty(t,"ExitedEvent",{enumerable:!0,get:function(){return r.ExitedEvent}}),Object.defineProperty(t,"StoppedEvent",{enumerable:!0,get:function(){return r.StoppedEvent}}),Object.defineProperty(t,"ContinuedEvent",{enumerable:!0,get:function(){return r.ContinuedEvent}}),Object.defineProperty(t,"OutputEvent",{enumerable:!0,get:function(){return r.OutputEvent}}),Object.defineProperty(t,"ThreadEvent",{enumerable:!0,get:function(){return r.ThreadEvent}}),Object.defineProperty(t,"BreakpointEvent",{enumerable:!0,get:function(){return r.BreakpointEvent}}),Object.defineProperty(t,"ModuleEvent",{enumerable:!0,get:function(){return r.ModuleEvent}}),Object.defineProperty(t,"LoadedSourceEvent",{enumerable:!0,get:function(){return r.LoadedSourceEvent}}),Object.defineProperty(t,"CapabilitiesEvent",{enumerable:!0,get:function(){return r.CapabilitiesEvent}}),Object.defineProperty(t,"ProgressStartEvent",{enumerable:!0,get:function(){return r.ProgressStartEvent}}),Object.defineProperty(t,"ProgressUpdateEvent",{enumerable:!0,get:function(){return r.ProgressUpdateEvent}}),Object.defineProperty(t,"ProgressEndEvent",{enumerable:!0,get:function(){return r.ProgressEndEvent}}),Object.defineProperty(t,"InvalidatedEvent",{enumerable:!0,get:function(){return r.InvalidatedEvent}}),Object.defineProperty(t,"MemoryEvent",{enumerable:!0,get:function(){return r.MemoryEvent}}),Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return r.Thread}}),Object.defineProperty(t,"StackFrame",{enumerable:!0,get:function(){return r.StackFrame}}),Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return r.Variable}}),Object.defineProperty(t,"Breakpoint",{enumerable:!0,get:function(){return r.Breakpoint}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return r.Source}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return r.Module}}),Object.defineProperty(t,"CompletionItem",{enumerable:!0,get:function(){return r.CompletionItem}}),Object.defineProperty(t,"ErrorDestination",{enumerable:!0,get:function(){return r.ErrorDestination}});const n=s(1212);Object.defineProperty(t,"LoggingDebugSession",{enumerable:!0,get:function(){return n.LoggingDebugSession}});const i=s(4100);t.Logger=i;const o=s(601);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return o.Response}});const a=s(527);Object.defineProperty(t,"Handles",{enumerable:!0,get:function(){return a.Handles}});const c=i.logger;t.logger=c},601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Response=t.Message=void 0;class s{constructor(e){this.seq=0,this.type=e}}t.Message=s,t.Response=class extends s{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}},t.Event=class extends s{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},1839:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolServer=void 0;const r=s(2361),n=s(601);class i{get event(){return this._event||(this._event=(e,t)=>{let s;return this._listener=e,this._this=t,s={dispose:()=>{this._listener=void 0,this._this=void 0}},s}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class o extends r.EventEmitter{constructor(){super(),this._sendMessage=new i,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,s=this._pendingRequests.get(t.request_seq);s&&(this._pendingRequests.delete(t.request_seq),s(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new n.Event("close"))})),e.on("error",(e=>{this._emitEvent(new n.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new n.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,s,r){const i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),r){this._pendingRequests.set(i.seq,r);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(i.seq);t&&(this._pendingRequests.delete(i.seq),t(new n.Response(i,"timeout")))}),s)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new n.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(o.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const s=t[e].split(/: +/);"Content-Length"==s[0]&&(this._contentLength=+s[1])}this._rawData=this._rawData.slice(e+o.TWO_CRLF.length);continue}}break}}}t.ProtocolServer=o,o.TWO_CRLF="\r\n\r\n"},8153:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugAdapter=void 0;const r=s(1808);t.runDebugAdapter=function(e){let t=0;if(process.argv.slice(2).forEach((function(e,s,r){const n=/^--server=(\d{4,5})$/.exec(e);n&&(t=parseInt(n[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),r.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const s=new e(!1,!0);s.setRunAsServer(!0),s.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}},291:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0,s(8806);var r=s(5943),n={},i="___parser_",o={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},a={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},c={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},h=function(){function e(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="be",this.constructorFn=null,this.alias=null}return e.start=function(){return new e},e.prototype.primitiveGenerateN=function(e,t){var s=a[e],r=c[e];t.pushCode(t.generateVariable(this.varName)+" = dataView.get"+s+"(offset, "+r+");"),t.pushCode("offset += "+o[e]+";")},e.prototype.primitiveN=function(e,t,s){return this.setNextParser(e,t,s)},e.prototype.useThisEndian=function(e){return e+this.endian.toLowerCase()},e.prototype.uint8=function(e,t){return this.primitiveN("uint8",e,t)},e.prototype.uint16=function(e,t){return this.primitiveN(this.useThisEndian("uint16"),e,t)},e.prototype.uint16le=function(e,t){return this.primitiveN("uint16le",e,t)},e.prototype.uint16be=function(e,t){return this.primitiveN("uint16be",e,t)},e.prototype.uint32=function(e,t){return this.primitiveN(this.useThisEndian("uint32"),e,t)},e.prototype.uint32le=function(e,t){return this.primitiveN("uint32le",e,t)},e.prototype.uint32be=function(e,t){return this.primitiveN("uint32be",e,t)},e.prototype.int8=function(e,t){return this.primitiveN("int8",e,t)},e.prototype.int16=function(e,t){return this.primitiveN(this.useThisEndian("int16"),e,t)},e.prototype.int16le=function(e,t){return this.primitiveN("int16le",e,t)},e.prototype.int16be=function(e,t){return this.primitiveN("int16be",e,t)},e.prototype.int32=function(e,t){return this.primitiveN(this.useThisEndian("int32"),e,t)},e.prototype.int32le=function(e,t){return this.primitiveN("int32le",e,t)},e.prototype.int32be=function(e,t){return this.primitiveN("int32be",e,t)},e.prototype.bigIntVersionCheck=function(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported in this runtime")},e.prototype.int64=function(e,t){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)},e.prototype.int64be=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)},e.prototype.int64le=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)},e.prototype.uint64=function(e,t){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)},e.prototype.uint64be=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)},e.prototype.uint64le=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)},e.prototype.floatle=function(e,t){return this.primitiveN("floatle",e,t)},e.prototype.floatbe=function(e,t){return this.primitiveN("floatbe",e,t)},e.prototype.doublele=function(e,t){return this.primitiveN("doublele",e,t)},e.prototype.doublebe=function(e,t){return this.primitiveN("doublebe",e,t)},e.prototype.bitN=function(e,t,s){return s||(s={}),s.length=e,this.setNextParser("bit",t,s)},e.prototype.bit1=function(e,t){return this.bitN(1,e,t)},e.prototype.bit2=function(e,t){return this.bitN(2,e,t)},e.prototype.bit3=function(e,t){return this.bitN(3,e,t)},e.prototype.bit4=function(e,t){return this.bitN(4,e,t)},e.prototype.bit5=function(e,t){return this.bitN(5,e,t)},e.prototype.bit6=function(e,t){return this.bitN(6,e,t)},e.prototype.bit7=function(e,t){return this.bitN(7,e,t)},e.prototype.bit8=function(e,t){return this.bitN(8,e,t)},e.prototype.bit9=function(e,t){return this.bitN(9,e,t)},e.prototype.bit10=function(e,t){return this.bitN(10,e,t)},e.prototype.bit11=function(e,t){return this.bitN(11,e,t)},e.prototype.bit12=function(e,t){return this.bitN(12,e,t)},e.prototype.bit13=function(e,t){return this.bitN(13,e,t)},e.prototype.bit14=function(e,t){return this.bitN(14,e,t)},e.prototype.bit15=function(e,t){return this.bitN(15,e,t)},e.prototype.bit16=function(e,t){return this.bitN(16,e,t)},e.prototype.bit17=function(e,t){return this.bitN(17,e,t)},e.prototype.bit18=function(e,t){return this.bitN(18,e,t)},e.prototype.bit19=function(e,t){return this.bitN(19,e,t)},e.prototype.bit20=function(e,t){return this.bitN(20,e,t)},e.prototype.bit21=function(e,t){return this.bitN(21,e,t)},e.prototype.bit22=function(e,t){return this.bitN(22,e,t)},e.prototype.bit23=function(e,t){return this.bitN(23,e,t)},e.prototype.bit24=function(e,t){return this.bitN(24,e,t)},e.prototype.bit25=function(e,t){return this.bitN(25,e,t)},e.prototype.bit26=function(e,t){return this.bitN(26,e,t)},e.prototype.bit27=function(e,t){return this.bitN(27,e,t)},e.prototype.bit28=function(e,t){return this.bitN(28,e,t)},e.prototype.bit29=function(e,t){return this.bitN(29,e,t)},e.prototype.bit30=function(e,t){return this.bitN(30,e,t)},e.prototype.bit31=function(e,t){return this.bitN(31,e,t)},e.prototype.bit32=function(e,t){return this.bitN(32,e,t)},e.prototype.namely=function(e){return n[e]=this,this.alias=e,this},e.prototype.skip=function(e,t){return this.seek(e,t)},e.prototype.seek=function(e,t){if(t&&t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})},e.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},e.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},e.prototype.wrapped=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");if(!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined in wrapper parser");return this.setNextParser("wrapper",e,t)},e.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!n[t.type]&&Object.keys(o).indexOf(t.type)<0)throw new Error('Specified primitive type "'+t.type+'" is not supported.');return this.setNextParser("array",e,t)},e.prototype.choice=function(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(s){var r=parseInt(s,10),i=t.choices[r];if(isNaN(r))throw new Error("Key of choices must be a number.");if(!i)throw new Error("Choice Case "+s+" of "+e+" is not valid.");if("string"==typeof i&&!n[i]&&Object.keys(o).indexOf(i)<0)throw new Error('Specified primitive type "'+i+'" is not supported.')})),this.setNextParser("choice",e,t)},e.prototype.nest=function(t,s){if("object"!=typeof s&&"object"==typeof t&&(s=t,t=null),!s.type)throw new Error("Type option of nest is not defined.");if(!(s.type instanceof e||n[s.type]))throw new Error("Type option of nest must be a Parser object.");if(!(s.type instanceof e||t))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",t,s)},e.prototype.pointer=function(t,s){if(!s.offset)throw new Error("Offset option of pointer is not defined.");if(!s.type)throw new Error("Type option of pointer is not defined.");if("string"==typeof s.type){if(Object.keys(o).indexOf(s.type)<0&&!n[s.type])throw new Error('Specified type "'+s.type+'" is not supported.')}else if(!(s.type instanceof e))throw new Error("Type option of pointer must be a string or a Parser object.");return this.setNextParser("pointer",t,s)},e.prototype.saveOffset=function(e,t){return this.setNextParser("saveOffset",e,t)},e.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+e)}return this},e.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},e.prototype.getContext=function(e){var t=new r.Context(e);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode("return "+(i+this.alias)+"(0).result;")):this.addRawCode(t),t},e.prototype.getCode=function(){return this.getContext().code},e.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),e.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")},e.prototype.addAliasedCode=function(e){return e.pushCode("function "+(i+this.alias)+"(offset, context) {"),e.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},e.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){n[t].addAliasedCode(e)}))},e.prototype.compile=function(){var e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder","return function (buffer, constructorFn) { "+t.code+" };")(t.imports,TextDecoder)},e.prototype.sizeOf=function(){var t=NaN;if(Object.keys(o).indexOf(this.type)>=0)t=o[this.type];else if("string"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){var s=NaN;"string"==typeof this.options.type?s=o[this.options.type]:this.options.type instanceof e&&(s=this.options.type.sizeOf()),t=this.options.length*s}else"seek"===this.type?t=this.options.length:"nest"===this.type?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t},e.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)},e.prototype.setNextParser=function(t,s,r){var n=new e;return n.type=t,n.varName=s,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},e.prototype.generate=function(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}this.generateAssert(e)}var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},e.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":var s=e.addImport(this.options.assert);e.pushCode("if (!"+s+".call(vars, "+t+")) {");break;case"number":e.pushCode("if ("+this.options.assert+" !== "+t+") {");break;case"string":e.pushCode('if ("'+this.options.assert+'" !== '+t+") {");break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: '+t+' is " + '+this.options.assert),e.pushCode("}")}},e.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},e.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){var s=0;e.bitFields.forEach((function(e){return s+=e.options.length}));var r=e.generateTmpVariable();if(s<=8)e.pushCode("var "+r+" = dataView.getUint8(offset);"),s=8;else if(s<=16)e.pushCode("var "+r+" = dataView.getUint16(offset);"),s=16;else if(s<=24){var n=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode("var "+n+" = dataView.getUint16(offset);"),e.pushCode("var "+i+" = dataView.getUint8(offset + 2);"),e.pushCode("var "+r+" = ("+n+" << 8) | "+i+";"),s=24}else{if(!(s<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var "+r+" = dataView.getUint32(offset);"),s=32}e.pushCode("offset += "+s/8+";");var o=0,a="be"===this.endian;e.bitFields.forEach((function(t){var n=t.options.length,i=a?s-o-n:o,c=(1<<n)-1;e.pushCode(t.varName+" = "+r+" >> "+i+" & "+c+";"),o+=n})),e.bitFields=[]}},e.prototype.generateSeek=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += "+t+";")},e.prototype.generateString=function(e){var t=e.generateVariable(this.varName),s=e.generateTmpVariable(),r=this.options.encoding,n="hex"===r.toLowerCase(),i='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){var o=this.options.length;e.pushCode("var "+s+" = offset;"),e.pushCode("while(dataView.getUint8(offset++) !== 0 && offset - "+s+" < "+o+");");var a="offset - "+s+" < "+o+" ? offset - 1 : offset";e.pushCode(n?t+" = Array.from(buffer.subarray("+s+", "+a+"), "+i+").join('');":t+" = new TextDecoder('"+r+"').decode(buffer.subarray("+s+", "+a+"));")}else this.options.length?(o=e.generateOption(this.options.length),e.pushCode(n?t+" = Array.from(buffer.subarray(offset, offset + "+o+"), "+i+").join('');":t+" = new TextDecoder('"+r+"').decode(buffer.subarray(offset, offset + "+o+"));"),e.pushCode("offset += "+o+";")):this.options.zeroTerminated?(e.pushCode("var "+s+" = offset;"),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(n?t+" = Array.from(buffer.subarray("+s+", offset - 1), "+i+").join('');":t+" = new TextDecoder('"+r+"').decode(buffer.subarray("+s+", offset - 1));")):this.options.greedy&&(e.pushCode("var "+s+" = offset;"),e.pushCode("while(buffer.length > offset++);"),e.pushCode(n?t+" = Array.from(buffer.subarray("+s+", offset), "+i+").join('');":t+" = new TextDecoder('"+r+"').decode(buffer.subarray("+s+", offset));"));this.options.stripNull&&e.pushCode(t+" = "+t+".replace(/\\x00+$/g, '')")},e.prototype.generateBuffer=function(e){var t=e.generateVariable(this.varName);if("function"==typeof this.options.readUntil){var s=this.options.readUntil,r=e.generateTmpVariable(),n=e.generateTmpVariable();e.pushCode("var "+r+" = offset;"),e.pushCode("var "+n+" = 0;"),e.pushCode("while (offset < buffer.length) {"),e.pushCode(n+" = dataView.getUint8(offset);");var i=e.addImport(s);e.pushCode("if ("+i+".call("+e.generateVariable()+", "+n+", buffer.subarray(offset))) break;"),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(t+" = buffer.subarray("+r+", offset);")}else if("eof"===this.options.readUntil)e.pushCode(t+" = buffer.subarray(offset);");else{var o=e.generateOption(this.options.length);e.pushCode(t+" = buffer.subarray(offset, offset + "+o+");"),e.pushCode("offset += "+o+";")}this.options.clone&&e.pushCode(t+" = buffer.constructor.from("+t+");")},e.prototype.generateArray=function(t){var s=t.generateOption(this.options.length),r=t.generateOption(this.options.lengthInBytes),h=this.options.type,l=t.generateTmpVariable(),u=t.generateVariable(this.varName),d=t.generateTmpVariable(),p=this.options.key,f="string"==typeof p;if(f?t.pushCode(u+" = {};"):t.pushCode(u+" = [];"),"function"==typeof this.options.readUntil?t.pushCode("do {"):"eof"===this.options.readUntil?t.pushCode("for (var "+l+" = 0; offset < buffer.length; "+l+"++) {"):void 0!==r?t.pushCode("for (var "+l+" = offset + "+r+"; offset < "+l+"; ) {"):t.pushCode("for (var "+l+" = "+s+"; "+l+" > 0; "+l+"--) {"),"string"==typeof h)if(n[h]){var m=t.generateVariable(),g=t.generateTmpVariable();t.pushCode("var "+g+" = "+(i+h)+"(offset, {"),t.pushCode("$parent: "+m+","),t.pushCode("$root: "+m+".$root,"),this.options.readUntil||void 0!==r||t.pushCode("$index: "+s+" - "+l+","),t.pushCode("});"),t.pushCode("var "+d+" = "+g+".result; offset = "+g+".offset;"),h!==this.alias&&t.addReference(h)}else{var y=a[h],b=c[h];t.pushCode("var "+d+" = dataView.get"+y+"(offset, "+b+");"),t.pushCode("offset += "+o[h]+";")}else h instanceof e&&(m=t.generateVariable(),t.pushCode("var "+d+" = {};"),t.pushScope(d),t.pushCode(d+".$parent = "+m+";"),t.pushCode(d+".$root = "+m+".$root;"),this.options.readUntil||void 0!==r||t.pushCode(d+".$index = "+s+" - "+l+";"),h.generate(t),t.pushCode("delete "+d+".$parent;"),t.pushCode("delete "+d+".$root;"),t.pushCode("delete "+d+".$index;"),t.popScope());if(f?t.pushCode(u+"["+d+"."+p+"] = "+d+";"):t.pushCode(u+".push("+d+");"),t.pushCode("}"),"function"==typeof this.options.readUntil){var v=this.options.readUntil,w=t.addImport(v);t.pushCode("while (!"+w+".call("+t.generateVariable()+", "+d+", buffer.subarray(offset)));")}},e.prototype.generateChoiceCase=function(t,s,r){if("string"==typeof r){var h=t.generateVariable(this.varName);if(n[r]){var l=t.generateTmpVariable();t.pushCode("var "+l+" = "+(i+r)+"(offset, {"),t.pushCode("$parent: "+h+".$parent,"),t.pushCode("$root: "+h+".$root,"),t.pushCode("});"),t.pushCode(h+" = "+l+".result; offset = "+l+".offset;"),r!==this.alias&&t.addReference(r)}else{var u=a[r],d=c[r];t.pushCode(h+" = dataView.get"+u+"(offset, "+d+");"),t.pushCode("offset += "+o[r])}}else r instanceof e&&(t.pushPath(s),r.generate(t),t.popPath(s))},e.prototype.generateChoice=function(e){var t=this,s=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName){e.pushCode(r+" = {};");var n=e.generateVariable();e.pushCode(r+".$parent = "+n+";"),e.pushCode(r+".$root = "+n+".$root;")}e.pushCode("switch("+s+") {"),Object.keys(this.options.choices).forEach((function(s){var r=t.options.choices[parseInt(s,10)];e.pushCode("case "+s+":"),t.generateChoiceCase(e,t.varName,r),e.pushCode("break;")})),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + '+s+' + " at choice"'),e.pushCode("}"),this.varName&&(e.pushCode("delete "+r+".$parent;"),e.pushCode("delete "+r+".$root;"))},e.prototype.generateNest=function(t){var s=t.generateVariable(this.varName);if(this.options.type instanceof e){if(this.varName){var r=t.generateVariable();t.pushCode(s+" = {};"),t.pushCode(s+".$parent = "+r+";"),t.pushCode(s+".$root = "+r+".$root;")}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&(t.pushCode("delete "+s+".$parent;"),t.pushCode("delete "+s+".$root;"))}else if(n[this.options.type]){r=t.generateVariable();var o=t.generateTmpVariable();t.pushCode("var "+o+" = "+(i+this.options.type)+"(offset, {"),t.pushCode("$parent: "+r+","),t.pushCode("$root: "+r+".$root,"),t.pushCode("});"),t.pushCode(s+" = "+o+".result; offset = "+o+".offset;"),this.options.type!==this.alias&&t.addReference(this.options.type)}},e.prototype.generateWrapper=function(t){var s=t.generateVariable(this.varName),r=t.generateTmpVariable();if("function"==typeof this.options.readUntil){var o=this.options.readUntil,a=t.generateTmpVariable(),c=t.generateTmpVariable();t.pushCode("var "+a+" = offset;"),t.pushCode("var "+c+" = 0;"),t.pushCode("while (offset < buffer.length) {"),t.pushCode(c+" = dataView.getUint8(offset);");var h=t.addImport(o);t.pushCode("if ("+h+".call("+t.generateVariable()+", "+c+", buffer.subarray(offset))) break;"),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(r+" = buffer.subarray("+a+", offset);")}else if("eof"===this.options.readUntil)t.pushCode(r+" = buffer.subarray(offset);");else{var l=t.generateOption(this.options.length);t.pushCode(r+" = buffer.subarray(offset, offset + "+l+");"),t.pushCode("offset += "+l+";")}this.options.clone&&t.pushCode(r+" = buffer.constructor.from("+r+");");var u=t.generateTmpVariable(),d=t.generateTmpVariable(),p=t.generateTmpVariable(),f=t.addImport(this.options.wrapper);if(t.pushCode(r+" = "+f+".call(this, "+r+").subarray(0);"),t.pushCode("var "+u+" = buffer;"),t.pushCode("var "+d+" = offset;"),t.pushCode("var "+p+" = dataView;"),t.pushCode("buffer = "+r+";"),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof e)this.varName&&t.pushCode(s+" = {};"),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(n[this.options.type]){var m=t.generateTmpVariable();t.pushCode("var "+m+" = "+(i+this.options.type)+"(0);"),t.pushCode(s+" = "+m+".result;"),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode("buffer = "+u+";"),t.pushCode("dataView = "+p+";"),t.pushCode("offset = "+d+";")},e.prototype.generateFormatter=function(e,t,s){if("function"==typeof s){var r=e.addImport(s);e.pushCode(t+" = "+r+".call("+e.generateVariable()+", "+t+");")}},e.prototype.generatePointer=function(t){var s=this.options.type,r=t.generateOption(this.options.offset),h=t.generateTmpVariable(),l=t.generateVariable(this.varName);if(t.pushCode("var "+h+" = offset;"),t.pushCode("offset = "+r+";"),this.options.type instanceof e){var u=t.generateVariable();t.pushCode(l+" = {};"),t.pushCode(l+".$parent = "+u+";"),t.pushCode(l+".$root = "+u+".$root;"),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.pushCode("delete "+l+".$parent;"),t.pushCode("delete "+l+".$root;")}else if(n[this.options.type]){u=t.generateVariable();var d=t.generateTmpVariable();t.pushCode("var "+d+" = "+(i+this.options.type)+"(offset, {"),t.pushCode("$parent: "+u+","),t.pushCode("$root: "+u+".$root,"),t.pushCode("});"),t.pushCode(l+" = "+d+".result; offset = "+d+".offset;"),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(o).indexOf(this.options.type)>=0){var p=a[s],f=c[s];t.pushCode(l+" = dataView.get"+p+"(offset, "+f+");"),t.pushCode("offset += "+o[s]+";")}t.pushCode("offset = "+h+";")},e.prototype.generateSaveOffset=function(e){var t=e.generateVariable(this.varName);e.pushCode(t+" = offset")},e}();t.Parser=h},5943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var s=function(){function e(e){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references={},this.imports=[],this.reverseImports=new Map,this.importPath=e}return e.prototype.generateVariable=function(e){var t=[],s=this.scopes[this.scopes.length-1];return t.push.apply(t,s),e&&t.push(e),t.join(".")},e.prototype.generateOption=function(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return this.addImport(e)+".call("+this.generateVariable()+", vars)"}},e.prototype.generateError=function(e){this.pushCode("throw new Error("+e+");")},e.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},e.prototype.pushCode=function(e){this.code+=e+"\n"},e.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},e.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},e.prototype.pushScope=function(e){this.scopes.push([e])},e.prototype.popScope=function(){this.scopes.pop()},e.prototype.addImport=function(e){if(!this.importPath)return"("+e+")";var t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),this.importPath+"["+t+"]"},e.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},e.prototype.markResolved=function(e){this.references[e].resolved=!0},e.prototype.markRequested=function(e){var t=this;e.forEach((function(e){t.references[e].requested=!0}))},e.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},e}();t.Context=s},5497:(e,t,s)=>{e.exports=s(1261)},1261:(e,t,s)=>{"use strict";var r=s(2081).exec,n=s(2081).execSync,i=s(7147),o=s(1017),a=i.access,c=i.accessSync,h=i.constants||i,l="win32"==process.platform,u=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};l&&(u=function(e){return/[\\]/.test(e)?'"'+o.dirname(e)+'":"'+o.basename(e)+'"':'"'+e+'"'}),e.exports=function e(t,s){var n=u(t);if(!s&&"undefined"!=typeof Promise)return new Promise((function(s,r){e(t,(function(e,n){n?s(t):r(e)}))}));l?function(e,t,s){/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e)?r("where "+t,(function(e){s(null,null===e)})):s(null,!1)}(t,n,s):function(e,t,s){!function(e,t){a(e,h.F_OK,(function(e){t(!e)}))}(e,(function(n){n?function(e,t){a(e,h.F_OK|h.X_OK,(function(e){t(null,!e)}))}(e,s):r("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,r){s(null,!!t)}))}))}(t,n,s)},e.exports.sync=function(e){var t=u(e);return l?function(e,t,s){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))return!1;try{return!!n("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):function(e,t){if(function(e){try{return c(e,h.F_OK),!1}catch(e){return!0}}(e))try{return!!n("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return c(e,h.F_OK|h.X_OK),!0}catch(e){return!1}}(e)}(e,t)}},1227:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))})),t.splice(n,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,s)=>{e.exports=function(e){function t(e){let s,n,i,o=null;function a(...e){if(!a.enabled)return;const r=a,n=Number(new Date),i=n-(s||n);r.diff=i,r.prev=s,r.curr=n,s=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,n)=>{if("%%"===s)return"%";o++;const i=t.formatters[n];if("function"==typeof i){const t=e[o];s=i.call(r,t),e.splice(o,1),o--}return s})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,s){const r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(s=0;s<n;s++)r[s]&&("-"===(e=r[s].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let s,r;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,s)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=s(1227):e.exports=s(39)},39:(e,t,s)=>{const r=s(6224),n=s(3837);t.init=function(e){e.inspectOpts={};const s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++)e.inspectOpts[s[r]]=t.inspectOpts[s[r]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(s){const{namespace:r,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),i=`  ${n};1m${r} [0m`;s[0]=i+s[0].split("\n").join("\n"+i),s.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else s[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+s[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=s(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const s=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[s]=r,e}),{}),e.exports=s(2447)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},8806:function(){!function(e){function t(){}function s(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===n.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(e){for(var t=0,s=Math.min(65536,e.length+1),r=new Uint16Array(s),n=[],i=0;;){var o=t<e.length;if(!o||i>=s-1){if(n.push(String.fromCharCode.apply(null,r.subarray(0,i))),!o)return n.join("");e=e.subarray(t),i=t=0}if(0==(128&(o=e[t++])))r[i++]=o;else if(192==(224&o)){var a=63&e[t++];r[i++]=(31&o)<<6|a}else if(224==(240&o)){a=63&e[t++];var c=63&e[t++];r[i++]=(31&o)<<12|a<<6|c}else 240==(248&o)&&(65535<(o=(7&o)<<18|(a=63&e[t++])<<12|(c=63&e[t++])<<6|63&e[t++])&&(o-=65536,r[i++]=o>>>10&1023|55296,o=56320|1023&o),r[i++]=o)}}if(e.TextEncoder&&e.TextDecoder)return!1;var n=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var s=e.length,r=0,n=Math.max(32,s+(s>>>1)+7),i=new Uint8Array(n>>>3<<3);t<s;){var o=e.charCodeAt(t++);if(55296<=o&&56319>=o){if(t<s){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,o=((1023&o)<<10)+(1023&a)+65536)}if(55296<=o&&56319>=o)continue}if(r+4>i.length&&(n+=8,n=(n*=1+t/e.length*2)>>>3<<3,(a=new Uint8Array(n)).set(i),i=a),0==(4294967168&o))i[r++]=o;else{if(0==(4294965248&o))i[r++]=o>>>6&31|192;else if(0==(4294901760&o))i[r++]=o>>>12&15|224,i[r++]=o>>>6&63|128;else{if(0!=(4292870144&o))continue;i[r++]=o>>>18&7|240,i[r++]=o>>>12&63|128,i[r++]=o>>>6&63|128}i[r++]=63&o|128}}return i.slice?i.slice(0,r):i.subarray(0,r)},Object.defineProperty(s.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(s.prototype,"fatal",{value:!1}),Object.defineProperty(s.prototype,"ignoreBOM",{value:!1});var i=r;"function"==typeof Buffer&&Buffer.from?i=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(i=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.send(),s.responseText}catch(t){return r(e)}finally{URL.revokeObjectURL(t)}}),s.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),i(e)},e.TextEncoder=t,e.TextDecoder=s}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},6560:e=>{"use strict";e.exports=(e,t=process.argv)=>{const s=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(s+e),n=t.indexOf("--");return-1!==r&&(-1===n||r<n)}},1890:(e,t,s)=>{const r=s(4231),n=s(3610),{mkdirpNative:i,mkdirpNativeSync:o}=s(9378),{mkdirpManual:a,mkdirpManualSync:c}=s(8600),{useNative:h,useNativeSync:l}=s(6167),u=(e,t)=>(e=n(e),t=r(t),h(t)?i(e,t):a(e,t));u.sync=(e,t)=>(e=n(e),t=r(t),l(t)?o(e,t):c(e,t)),u.native=(e,t)=>i(n(e),r(t)),u.manual=(e,t)=>a(n(e),r(t)),u.nativeSync=(e,t)=>o(n(e),r(t)),u.manualSync=(e,t)=>c(n(e),r(t)),e.exports=u},8812:(e,t,s)=>{const{dirname:r}=s(1017),n=(e,t,s)=>s===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?s:void 0),(s=>"ENOENT"===s.code?n(e,r(t),t):void 0)),i=(e,t,s)=>{if(s!==t)try{return e.statSync(t).isDirectory()?s:void 0}catch(s){return"ENOENT"===s.code?i(e,r(t),t):void 0}};e.exports={findMade:n,findMadeSync:i}},8600:(e,t,s)=>{const{dirname:r}=s(1017),n=(e,t,s)=>{t.recursive=!1;const i=r(e);return i===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>s||e),(r=>{if("ENOENT"===r.code)return n(i,t).then((s=>n(e,t,s)));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;return t.statAsync(e).then((e=>{if(e.isDirectory())return s;throw r}),(()=>{throw r}))}))},i=(e,t,s)=>{const n=r(e);if(t.recursive=!1,n===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),s||e}catch(r){if("ENOENT"===r.code)return i(e,t,i(n,t,s));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;try{if(!t.statSync(e).isDirectory())throw r}catch(e){throw r}}};e.exports={mkdirpManual:n,mkdirpManualSync:i}},9378:(e,t,s)=>{const{dirname:r}=s(1017),{findMade:n,findMadeSync:i}=s(8812),{mkdirpManual:o,mkdirpManualSync:a}=s(8600);e.exports={mkdirpNative:(e,t)=>(t.recursive=!0,r(e)===e?t.mkdirAsync(e,t):n(t,e).then((s=>t.mkdirAsync(e,t).then((()=>s)).catch((s=>{if("ENOENT"===s.code)return o(e,t);throw s}))))),mkdirpNativeSync:(e,t)=>{if(t.recursive=!0,r(e)===e)return t.mkdirSync(e,t);const s=i(t,e);try{return t.mkdirSync(e,t),s}catch(s){if("ENOENT"===s.code)return a(e,t);throw s}}}},4231:(e,t,s)=>{const{promisify:r}=s(3837),n=s(7147);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511,fs:n,...e};else if("number"==typeof e)e={mode:e,fs:n};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:n}}else e={mode:511,fs:n};return e.mkdir=e.mkdir||e.fs.mkdir||n.mkdir,e.mkdirAsync=r(e.mkdir),e.stat=e.stat||e.fs.stat||n.stat,e.statAsync=r(e.stat),e.statSync=e.statSync||e.fs.statSync||n.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||n.mkdirSync,e}},3610:(e,t,s)=>{const r=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:n,parse:i}=s(1017);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=n(e),"win32"===r){const t=/[*|"<>?:]/,{root:s}=i(e);if(t.test(e.substr(s.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,s)=>{const r=s(7147),n=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),i=+n[0]>10||10==+n[0]&&+n[1]>=12,o=i?e=>e.mkdir===r.mkdir:()=>!1,a=i?e=>e.mkdirSync===r.mkdirSync:()=>!1;e.exports={useNative:o,useNativeSync:a}},7824:e=>{var t=1e3,s=60*t,r=60*s,n=24*r;function i(e,t,s,r){var n=t>=1.5*s;return Math.round(e/s)+" "+r+(n?"s":"")}e.exports=function(e,o){o=o||{};var a,c,h=typeof e;if("string"===h&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===h&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=n?i(a,c,n,"day"):c>=r?i(a,c,r,"hour"):c>=s?i(a,c,s,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=n?Math.round(e/n)+"d":i>=r?Math.round(e/r)+"h":i>=s?Math.round(e/s)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},473:e=>{function t(e,t){this._elements=new Array(e||50),this._first=0,this._last=0,this._size=0,this._evictedCb=t}e.exports=t,t.prototype.capacity=function(){return this._elements.length},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.isFull=function(){return this.size()===this.capacity()},t.prototype.peek=function(){if(this.isEmpty())throw new Error("RingBuffer is empty");return this._elements[this._first]},t.prototype.peekN=function(e){if(e>this._size)throw new Error("Not enough elements in RingBuffer");var t=Math.min(this._first+e,this.capacity()),s=this._elements.slice(this._first,t);if(t<this.capacity())return s;var r=this._elements.slice(0,e-s.length);return s.concat(r)},t.prototype.deq=function(){var e=this.peek();return this._size--,this._first=(this._first+1)%this.capacity(),e},t.prototype.deqN=function(e){var t=this.peekN(e);return this._size-=e,this._first=(this._first+e)%this.capacity(),t},t.prototype.enq=function(e){this._end=(this._first+this.size())%this.capacity();var t=this.isFull();return t&&this._evictedCb&&this._evictedCb(this._elements[this._end]),this._elements[this._end]=e,t?this._first=(this._first+1)%this.capacity():this._size++,this.size()},t.prototype.size=function(){return this._size}},6099:(e,t,s)=>{!function(e){e.parser=function(e,t){return new n(e,t)},e.SAXParser=n,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(t,s){if(!(this instanceof n))return new n(t,s);var i=this;!function(e){for(var t=0,s=r.length;t<s;t++)e[r[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=s||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=S.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(h)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),E(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}),n.prototype={end:function(){_(this)},write:function(t){var s=this;if(this.error)throw this.error;if(s.closed)return D(s,"Cannot write after close. Assign an onready handler.");if(null===t)return _(s);"object"==typeof t&&(t=t.toString());for(var n=0,i="";i=V(t,n++),s.c=i,i;)switch(s.trackPosition&&(s.position++,"\n"===i?(s.line++,s.column=0):s.column++),s.state){case S.BEGIN:if(s.state=S.BEGIN_WHITESPACE,"\ufeff"===i)continue;L(s,i);continue;case S.BEGIN_WHITESPACE:L(s,i);continue;case S.TEXT:if(s.sawRoot&&!s.closedRoot){for(var o=n-1;i&&"<"!==i&&"&"!==i;)(i=V(t,n++))&&s.trackPosition&&(s.position++,"\n"===i?(s.line++,s.column=0):s.column++);s.textNode+=t.substring(o,n-1)}"<"!==i||s.sawRoot&&s.closedRoot&&!s.strict?(f(i)||s.sawRoot&&!s.closedRoot||I(s,"Text data outside of root node."),"&"===i?s.state=S.TEXT_ENTITY:s.textNode+=i):(s.state=S.OPEN_WAKA,s.startTagPosition=s.position);continue;case S.SCRIPT:"<"===i?s.state=S.SCRIPT_ENDING:s.script+=i;continue;case S.SCRIPT_ENDING:"/"===i?s.state=S.CLOSE_TAG:(s.script+="<"+i,s.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===i)s.state=S.SGML_DECL,s.sgmlDecl="";else if(f(i));else if(y(l,i))s.state=S.OPEN_TAG,s.tagName=i;else if("/"===i)s.state=S.CLOSE_TAG,s.tagName="";else if("?"===i)s.state=S.PROC_INST,s.procInstName=s.procInstBody="";else{if(I(s,"Unencoded <"),s.startTagPosition+1<s.position){var a=s.position-s.startTagPosition;i=new Array(a).join(" ")+i}s.textNode+="<"+i,s.state=S.TEXT}continue;case S.SGML_DECL:"[CDATA["===(s.sgmlDecl+i).toUpperCase()?(O(s,"onopencdata"),s.state=S.CDATA,s.sgmlDecl="",s.cdata=""):s.sgmlDecl+i==="--"?(s.state=S.COMMENT,s.comment="",s.sgmlDecl=""):"DOCTYPE"===(s.sgmlDecl+i).toUpperCase()?(s.state=S.DOCTYPE,(s.doctype||s.sawRoot)&&I(s,"Inappropriately located doctype declaration"),s.doctype="",s.sgmlDecl=""):">"===i?(O(s,"onsgmldeclaration",s.sgmlDecl),s.sgmlDecl="",s.state=S.TEXT):m(i)?(s.state=S.SGML_DECL_QUOTED,s.sgmlDecl+=i):s.sgmlDecl+=i;continue;case S.SGML_DECL_QUOTED:i===s.q&&(s.state=S.SGML_DECL,s.q=""),s.sgmlDecl+=i;continue;case S.DOCTYPE:">"===i?(s.state=S.TEXT,O(s,"ondoctype",s.doctype),s.doctype=!0):(s.doctype+=i,"["===i?s.state=S.DOCTYPE_DTD:m(i)&&(s.state=S.DOCTYPE_QUOTED,s.q=i));continue;case S.DOCTYPE_QUOTED:s.doctype+=i,i===s.q&&(s.q="",s.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:s.doctype+=i,"]"===i?s.state=S.DOCTYPE:m(i)&&(s.state=S.DOCTYPE_DTD_QUOTED,s.q=i);continue;case S.DOCTYPE_DTD_QUOTED:s.doctype+=i,i===s.q&&(s.state=S.DOCTYPE_DTD,s.q="");continue;case S.COMMENT:"-"===i?s.state=S.COMMENT_ENDING:s.comment+=i;continue;case S.COMMENT_ENDING:"-"===i?(s.state=S.COMMENT_ENDED,s.comment=x(s.opt,s.comment),s.comment&&O(s,"oncomment",s.comment),s.comment=""):(s.comment+="-"+i,s.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==i?(I(s,"Malformed comment"),s.comment+="--"+i,s.state=S.COMMENT):s.state=S.TEXT;continue;case S.CDATA:"]"===i?s.state=S.CDATA_ENDING:s.cdata+=i;continue;case S.CDATA_ENDING:"]"===i?s.state=S.CDATA_ENDING_2:(s.cdata+="]"+i,s.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===i?(s.cdata&&O(s,"oncdata",s.cdata),O(s,"onclosecdata"),s.cdata="",s.state=S.TEXT):"]"===i?s.cdata+="]":(s.cdata+="]]"+i,s.state=S.CDATA);continue;case S.PROC_INST:"?"===i?s.state=S.PROC_INST_ENDING:f(i)?s.state=S.PROC_INST_BODY:s.procInstName+=i;continue;case S.PROC_INST_BODY:if(!s.procInstBody&&f(i))continue;"?"===i?s.state=S.PROC_INST_ENDING:s.procInstBody+=i;continue;case S.PROC_INST_ENDING:">"===i?(O(s,"onprocessinginstruction",{name:s.procInstName,body:s.procInstBody}),s.procInstName=s.procInstBody="",s.state=S.TEXT):(s.procInstBody+="?"+i,s.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:y(u,i)?s.tagName+=i:(R(s),">"===i?F(s):"/"===i?s.state=S.OPEN_TAG_SLASH:(f(i)||I(s,"Invalid character in tag name"),s.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===i?(F(s,!0),A(s)):(I(s,"Forward-slash in opening tag not followed by >"),s.state=S.ATTRIB);continue;case S.ATTRIB:if(f(i))continue;">"===i?F(s):"/"===i?s.state=S.OPEN_TAG_SLASH:y(l,i)?(s.attribName=i,s.attribValue="",s.state=S.ATTRIB_NAME):I(s,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===i?s.state=S.ATTRIB_VALUE:">"===i?(I(s,"Attribute without value"),s.attribValue=s.attribName,k(s),F(s)):f(i)?s.state=S.ATTRIB_NAME_SAW_WHITE:y(u,i)?s.attribName+=i:I(s,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===i)s.state=S.ATTRIB_VALUE;else{if(f(i))continue;I(s,"Attribute without value"),s.tag.attributes[s.attribName]="",s.attribValue="",O(s,"onattribute",{name:s.attribName,value:""}),s.attribName="",">"===i?F(s):y(l,i)?(s.attribName=i,s.state=S.ATTRIB_NAME):(I(s,"Invalid attribute name"),s.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(f(i))continue;m(i)?(s.q=i,s.state=S.ATTRIB_VALUE_QUOTED):(I(s,"Unquoted attribute value"),s.state=S.ATTRIB_VALUE_UNQUOTED,s.attribValue=i);continue;case S.ATTRIB_VALUE_QUOTED:if(i!==s.q){"&"===i?s.state=S.ATTRIB_VALUE_ENTITY_Q:s.attribValue+=i;continue}k(s),s.q="",s.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:f(i)?s.state=S.ATTRIB:">"===i?F(s):"/"===i?s.state=S.OPEN_TAG_SLASH:y(l,i)?(I(s,"No whitespace between attributes"),s.attribName=i,s.attribValue="",s.state=S.ATTRIB_NAME):I(s,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!g(i)){"&"===i?s.state=S.ATTRIB_VALUE_ENTITY_U:s.attribValue+=i;continue}k(s),">"===i?F(s):s.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(s.tagName)">"===i?A(s):y(u,i)?s.tagName+=i:s.script?(s.script+="</"+s.tagName,s.tagName="",s.state=S.SCRIPT):(f(i)||I(s,"Invalid tagname in closing tag"),s.state=S.CLOSE_TAG_SAW_WHITE);else{if(f(i))continue;b(l,i)?s.script?(s.script+="</"+i,s.state=S.SCRIPT):I(s,"Invalid tagname in closing tag."):s.tagName=i}continue;case S.CLOSE_TAG_SAW_WHITE:if(f(i))continue;">"===i?A(s):I(s,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var c,h;switch(s.state){case S.TEXT_ENTITY:c=S.TEXT,h="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:c=S.ATTRIB_VALUE_QUOTED,h="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:c=S.ATTRIB_VALUE_UNQUOTED,h="attribValue"}";"===i?(s[h]+=M(s),s.entity="",s.state=c):y(s.entity.length?p:d,i)?s.entity+=i:(I(s,"Invalid character in entity name"),s[h]+="&"+s.entity+i,s.entity="",s.state=c);continue;default:throw new Error(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&function(t){for(var s=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,i=0,o=r.length;i<o;i++){var a=t[r[i]].length;if(a>s)switch(r[i]){case"textNode":P(t);break;case"cdata":O(t,"oncdata",t.cdata),t.cdata="";break;case"script":O(t,"onscript",t.script),t.script="";break;default:D(t,"Max buffer length exceeded: "+r[i])}n=Math.max(n,a)}var c=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=c+t.position}(s),s},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;P(e=this),""!==e.cdata&&(O(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(O(e,"onscript",e.script),e.script="")}};try{t=s(2781).Stream}catch(e){t=function(){}}var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,s){if(!(this instanceof o))return new o(e,s);t.apply(this),this._parser=new n(e,s),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=s(1576).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,s){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,s)};var a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",h={xml:a,xmlns:c},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function m(e){return'"'===e||"'"===e}function g(e){return">"===e||f(e)}function y(e,t){return e.test(t)}function b(e,t){return!y(e,t)}var v,w,T,S=0;for(var C in e.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var s=e.ENTITIES[t],r="number"==typeof s?String.fromCharCode(s):s;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[C]]=C;function E(e,t,s){e[t]&&e[t](s)}function O(e,t,s){e.textNode&&P(e),E(e,t,s)}function P(e){e.textNode=x(e.opt,e.textNode),e.textNode&&E(e,"ontext",e.textNode),e.textNode=""}function x(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function D(e,t){return P(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,E(e,"onerror",t),e}function _(e){return e.sawRoot&&!e.closedRoot&&I(e,"Unclosed root tag"),e.state!==S.BEGIN&&e.state!==S.BEGIN_WHITESPACE&&e.state!==S.TEXT&&D(e,"Unexpected end"),P(e),e.c="",e.closed=!0,E(e,"onend"),n.call(e,e.strict,e.opt),e}function I(e,t){if("object"!=typeof e||!(e instanceof n))throw new Error("bad call to strictFail");e.strict&&D(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,s=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(s.ns=t.ns),e.attribList.length=0,O(e,"onopentagstart",s)}function N(e,t){var s=e.indexOf(":")<0?["",e]:e.split(":"),r=s[0],n=s[1];return t&&"xmlns"===e&&(r="xmlns",n=""),{prefix:r,local:n}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),s=t.prefix,r=t.local;if("xmlns"===s)if("xml"===r&&e.attribValue!==a)I(e,"xml: prefix must be bound to "+a+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==c)I(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var n=e.tag,i=e.tags[e.tags.length-1]||e;n.ns===i.ns&&(n.ns=Object.create(i.ns)),n.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,O(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var s=e.tag,r=N(e.tagName);s.prefix=r.prefix,s.local=r.local,s.uri=s.ns[r.prefix]||"",s.prefix&&!s.uri&&(I(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),s.uri=r.prefix);var n=e.tags[e.tags.length-1]||e;s.ns&&n.ns!==s.ns&&Object.keys(s.ns).forEach((function(t){O(e,"onopennamespace",{prefix:t,uri:s.ns[t]})}));for(var i=0,o=e.attribList.length;i<o;i++){var a=e.attribList[i],c=a[0],h=a[1],l=N(c,!0),u=l.prefix,d=l.local,p=""===u?"":s.ns[u]||"",f={name:c,value:h,prefix:u,local:d,uri:p};u&&"xmlns"!==u&&!p&&(I(e,"Unbound namespace prefix: "+JSON.stringify(u)),f.uri=u),e.tag.attributes[c]=f,O(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),O(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=S.TEXT:e.state=S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function A(e){if(!e.tagName)return I(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=S.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=S.SCRIPT);O(e,"onscript",e.script),e.script=""}var t=e.tags.length,s=e.tagName;e.strict||(s=s[e.looseCase]());for(var r=s;t--&&e.tags[t].name!==r;)I(e,"Unexpected close tag");if(t<0)return I(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=S.TEXT);e.tagName=s;for(var n=e.tags.length;n-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,O(e,"onclosetag",e.tagName);var o={};for(var a in i.ns)o[a]=i.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==c.ns&&Object.keys(i.ns).forEach((function(t){var s=i.ns[t];O(e,"onclosenamespace",{prefix:t,uri:s})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=S.TEXT}function M(e){var t,s=e.entity,r=s.toLowerCase(),n="";return e.ENTITIES[s]?e.ENTITIES[s]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(s=r).charAt(0)&&("x"===s.charAt(1)?(s=s.slice(2),n=(t=parseInt(s,16)).toString(16)):(s=s.slice(1),n=(t=parseInt(s,10)).toString(10))),s=s.replace(/^0+/,""),isNaN(t)||n.toLowerCase()!==s?(I(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function L(e,t){"<"===t?(e.state=S.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(I(e,"Non-whitespace before first tag."),e.textNode=t,e.state=S.TEXT)}function V(e,t){var s="";return t<e.length&&(s=e.charAt(t)),s}S=e.STATE,String.fromCodePoint||(v=String.fromCharCode,w=Math.floor,T=function(){var e,t,s=16384,r=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||w(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(n+1===i||r.length>s)&&(o+=v.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(t)},2130:(e,t,s)=>{"use strict";const r=s(2037),n=s(6224),i=s(6560),{env:o}=process;let a;function c(e,t={}){return 0!==(s=function(e,{streamIsTTY:t,sniffFlags:s=!0}={}){const n=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==n&&(a=n);const c=s?a:n;if(0===c)return 0;if(s){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===c)return 0;const h=c||0;if("dumb"===o.TERM)return h;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:h;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:h}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3};var s}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?a=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=1),e.exports={supportsColor:c,stdout:c({isTTY:n.isatty(1)}),stderr:c({isTTY:n.isatty(2)})}},2159:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GDBServer=t.ServerConsoleLog=t.GdbPid=void 0;const n=s(2081),i=s(2037),o=s(1808),a=s(7147),c=s(1017),h=s(2361),l=s(9512),u=s(3200),d=s(530);function p(e,s){if(e)try{const r=i.tmpdir(),n=new Date;s&&(t.GdbPid=s),e=`[${n.toISOString()}] ppid=${process.pid} pid=${t.GdbPid} `+e,console.log(e),e.endsWith("\n")||(e+="\n"),a.appendFileSync(c.join(r,"cortex-debug-server-exiting.log"),e)}catch(e){console.log(e?e.toString():"unknown exception?")}}t.GdbPid=-1,t.ServerConsoleLog=p;let f=[];class m extends h.EventEmitter{constructor(e,t,s,r,n,i){super(),this.cwd=e,this.application=t,this.args=s,this.initMatch=r,this.port=n,this.consolePort=i,this.outBuffer="",this.errBuffer="",this.consoleSocket=null,this.pid=-1,this.exitTimeout=null,this.killInProgress=!1}init(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){if(null!==this.application){this.initResolve=e,this.initReject=t;try{yield this.connectToConsole()}catch(e){p("GDBServer: Could not connect to console: "+e),t(e)}this.process=n.spawn(this.application,this.args,{cwd:this.cwd}),f.push(this),this.pid=this.process.pid,this.process.stdout.on("data",this.onStdout.bind(this)),this.process.stderr.on("data",this.onStderr.bind(this)),this.process.on("exit",this.onExit.bind(this)),this.process.on("error",this.onError.bind(this)),-1!==this.application.indexOf("st-util")&&"win32"===i.platform()&&l.setTimeout((()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)}),500),null==this.initMatch&&l.setTimeout((()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)}),100)}else e(!0)}))))}isExternal(){return!this.application}isProcessRunning(){return!!this.process}exit(){if(this.process&&!this.killInProgress)try{p(`GDBServer(${this.pid}): forcing an exit with kill()`),this.killInProgress=!0,this.process.kill()}catch(e){p(`GDBServer(${this.pid}): Trying to force and exit failed ${e}`)}}onExit(e,t){p(`GDBServer(${this.pid}): exited code=${e} signal=${t}`),f=f.filter((e=>e!==this)),this.process=null,this.exitTimeout&&(clearTimeout(this.exitTimeout),this.exitTimeout=null),this.emit("exit",e,t),this.disconnectConsole()}onError(e){this.initReject&&(this.initReject(e),this.initReject=null,this.initResolve=null),this.emit("launcherror",e)}onStdout(e){if(this.sendToConsole(e),this.initResolve){this.outBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch&&this.initMatch.test(this.outBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.outBuffer.lastIndexOf("\n");-1!==t&&(this.outBuffer=this.outBuffer.substring(t+1))}}onStderr(e){if(this.sendToConsole(e),this.initResolve){this.errBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch&&this.initMatch.test(this.errBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.errBuffer.lastIndexOf("\n");-1!==t&&(this.errBuffer=this.errBuffer.substring(t+1))}}connectToConsole(){return new Promise(((e,t)=>{const s=new o.Socket;s.on("data",(e=>{try{this.process.stdin.write(e,"utf8")}catch(e){console.error(`stdin write failed ${e}`)}})),s.once("close",(()=>{this.consoleSocket=null})),s.on("error",(e=>{if("ECONNRESET"!==e.code){const s=`Error: unexpected socket error ${e}. Please report this problem`;this.emit("output",s+"\n"),console.error(s),this.consoleSocket||t(e)}else this.consoleSocket&&(this.consoleSocket.destroy(),this.consoleSocket=null)})),s.connect(this.consolePort,"127.0.0.1",(()=>{s.write(d.greenFormat(u.quoteShellCmdLine([this.application,...this.args])+"\n")),this.consoleSocket=s,e()}))}))}sendToConsole(e){this.consoleSocket?this.consoleSocket.write(e):console.error("sendToConsole: console not open. How did this happen?")}disconnectConsole(){try{this.consoleSocket&&(this.consoleSocket.destroy(),this.consoleSocket=null)}catch(e){}}}t.GDBServer=m,m.SERVER_TIMEOUT=1e4,m.LOCALHOST="0.0.0.0",process.on("exit",((e,t)=>{if(f.length>0){p(`Debug Adapter killed by VSCode? code=${e} signal=${t}`);for(const e of[...f])e.exit()}}))},3200:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpawnLineReader=t.validateELFHeader=t.sanitizeDevDebug=t.quoteShellCmdLine=t.quoteShellAndCmdChars=t.HrTimer=t.ResettableTimeout=t.ResettableInterval=t.getNonce=t.parseHostPort=t.toStringDecHexOctBin=t.parseHexOrDecInt=t.getAnyFreePort=t.createPortName=t.calculatePortMask=t.RTTServerHelper=t.genDownloadCommands=t.CTIAction=t.defSymbolFile=t.ChainedEvents=t.TelemetryEvent=t.RTTConfigureEvent=t.BinaryEncoding=t.TextEncoding=t.TerminalInputMode=t.SWOConfigureEvent=t.StoppedEvent=t.GenericCustomEvent=t.NumberFormat=t.CortexDebugKeys=t.ADAPTER_DEBUG_MODE=void 0;const n=s(9955),i=s(2361),o=s(3725),a=s(2159),c=s(2081),h=s(7147),l=s(4521);var u,d,p,f,m,g,y,b;!function(e){e.NONE="none",e.PARSED="parsed",e.BOTH="both",e.RAW="raw",e.VSCODE="vscode"}(u=t.ADAPTER_DEBUG_MODE||(t.ADAPTER_DEBUG_MODE={})),(p=t.CortexDebugKeys||(t.CortexDebugKeys={})).REGISTER_DISPLAY_MODE="registerUseNaturalFormat",p.VARIABLE_DISPLAY_MODE="variableUseNaturalFormat",p.SERVER_LOG_FILE_NAME="dbgServerLogfile",p.DEV_DEBUG_MODE="showDevDebugOutput",(d=t.NumberFormat||(t.NumberFormat={}))[d.Auto=0]="Auto",d[d.Hexadecimal=1]="Hexadecimal",d[d.Decimal=2]="Decimal",d[d.Binary=3]="Binary";class v extends n.Event{constructor(e,t){super("custom-event-"+e,{info:t})}}t.GenericCustomEvent=v;class w extends n.Event{constructor(e,t,s){super("stopped",{reason:e,threadId:t,allThreadsStopped:s})}}t.StoppedEvent=w;class T extends n.Event{constructor(e){super("swo-configure",e)}}t.SWOConfigureEvent=T,(g=t.TerminalInputMode||(t.TerminalInputMode={})).COOKED="cooked",g.RAW="raw",g.RAWECHO="rawecho",g.DISABLED="disabled",(m=t.TextEncoding||(t.TextEncoding={})).UTF8="utf8",m.UTF16LE="utf16le",m.ASCII="ascii",m.UCS2="ucs2",(f=t.BinaryEncoding||(t.BinaryEncoding={})).UNSIGNED="unsigned",f.SIGNED="signed",f.Q1616="Q16.16",f.FLOAT="float";class S extends n.Event{constructor(e){super("rtt-configure",e)}}t.RTTConfigureEvent=S;class C extends n.Event{constructor(e,t,s,r={}){super("record-event",{category:e,action:t,label:s,parameters:r})}}function E(e){const t=/[\s\"\*\[\]!@#$%^&*\(\)\\:]/g.test(e)?'"':"";return t+(e=e.replace(/"/g,'\\"').replace(/\\/g,"\\\\")).replace(/"/g,'\\"')+t}t.TelemetryEvent=C,(b=t.ChainedEvents||(t.ChainedEvents={})).POSTSTART="postStart",b.POSTINIT="postInit",t.defSymbolFile=function(e){return{file:e,sections:[],sectionMap:{}}},(y=t.CTIAction||(t.CTIAction={}))[y.init=0]="init",y[y.pause=1]="pause",y[y.resume=2]="resume",t.genDownloadCommands=function(e,t){if(Array.isArray(null==e?void 0:e.loadFiles)){if(0===e.loadFiles.length)return[];{const s=[...t];for(const t of e.loadFiles){const e=t.replace(/\\/g,"/");s.push(`file-exec-file "${e}"`,"target-download")}return s}}return[...t,"target-download"]},t.RTTServerHelper=class{constructor(){this.rttLocalPortMap={},this.allocDone=!1}allocateRTTPorts(e,t=6e4){if(this.allocDone=!0,!e||!e.enabled||!e.decoders||0===e.decoders.length)return Promise.resolve();const s="??";for(const t of e.decoders)if(t.ports&&t.ports.length>0){t.tcpPorts=[];for(const e of t.ports)this.rttLocalPortMap[e]=s}else this.rttLocalPortMap[t.port]=s;const r={min:t,max:t+2e3,retrieve:Object.keys(this.rttLocalPortMap).length,consecutive:!1};return o.TcpPortScanner.findFreePorts(r,a.GDBServer.LOCALHOST).then((t=>{for(const r of e.decoders)if(r.ports&&r.ports.length>0){r.tcpPorts=[];for(const e of r.ports){let n=this.rttLocalPortMap[e];n===s&&(n=t.shift().toString(),this.rttLocalPortMap[e]=n),r.tcpPorts.push(n)}}else{let e=this.rttLocalPortMap[r.port];e===s&&(e=t.shift().toString(),this.rttLocalPortMap[r.port]=e),r.tcpPort=e}}))}emitConfigures(e,t){let s=!1;if(e.enabled)for(const r of e.decoders)(r.tcpPort||r.tcpPorts)&&(t.emit("event",new S({type:"socket",decoder:r})),s=!0);return s}},t.calculatePortMask=function(e){if(!e)return 0;let t=0;return e.forEach((e=>{if("advanced"===e.type)for(const s of e.ports)t=(t|1<<s)>>>0;else t=(t|1<<e.port)>>>0})),t},t.createPortName=function(e,t="gdbPort"){return t+(0===e?"":e.toString())},t.getAnyFreePort=function(e){return new Promise(((t,s)=>r(this,void 0,void 0,(function*(){function r(){o.TcpPortScanner.findFreePorts({min:6e4,max:62e3,retrieve:1,consecutive:!1},a.GDBServer.LOCALHOST).then((e=>{t(e[0])})).catch((e=>{s(e)}))}e>0?o.TcpPortScanner.isPortInUseEx(e,a.GDBServer.LOCALHOST,o.TcpPortScanner.AvoidPorts).then((s=>{s?r():(o.TcpPortScanner.EmitAllocated([e]),t(e))})):r()}))))},t.parseHexOrDecInt=function(e){return e.startsWith("0x")?parseInt(e.substring(2),16):parseInt(e,10)},t.toStringDecHexOctBin=function(e){if(Number.isNaN(e))return"NaN: Not a number";if(!Number.isSafeInteger(e))return"Big Num: "+e.toString()+"\nother-radix values not yet available. Sorry";let t=`dec: ${e}`;e<0&&(e=1+~((e=-e)>>>0)>>>0);let s=e.toString(16);s="0x"+"0".repeat(Math.max(0,8-s.length))+s,t+=`\nhex: ${s}`,s=e.toString(8),s="0".repeat(Math.max(0,12-s.length))+s,t+=`\noct: ${s}`,s=e.toString(2),s="0".repeat(Math.max(0,32-s.length))+s;let r="";for(;;){if(s.length<=8){r=s+r;break}r=" "+s.slice(-8)+r,s=s.slice(0,-8)}return t+=`\nbin: ${r}`,t},t.parseHostPort=function(e){let t,s="127.0.0.1";const r=e.match(/(.*)\:([0-9]+)/);return r?(s=r[1]?r[1]:s,t=parseInt(r[2],10)):(e.startsWith(":")&&(e=e.slice(1)),t=parseInt(e,10)),{port:t,host:s}},t.getNonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<32;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t.ResettableInterval=class{constructor(e,t,s=!1,...r){this.cb=e,this.interval=t,this.args=r,s&&this.cb(...this.args),this.intervalId=setInterval(this.cb,this.interval,...this.args)}kill(){this.isRunning()&&(clearInterval(this.intervalId),this.intervalId=null)}reset(e){this.kill(),void 0!==e&&(this.interval=e),this.intervalId=setInterval(this.cb,this.interval,...this.args)}isRunning(){return null!=this.intervalId}},t.ResettableTimeout=class{constructor(e,t,...s){this.cb=e,this.interval=t,this.timeoutId=null,this.args=s,this.timeoutId=setTimeout(((...e)=>{this.timeoutId=null,this.cb(...this.args)}),this.interval,...this.args)}kill(){this.isRunning()&&(clearTimeout(this.timeoutId),this.timeoutId=null)}reset(e){this.kill(),void 0!==e&&(this.interval=e),this.timeoutId=setTimeout(this.cb,this.interval,...this.args)}isRunning(){return null!==this.timeoutId}},t.HrTimer=class{constructor(){this.start=process.hrtime.bigint()}restart(){this.start=process.hrtime.bigint()}getStart(){return this.start}deltaNs(){return(process.hrtime.bigint()-this.start).toString()}deltaUs(){return this.toStringWithRes(3)}deltaMs(){return this.toStringWithRes(6)}createPaddedMs(e){return this.deltaMs().padStart(e,"0")}createDateTimestamp(){const e=this.createPaddedMs(6);return`[${(new Date).toISOString()}, +${e}ms]`}toStringWithRes(e){let t=(process.hrtime.bigint()-this.start+BigInt(Math.pow(10,e)/2)).toString();return t=t.length<=e?"0":t.substr(0,t.length-e),t}},t.quoteShellAndCmdChars=E,t.quoteShellCmdLine=function(e){return e.map((e=>E(e))).join(" ")},t.sanitizeDevDebug=function(e){const t=Object.values(u);let s=e.showDevDebugOutput;if("string"==typeof s&&(s=s.toLowerCase().trim(),e.showDevDebugOutput=s),!1===s||"false"===s||""===s||"none"===s)delete e.showDevDebugOutput;else if(!0===s||"true)"===s)e.showDevDebugOutput=u.RAW;else if(t.indexOf(s)<0)return e.showDevDebugOutput=u.VSCODE,!1;return!0},t.validateELFHeader=function(e,t){try{if(!h.existsSync(e))return t&&t(`File not found "executable": "${e}"`,!0),!1;const s=Buffer.alloc(16),r=h.openSync(e,"r"),n=h.readSync(r,s,0,16,0);return h.closeSync(r),16!==n?(t&&t(`Could not read 16 bytes from "executable": "${e}"`,!0),!1):127===s[0]&&69===s[1]&&76===s[2]&&70===s[3]||(t&&t(`Not a valid ELF file "executable": "${e}". Many debug functions can fail or not work properly`,!1),!1)}catch(s){return t&&t(`Could not read file "executable": "${e}" ${s?s.toString():""}`,!0),!1}};class O extends i.EventEmitter{constructor(){super()}startWithProgram(e,t=[],s={},r=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=r,this.promise=new Promise((r=>{try{const n=c.spawn(e,t,s);n.on("error",(e=>{this.emit("error",e),r(!1)})),n.on("exit",((e,t)=>{this.emit("exit",e,t)})),this.doReadline(n.stdout,r)}catch(e){this.emit("error",e)}})),this.promise}startWithStream(e,t=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=t,this.promise=new Promise((t=>{this.doReadline(e,t)})),this.promise}startWithFile(e,t=null,s=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=s,this.promise=new Promise((s=>{const r=h.createReadStream(e,t||{flags:"r"});r.on("error",(e=>{this.emit("error",e),s(!1)})),r.on("open",(()=>{this.doReadline(r,s)}))})),this.promise}doReadline(e,t){try{const s=l.createInterface({input:e,crlfDelay:1/0,console:!1});s.on("line",(e=>{this.callback?this.callback(e)||s.close():this.emit("line",e)})),s.once("close",(()=>{this.callback&&this.callback(null),e.destroy(),this.emit("close"),t(!0)}))}catch(e){this.emit("error",e)}}}t.SpawnLineReader=O},1644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressRangesUtils=t.AddrRange=void 0;class s{constructor(e,t){this.base=e,this.length=t}nxtAddr(){return this.base+this.length}endAddr(){return this.nxtAddr()-1}}t.AddrRange=s;t.AddressRangesUtils=class{constructor(){}static splitIntoChunks(e,t,r="",n=0){const i=new Array;for(const r of e){for(;r.length>t;)i.push(new s(r.base,t)),r.base+=t,r.length-=t;r.length>0&&i.push(r)}return i.length,i}static consoleLog(e,t,s,r){console.log(e+` base=0x${t.toString(16)}, totalLen=${s}, #ranges=${r.length}\n`);let n=0;for(const e of r)n+=e.length,console.log(`**** 0x${e.base.toString(16)}, len=${e.length}, cum-bytes=${n}\n`);const i=s-n;if(n>0&&s>0){const t=i/s*100;console.log(e+` totalLen=${s}, savings=${i} ${t.toFixed(2)}%`)}}}},530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.magentaFormat=t.greenFormat=t.BR_GREEN_FG=t.BR_MAGENTA_FG=t.RESET=t.BOLD=t.CSI=t.ESC=void 0,t.ESC="",t.CSI=t.ESC+"[",t.BOLD=t.CSI+"1m",t.RESET=t.CSI+"0m",t.BR_MAGENTA_FG=t.CSI+"95m",t.BR_GREEN_FG=t.CSI+"92m",t.greenFormat=function(e){return t.BR_GREEN_FG+e+t.RESET},t.magentaFormat=function(e){return t.BR_MAGENTA_FG+e+t.RESET}},6244:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CortexDebugConfigurationProvider=void 0;const r=s(6828),n=s(7147),i=s(2037),o=s(2057),a=s(5287),c=s(3200),h=s(8640),l=s(1017),u=["ChibiOS","eCos","embKernel","FreeRTOS","mqx","nuttx","ThreadX","uCOS-III","auto"],d=["Azure","ChibiOS","embOS","FreeRTOS","NuttX","Zephyr"];class p{constructor(e){this.context=e}resolveDebugConfiguration(e,t,s){var n;if(a.GDBServerConsole.BackendPort<=0)return void r.window.showErrorMessage("GDB server console not yet ready. Please try again. Report this problem");switch(t.gdbServerConsolePort=a.GDBServerConsole.BackendPort,t.pvtAvoidPorts=h.CDebugSession.getAllUsedPorts(),i.platform()){case"darwin":Object.assign(t,t.osx),delete t.osx;break;case"win32":Object.assign(t,t.windows),delete t.windows;break;case"linux":Object.assign(t,t.linux),delete t.linux;break;default:console.log(`Unknown platform ${i.platform()}`)}this.sanitizeChainedConfigs(t),t.debugger_args&&!t.debuggerArgs&&(t.debuggerArgs=t.debugger_args),t.debuggerArgs||(t.debuggerArgs=[]);const l=t.servertype;let u=null;switch(t.swoConfig?(t.swoConfig.ports&&!t.swoConfig.decoders&&(t.swoConfig.decoders=t.swoConfig.ports),t.swoConfig.source||(t.swoConfig.source="probe"),t.swoConfig.decoders||(t.swoConfig.decoders=[]),t.swoConfig.decoders.forEach(((e,t)=>{"advanced"===e.type?void 0===e.ports&&void 0!==e.number&&(e.ports=[e.number]):void 0===e.port&&void 0!==e.number&&(e.port=e.number)}))):t.swoConfig={enabled:!1,decoders:[],cpuFrequency:0,swoFrequency:0,source:"probe"},t.rttConfig?t.rttConfig.decoders||(t.rttConfig.decoders=[]):t.rttConfig={enabled:!1,decoders:[]},t.graphConfig||(t.graphConfig=[]),t.preLaunchCommands||(t.preLaunchCommands=[]),t.postLaunchCommands||(t.postLaunchCommands=[]),t.preAttachCommands||(t.preAttachCommands=[]),t.postAttachCommands||(t.postAttachCommands=[]),t.preRestartCommands||(t.preRestartCommands=[]),t.postRestartCommands||(t.postRestartCommands=[]),t.runToEntryPoint?t.runToEntryPoint=t.runToEntryPoint.trim():t.runToMain&&(t.runToEntryPoint="main",r.window.showWarningMessage('launch.json: "runToMain" has been deprecated and will not work in future versions of Cortex-Debug. Please use "runToEntryPoint" instead')),"openocd"===l&&(null===(n=t.ctiOpenOCDConfig)||void 0===n?void 0:n.enabled)||delete t.ctiOpenOCDConfig,l){case"jlink":u=this.verifyJLinkConfiguration(e,t);break;case"openocd":u=this.verifyOpenOCDConfiguration(e,t);break;case"stutil":u=this.verifySTUtilConfiguration(e,t);break;case"stlink":u=this.verifySTLinkConfiguration(e,t);break;case"pyocd":u=this.verifyPyOCDConfiguration(e,t);break;case"bmp":u=this.verifyBMPConfiguration(e,t);break;case"pe":u=this.verifyPEConfiguration(e,t);break;case"external":u=this.verifyExternalConfiguration(e,t);break;case"qemu":u=this.verifyQEMUConfiguration(e,t);break;default:u='Invalid servertype parameters. The following values are supported: "jlink", "openocd", "stlink", "stutil", "pyocd", "bmp", "pe", "qemu", "external"'}const d=r.workspace.getConfiguration("cortex-debug");if(void 0===t.showDevDebugOutput&&(t.showDevDebugOutput=d.get(c.CortexDebugKeys.DEV_DEBUG_MODE,c.ADAPTER_DEBUG_MODE.NONE)),!c.sanitizeDevDebug(t)){const e=Object.values(c.ADAPTER_DEBUG_MODE);r.window.showInformationMessage(`launch.json: "showDevDebugOutput" muse be one of ${e}. Setting to "${t.showDevDebugOutput}"`)}if(t.armToolchainPath&&(t.toolchainPath=t.armToolchainPath),this.setOsSpecficConfigSetting(t,"toolchainPath","armToolchainPath"),t.toolchainPath||t.armToolchainPath||"stlink"!==t.servertype||(t.armToolchainPath=o.STLinkServerController.getArmToolchainPath()),t.toolchainPrefix||(t.toolchainPrefix=d.armToolchainPrefix||"arm-none-eabi"),this.setOsSpecficConfigSetting(t,"gdbPath"),this.setOsSpecficConfigSetting(t,"objdumpPath"),t.extensionPath=this.context.extensionPath,"win32"===i.platform()&&(t.extensionPath=t.extensionPath.replace(/\\/g,"/")),t.registerUseNaturalFormat=d.get(c.CortexDebugKeys.REGISTER_DISPLAY_MODE,!0),t.variableUseNaturalFormat=d.get(c.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0),!u)return t;r.window.showErrorMessage(u)}resolveDebugConfigurationWithSubstitutedVariables(e,t,s){var n;let i=t.cwd||e.uri.fsPath;l.isAbsolute(i)||(i=l.join(e.uri.fsPath,i)),t.cwd=i,this.validateLoadAndSymbolFiles(t,i);const o=r.extensions.getExtension("marus25.cortex-debug");t.pvtVersion=(null===(n=null==o?void 0:o.packageJSON)||void 0===n?void 0:n.version)||"<unknown version>";let a=null;if(a="jlink"===t.servertype?this.verifyJLinkConfigurationAfterSubstitution(e,t):null,!a)return t;r.window.showErrorMessage(a)}static adjustStrIntProp(e,t,s){if(!e.hasOwnProperty(t))return;let n=e[t];if(n){let i=!1;"string"==typeof n&&(n=n.trim(),i=n.match(/^0[x][0-9a-f]+/i)||n.match(/^[0-9]+/)),i?e[t]=parseInt(n):"number"!=typeof e[t]&&(r.window.showErrorMessage(`Invalid "${t}" value ${n} for ${s}. Must be a number or a string." +\n                    " Use a string starting with "0x" for a hexadecimal number`),delete e[t])}}validateLoadAndSymbolFiles(e,t){const s=c.defSymbolFile(e.executable),n=e.symbolFiles||[s];if(n&&0!==n.length){for(const s of n){let n=s.file;n=l.isAbsolute(n)?n:l.join(t,n),n=l.normalize(n).replace(/\\/g,"/"),e.symbolFiles?s.file=n:e.executable=n,p.adjustStrIntProp(s,"offset",`file ${n}`),p.adjustStrIntProp(s,"textaddress",`file ${n}`),s.sectionMap={},s.sections=s.sections||[];for(const e of s.sections)p.adjustStrIntProp(e,"address",`section ${e.name} of file ${n}`),s.sectionMap[e.name]=e;c.validateELFHeader(n,((e,t)=>{t&&r.window.showErrorMessage(e)}))}e.symbolFiles&&(e.symbolFiles=n)}else r.window.showWarningMessage('No "executable" or "symbolFiles" specified. We will try to run program without symbols');if(e.loadFiles)for(let s=0;s<e.loadFiles.length;s++){let r=e.loadFiles[s];r=l.isAbsolute(r)?r:l.join(t,r),r=l.normalize(r).replace(/\\/g,"/"),e.loadFiles[s]=r}}handleChainedInherits(e,t,s){if(!s)return;const n=["type","name","request","chainedConfigurations"];for(const i of s){if(n.includes(i)||i.startsWith("pvt")){r.window.showWarningMessage(`Cannot inherit property '${i}' for configuration '${e.name}' because it is reserved`);continue}const s=t[i];void 0!==s?e[i]=s:r.window.showWarningMessage(`Cannot inherit property '${i}' for configuration '${e.name}' because it does not exist in parent configuration`)}}handleChainedOverrides(e,t){if(!t)return;const s=["type","name","request"];for(const r of Object.keys(t)){if(s.includes(r)||r.startsWith("pvt"))continue;const n=t[r];null===n?delete e[r]:e[r]=n}}sanitizeChainedConfigs(e){const t=h.CDebugChainedSessionItem.FindByName(e.name);t&&(e.pvtParent=t.parent.config,e.pvtMyConfigFromParent=t.config,this.handleChainedInherits(e,e.pvtParent,t.config.inherits),this.handleChainedOverrides(e,t.config.overrides));const s=e.chainedConfigurations;if(!s||!s.enabled||!s.launches||0===s.launches.length)return void(e.chainedConfigurations={enabled:!1});s.delayMs||(s.delayMs=0),s.waitOnEvent&&Object.values(c.ChainedEvents).includes(s.waitOnEvent)||(s.waitOnEvent=c.ChainedEvents.POSTINIT),void 0!==s.detached&&null!==s.detached||(s.detached="jlink"===e.servertype),void 0!==s.lifecycleManagedByParent&&null!==s.lifecycleManagedByParent||(s.lifecycleManagedByParent=!0);const r=s.overrides||{};for(const e of s.launches){void 0!==e.enabled&&null!==e.enabled||(e.enabled=!0),void 0===e.delayMs&&(e.delayMs=s.delayMs),void 0!==e.detached&&null!==e.detached||(e.detached=s.detached),void 0!==e.waitOnEvent&&Object.values(c.ChainedEvents).includes(e.waitOnEvent)||(e.waitOnEvent=s.waitOnEvent),void 0!==e.lifecycleManagedByParent&&null!==e.lifecycleManagedByParent||(e.lifecycleManagedByParent=s.lifecycleManagedByParent);const t=(e.inherits||[]).concat(s.inherits||[]);t.length>0?e.inherits=t:delete e.inherits;const n=e.overrides||{};Object.keys(r).length>0||Object.keys(n).length>0?e.overrides=Object.assign(r,n):delete e.overrides}}setOsSpecficConfigSetting(e,t,s=""){if(!e[t]){const n=r.workspace.getConfiguration("cortex-debug"),o=i.platform(),a=(s||t)+"."+("win32"===o?"windows":"darwin"===o?"osx":"linux");e[t]=n.get(a,n.get(s||t,""))}}verifyQEMUConfiguration(e,t){return this.setOsSpecficConfigSetting(t,"serverpath","qemupath"),t.cpu||(t.cpu="cortex-m3"),t.machine||(t.machine="lm3s6965evb"),t.swoConfig.enabled&&(r.window.showWarningMessage("SWO support is not available when using QEMU."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),t.rtos?"RTOS support is not available when using QEMU":null}verifyJLinkConfiguration(e,t){if(t.jlinkpath&&!t.serverpath&&(t.serverpath=t.jlinkpath),!t.interface&&t.jlinkInterface&&(t.interface=t.jlinkInterface),t.interface||(t.interface="swd"),this.setOsSpecficConfigSetting(t,"serverpath","JLinkGDBServerPath"),!t.device)return"Device Identifier is required for J-Link configurations. Please see https://www.segger.com/downloads/supported-devices.php for supported devices";if(("jtag"===t.interface||"cjtag"===t.interface)&&t.swoConfig.enabled&&"probe"===t.swoConfig.source)return"SWO Decoding cannot be performed through the J-Link Probe in JTAG mode.";if(t.rttConfig&&t.rttConfig.enabled&&t.rttConfig.decoders&&0!==t.rttConfig.decoders.length){let e;for(const s of t.rttConfig.decoders){if(void 0===s.port)s.port=0;else if(s.port<0||s.port>15)return`Invalid port/channel '${s.port}'.  JLink RTT port/channel must be between 0 and 15.`;if(void 0!==e&&e!==s.port)return`Port/channel ${s.port} selected but another decoder is using port ${e}. JLink RTT only allows a single RTT port/channel per debugging session.`;e=s.port}}return null}verifyJLinkConfigurationAfterSubstitution(e,t){function s(){switch(i.platform()){case"darwin":return".dylib";case"linux":return".so";case"win32":return".dll";default:return console.log(`Unknown platform ${i.platform()}`),""}}if(t.rtos)if(-1===d.indexOf(t.rtos)){if(""===l.extname(t.rtos)&&(t.rtos=t.rtos+s()),!n.existsSync(t.rtos))return`JLink RTOS plugin file "${t.rtos}" not found.\nThe following RTOS values are supported by J-Link: ${d.join(", ")}. A custom plugin can be used by supplying a complete path to a J-Link GDB Server Plugin.`}else t.rtos=`GDBServer/RTOSPlugin_${t.rtos}`+s();return null}verifyOpenOCDConfiguration(e,t){if(t.openOCDPath&&!t.serverpath&&(t.serverpath=t.openOCDPath),this.setOsSpecficConfigSetting(t,"serverpath","openocdPath"),t.rtos&&-1===u.indexOf(t.rtos))return`The following RTOS values are supported by OpenOCD: ${u.join(" ")}`;if(!h.CDebugChainedSessionItem.FindByName(t.name)){if(!t.configFiles||0===t.configFiles.length)return"At least one OpenOCD Configuration File must be specified.";t.searchDir&&0!==t.searchDir.length||(t.searchDir=[])}return null}verifySTUtilConfiguration(e,t){return t.stutilpath&&!t.serverpath&&(t.serverpath=t.stutilpath),this.setOsSpecficConfigSetting(t,"serverpath","stutilPath"),t.rtos?"The st-util GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(r.window.showWarningMessage("SWO support is not available from the probe when using the ST-Util GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)}verifySTLinkConfiguration(e,t){return t.stlinkPath&&!t.serverpath&&(t.serverpath=t.stlinkPath),this.setOsSpecficConfigSetting(t,"serverpath","stlinkPath"),this.setOsSpecficConfigSetting(t,"stm32cubeprogrammer"),t.rtos?"The ST-Link GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(r.window.showWarningMessage("SWO support is not available from the probe when using the ST-Link GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)}verifyPyOCDConfiguration(e,t){return t.pyocdPath&&!t.serverpath&&(t.serverpath=t.pyocdPath),this.setOsSpecficConfigSetting(t,"serverpath","pyocdPath"),t.rtos?"The PyOCD GDB Server does not have support for the rtos option.":(t.board&&!t.boardId&&(t.boardId=t.board),t.target&&!t.targetId&&(t.targetId=t.target),null)}verifyBMPConfiguration(e,t){return t.BMPGDBSerialPort?(t.powerOverBMP||(t.powerOverBMP="lastState"),t.interface||(t.interface="swd"),t.targetId||(t.targetId=1),t.rtos?"The Black Magic Probe GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(r.window.showWarningMessage("SWO support is not available from the probe when using the BMP GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)):"A Serial Port for the Black Magic Probe GDB server is required."}verifyPEConfiguration(e,t){return this.setOsSpecficConfigSetting(t,"serverpath","PEGDBServerPath"),t.configFiles&&t.configFiles.length>1?"Only one pegdbserver Configuration File is allowed.":t.device?t.swoConfig.enabled?"The PE GDB Server does not have support for SWO":null:"Device Identifier is required for PE configurations. Please run `pegdbserver_console.exe -devicelist` for supported devices"}verifyExternalConfiguration(e,t){return t.swoConfig.enabled&&("socket"!==t.swoConfig.source||t.swoConfig.swoPort?"socket"===t.swoConfig.source||t.swoConfig.swoPath||(r.window.showWarningMessage(`SWO source type "${t.swoConfig.source}" requires a "swoPath". Disabling SWO support.`),t.swoConfig={enabled:!1},t.graphConfig=[]):(r.window.showWarningMessage('SWO source type "socket" requires a "swoPort". Disabling SWO support.'),t.swoConfig={enabled:!1},t.graphConfig=[])),t.gdbTarget?null:'External GDB server type must specify the GDB target. This should either be a "hostname:port" combination or a serial port.'}}t.CortexDebugConfigurationProvider=p},8640:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDebugChainedSessionItem=t.CDebugSession=void 0;const r=s(6206),n=s(6828);class i{constructor(e,t){this.session=e,this.config=t,this.swo=null,this.rtt=null,this.swoSource=null,this.rttPortMap={},this.status="none",this.parent=null,this.children=[],this.usedPorts=new Set,e&&i.CurrentSessions.push(this)}getRoot(){return this.parent&&this.parent.parent?this.parent.getRoot():this}hasChildren(){return this.children.length>0}moveToRoot(){this.parent&&(this.remove(),i.ROOT.add(this))}broadcastDFS(e,t=!0){(t?this.getRoot():this)._broadcastDFS(e)}_broadcastDFS(e){for(const t of this.children)t._broadcastDFS(e);e(this)}remove(){this.parent.removeChild(this)}add(e){r.assert(!e.parent,"child already has a parent?"),this.children.find((t=>t===e))?r.assert(!1,"child already exists"):(this.children.push(e),e.parent=this)}removeChild(e){this.children=this.children.filter((t=>t!==e)),e.parent=null}stopAll(){this.broadcastDFS((e=>{n.debug.stopDebugging(e.session)}))}static RemoveSession(e){const t=i.FindSession(e);t?(t.status="exited",t.remove(),i.CurrentSessions=i.CurrentSessions.filter((t=>t.session.id!==e.id))):console.error(`Where did session ${e.id} go?`)}static FindSession(e){return i.FindSessionById(e.id)}static FindSessionById(e){return i.CurrentSessions.find((t=>t.session.id===e))}static GetSession(e,t){const s=i.FindSessionById(e.id);return s?(s.config=t||s.config,s):new i(e,t||e.configuration)}static NewSessionStarted(e){const t=i.GetSession(e);if(t.status="started",e.parentSession&&"cortex-debug"===e.parentSession.type){const s=i.FindSession(e.parentSession);s?s.add(t):n.window.showErrorMessage(`Internal Error: Have parent for new session, Parent = ${e.parentSession.name} but can't find it`)}else i.ROOT.add(t);return t}static getAllUsedPorts(){const e=new Set;for(const t of i.CurrentSessions)if("started"===t.status||"stopped"===t.status||"running"===t.status)for(const s of t.usedPorts.values())e.add(s);return Array.from(e.values())}addUsedPorts(e){for(const t of e)this.usedPorts.add(t)}}t.CDebugSession=i,i.ROOT=new i(null,null),i.CurrentSessions=[];class o{constructor(e,t,s){this.parent=e,this.config=t,this.options=s,o.SessionsStack.push(this)}static FindByName(e){return this.SessionsStack.find((t=>t.config.name===e))}static RemoveItem(e){o.SessionsStack=o.SessionsStack.filter((t=>t!==e))}}t.CDebugChainedSessionItem=o,o.SessionsStack=[]},3414:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisassemblyContentProvider=void 0;const r=s(6828),n=s(6292);t.DisassemblyContentProvider=class{provideTextDocumentContent(e,t){return new Promise(((t,s)=>{let i,o;const a=e.path,c=a.substring(1,a.length-6).split(":::");1===c.length?(o=null,i=c[0]):(o=c[0],i=c[1]);const h=n.CortexDebugExtension.getActiveCDSession();h?h.customRequest("disassemble",{function:i,file:o}).then((e=>{const s=e.instructions;let r="";s.forEach((e=>{r+=`${e.address}: ${this.padEnd(15,e.opcodes)} \t${e.instruction}\n`})),t(r)}),(e=>{r.window.showErrorMessage(e.message),s(e.message)})):s(new Error("DisassemblyContentProvider: unknown debug session type"))}))}padEnd(e,t){for(let s=t.length;s<e;s++)t+=" ";return t}}},6292:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=t.CortexDebugExtension=void 0;const n=s(6828),i=s(7147),o=s(1017),a=s(2028),c=s(3213),h=s(8904),l=s(3200),u=s(4533),d=s(4942),p=s(6244),f=s(1337),m=s(1339),g=s(3624),y=s(1325),b=s(3414),v=s(565),w=s(7561),T=s(5287),S=s(8640),C=s(2159),E=s(1485);s(5497).sync;class O{constructor(e,t,s,r){this.name=e,this.promise=t,this.resolve=s,this.reject=r}}class P{constructor(e){this.context=e,this.rttTerminals=[],this.gdbServerConsole=null,this.SVDDirectory=[],this.functionSymbols=null;const t=n.workspace.getConfiguration("cortex-debug");this.startServerConsole(e,t.get(l.CortexDebugKeys.SERVER_LOG_FILE_NAME,"")),this.peripheralProvider=new a.PeripheralTreeProvider,this.registerProvider=new c.RegisterTreeProvider,this.memoryProvider=new u.MemoryContentProvider,new E.RTOSTracker(e);let s=[];try{const t=o.join(e.extensionPath,"data","SVDMap.json");s=JSON.parse(i.readFileSync(t,"utf8"))}catch(e){}d.default.activate(e),this.peripheralTreeView=n.window.createTreeView("cortex-debug.peripherals",{treeDataProvider:this.peripheralProvider}),this.registerTreeView=n.window.createTreeView("cortex-debug.registers",{treeDataProvider:this.registerProvider}),n.commands.executeCommand("setContext",`cortex-debug:${l.CortexDebugKeys.REGISTER_DISPLAY_MODE}`,t.get(l.CortexDebugKeys.REGISTER_DISPLAY_MODE,!0)),n.commands.executeCommand("setContext",`cortex-debug:${l.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,t.get(l.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0)),e.subscriptions.push(n.workspace.registerTextDocumentContentProvider("examinememory",this.memoryProvider),n.workspace.registerTextDocumentContentProvider("disassembly",new b.DisassemblyContentProvider),n.commands.registerCommand("cortex-debug.peripherals.updateNode",this.peripheralsUpdateNode.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.copyValue",this.peripheralsCopyValue.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.setFormat",this.peripheralsSetFormat.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.forceRefresh",this.peripheralsForceRefresh.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.pin",this.peripheralsTogglePin.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.unpin",this.peripheralsTogglePin.bind(this)),n.commands.registerCommand("cortex-debug.registers.copyValue",this.registersCopyValue.bind(this)),n.commands.registerCommand("cortex-debug.registers.refresh",this.registersRefresh.bind(this)),n.commands.registerCommand("cortex-debug.registers.regHexModeTurnOn",this.registersNaturalMode.bind(this,!1)),n.commands.registerCommand("cortex-debug.registers.regHexModeTurnOff",this.registersNaturalMode.bind(this,!0)),n.commands.registerCommand("cortex-debug.varHexModeTurnOn",this.variablesNaturalMode.bind(this,!1)),n.commands.registerCommand("cortex-debug.varHexModeTurnOff",this.variablesNaturalMode.bind(this,!0)),n.commands.registerCommand("cortex-debug.toggleVariableHexFormat",this.toggleVariablesHexMode.bind(this)),n.commands.registerCommand("cortex-debug.examineMemory",this.examineMemory.bind(this)),n.commands.registerCommand("cortex-debug.viewDisassembly",this.showDisassembly.bind(this)),n.commands.registerCommand("cortex-debug.setForceDisassembly",this.setForceDisassembly.bind(this)),n.commands.registerCommand("cortex-debug.resetDevice",this.resetDevice.bind(this)),n.commands.registerCommand("cortex-debug.pvtEnableDebug",this.pvtCycleDebugMode.bind(this)),n.workspace.onDidChangeConfiguration(this.settingsChanged.bind(this)),n.debug.onDidReceiveDebugSessionCustomEvent(this.receivedCustomEvent.bind(this)),n.debug.onDidStartDebugSession(this.debugSessionStarted.bind(this)),n.debug.onDidTerminateDebugSession(this.debugSessionTerminated.bind(this)),n.window.onDidChangeActiveTextEditor(this.activeEditorChanged.bind(this)),n.window.onDidCloseTerminal(this.terminalClosed.bind(this)),n.workspace.onDidCloseTextDocument(this.textDocsClosed.bind(this)),n.window.onDidChangeTextEditorSelection((e=>{e&&e.textEditor.document.fileName.endsWith(".cdmem")&&this.memoryProvider.handleSelection(e)})),n.debug.registerDebugConfigurationProvider("cortex-debug",new p.CortexDebugConfigurationProvider(e)),this.registerTreeView,this.registerTreeView.onDidCollapseElement((e=>{e.element.expanded=!1})),this.registerTreeView.onDidExpandElement((e=>{e.element.expanded=!0})),this.peripheralTreeView,this.peripheralTreeView.onDidExpandElement((e=>{e.element.expanded=!0,e.element.getPeripheral().updateData(),this.peripheralProvider.refresh()})),this.peripheralTreeView.onDidCollapseElement((e=>{e.element.expanded=!1})))}textDocsClosed(e){e.fileName.endsWith(".cdmem")&&this.memoryProvider.Unregister(e)}static getActiveCDSession(){const e=n.debug.activeDebugSession;return"cortex-debug"===(null==e?void 0:e.type)?e:null}resetDevice(){var e,t;let s=P.getActiveCDSession();if(s){let r=S.CDebugSession.FindSession(s);const n=null===(e=r.config)||void 0===e?void 0:e.pvtParent;for(;r&&n;){const e=null===(t=r.config)||void 0===t?void 0:t.pvtMyConfigFromParent;if(!(null==e?void 0:e.lifecycleManagedByParent)||!n.__sessionId)break;if(r=S.CDebugSession.FindSessionById(n.__sessionId),!r)break;s=r.session||s}s.customRequest("reset-device","reset")}}startServerConsole(e,t=""){return new Promise(((s,r)=>{this.gdbServerConsole=new T.GDBServerConsole(e,t),this.gdbServerConsole.startServer().then((()=>{console.log("GDB server console created"),s()})).catch((e=>{this.gdbServerConsole.dispose(),this.gdbServerConsole=null,n.window.showErrorMessage(`Could not create gdb-server-console. Will use old style console. Please report this problem. ${e.toString()}`)}))}))}settingsChanged(e){if(e.affectsConfiguration(`cortex-debug.${l.CortexDebugKeys.REGISTER_DISPLAY_MODE}`)){let e=0;for(const t of S.CDebugSession.CurrentSessions)"stopped"===t.status&&this.isDebugging(t.session)&&(this.registerProvider.refresh(t.session),e++);if(e!==S.CDebugSession.CurrentSessions.length){const t=`Cortex-Debug: ${e>0?"Some sessions updated. ":""}New format will take effect next time the session pauses`;n.window.showInformationMessage(t)}}if(e.affectsConfiguration(`cortex-debug.${l.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`)){const t=!n.workspace.getConfiguration("cortex-debug").get(l.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0);let s=!1;for(const r of S.CDebugSession.CurrentSessions)try{this.isDebugging(r.session)&&(r.session.customRequest("set-var-format",{hex:t}),"stopped"===r.status&&(s=!0))}catch(e){}if(!s){const e=`Cortex-Debug: Variables window format "${t?"hex":"dec"}" will take effect next time the session pauses`;n.window.showInformationMessage(e)}}if(e.affectsConfiguration(`cortex-debug.${l.CortexDebugKeys.SERVER_LOG_FILE_NAME}`)){const e=n.workspace.getConfiguration("cortex-debug").get(l.CortexDebugKeys.SERVER_LOG_FILE_NAME,"");this.gdbServerConsole.createLogFile(e)}if(e.affectsConfiguration(`cortex-debug.${l.CortexDebugKeys.DEV_DEBUG_MODE}`)){const t=n.workspace.getConfiguration("cortex-debug").get(l.CortexDebugKeys.DEV_DEBUG_MODE,l.ADAPTER_DEBUG_MODE.NONE);for(const s of S.CDebugSession.CurrentSessions)try{s.session.customRequest("set-debug-mode",{mode:t})}catch(e){}}}getSVDFile(e){const t=this.SVDDirectory.find((t=>t.expression.test(e)));return t?t.path:null}registerSVDFile(e,t){"string"==typeof e&&(e=new RegExp(`^${e}$`,"")),this.SVDDirectory.push({expression:e,path:t})}activeEditorChanged(e){const t=P.getActiveCDSession();if(void 0!==e&&t){const s=e.document.uri;"file"===s.scheme||"disassembly"===s.scheme&&t.customRequest("set-active-editor",{path:`${s.scheme}://${s.authority}${s.path}`})}}showDisassembly(){return r(this,void 0,void 0,(function*(){const e=P.getActiveCDSession();if(e){if(!this.functionSymbols)try{const t=yield e.customRequest("load-function-symbols");this.functionSymbols=t.functionSymbols}catch(e){n.window.showErrorMessage("Unable to load symbol table. Disassembly view unavailable.")}try{let e=yield n.window.showInputBox({placeHolder:"main",ignoreFocusOut:!0,prompt:"Function Name (exact or a regexp) to Disassemble."});if(e=e?e.trim():null,!e)return;let t,s=this.functionSymbols.filter((t=>t.name===e));if(0===s.length){let t=new RegExp(e);e.endsWith("/i")&&(t=new RegExp(e.substring(0,e.length-2),"i")),s=this.functionSymbols.filter((e=>t.test(e.name)))}if(0===s.length)n.window.showInformationMessage(`No function matching name/regexp '${e}' found.\nPlease report this problem if you think it in error. We will need your executable to debug.`),t=`disassembly:///${e}.cdasm`;else if(1===s.length)t=s[0].file&&s[0].scope!==v.SymbolScope.Global?`disassembly:///${s[0].file}:::${s[0].name}.cdasm`:`disassembly:///${s[0].name}.cdasm`;else if(s.length>31)n.window.showErrorMessage(`Too many(${s.length}) functions matching '${e}' found.`);else{const e=yield n.window.showQuickPick(s.map((e=>({label:e.name,name:e.name,file:e.file,scope:e.scope,description:e.file&&e.scope!==v.SymbolScope.Global?`Static in ${e.file}`:"Global Scope"}))),{ignoreFocusOut:!0});t=e.file&&e.scope!==v.SymbolScope.Global?`disassembly:///${e.file}:::${e.name}.cdasm`:`disassembly:///${e.name}.cdasm`}t&&n.window.showTextDocument(n.Uri.parse(t))}catch(e){n.window.showErrorMessage("Unable to show disassembly.")}}else n.window.showErrorMessage("No cortex-debug debugging session available")}))}setForceDisassembly(){const e=P.getActiveCDSession();e?n.window.showQuickPick([{label:"Auto",description:"Show disassembly for functions when source cannot be located."},{label:"Forced",description:"Always show disassembly for functions."}],{matchOnDescription:!0,ignoreFocusOut:!0}).then((t=>{const s="Forced"===t.label;e.customRequest("set-force-disassembly",{force:s}),d.default.sendEvent("Force Disassembly","Set",s?"Forced":"Auto")}),(e=>{})):n.window.showErrorMessage("Command not valid when cortex-debug session not active")}examineMemory(){P.getActiveCDSession()?n.window.showInputBox({placeHolder:"Enter a valid C/gdb expression. Use 0x prefix for hexadecimal numbers",ignoreFocusOut:!0,prompt:"Memory Address"}).then((e=>{if(!function(e){return""===e?null:e}(e=e.trim()))return n.window.showErrorMessage("Invalid memory address entered"),void d.default.sendEvent("Examine Memory","Invalid Address",e);n.window.showInputBox({placeHolder:"Enter a constant value. Prefix with 0x for hexadecimal format.",ignoreFocusOut:!0,prompt:"Length"}).then((t=>{if(!function(e){return/^0x[0-9a-f]{1,8}$/i.test(e)||/^[0-9]+$/i.test(e)?e:null}(t=t.trim()))return n.window.showErrorMessage("Invalid length entered"),void d.default.sendEvent("Examine Memory","Invalid Length",t);d.default.sendEvent("Examine Memory","Valid",`${e}-${t}`);const s=(new Date).getTime(),r=encodeURIComponent(`${e}`),i=n.Uri.parse(`examinememory:///Memory%20[${r},${t}].cdmem?address=${r}&length=${t}&timestamp=${s}`);this.memoryProvider.PreRegister(i),n.workspace.openTextDocument(i).then((e=>{this.memoryProvider.Register(e),n.window.showTextDocument(e,{viewColumn:2,preview:!1}),d.default.sendEvent("Examine Memory","Used")}),(e=>{n.window.showErrorMessage(`Failed to examine memory: ${e}`),d.default.sendEvent("Examine Memory","Error",e.toString())}))}),(e=>{}))}),(e=>{})):n.window.showErrorMessage("No cortex-debug session available")}peripheralsUpdateNode(e){e.performUpdate().then((e=>{e&&(this.peripheralProvider.refresh(),d.default.sendEvent("Peripheral View","Update Node"))}),(e=>{n.window.showErrorMessage(`Unable to update value: ${e.toString()}`)}))}peripheralsCopyValue(e){const t=e.getCopyValue();t&&n.env.clipboard.writeText(t).then((()=>{d.default.sendEvent("Peripheral View","Copy Value")}))}peripheralsSetFormat(e){return r(this,void 0,void 0,(function*(){const t=yield n.window.showQuickPick([{label:"Auto",description:"Automatically choose format (Inherits from parent)",value:l.NumberFormat.Auto},{label:"Hex",description:"Format value in hexadecimal",value:l.NumberFormat.Hexadecimal},{label:"Decimal",description:"Format value in decimal",value:l.NumberFormat.Decimal},{label:"Binary",description:"Format value in binary",value:l.NumberFormat.Binary}]);void 0!==t&&(e.format=t.value,this.peripheralProvider.refresh(),d.default.sendEvent("Peripheral View","Set Format",t.label))}))}peripheralsForceRefresh(e){return r(this,void 0,void 0,(function*(){e?e.getPeripheral().updateData().then((e=>{this.peripheralProvider.refresh()})):this.peripheralProvider.refresh()}))}peripheralsTogglePin(e){return r(this,void 0,void 0,(function*(){this.peripheralProvider.togglePinPeripheral(e),this.peripheralProvider.refresh()}))}registersCopyValue(e){const t=e.getCopyValue();t&&n.env.clipboard.writeText(t).then((()=>{d.default.sendEvent("Register View","Copy Value")}))}registersRefresh(){const e=P.getActiveCDSession();e&&this.isDebugging(e)&&this.registerProvider.refresh(e)}registersNaturalMode(e){const t=n.workspace.getConfiguration("cortex-debug");n.commands.executeCommand("setContext",`cortex-debug:${l.CortexDebugKeys.REGISTER_DISPLAY_MODE}`,e);try{t.update(l.CortexDebugKeys.REGISTER_DISPLAY_MODE,e)}catch(e){console.error(e)}}variablesNaturalMode(e,t){const s=n.workspace.getConfiguration("cortex-debug");n.commands.executeCommand("setContext",`cortex-debug:${l.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,e);try{s.update(l.CortexDebugKeys.VARIABLE_DISPLAY_MODE,e)}catch(e){console.error(e)}}toggleVariablesHexMode(){const e=n.workspace.getConfiguration("cortex-debug"),t=!e.get(l.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0);n.commands.executeCommand("setContext",`cortex-debug:${l.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,t);try{e.update(l.CortexDebugKeys.VARIABLE_DISPLAY_MODE,t)}catch(e){console.error(e)}}pvtCycleDebugMode(){const e=n.workspace.getConfiguration("cortex-debug"),t=e.get(l.CortexDebugKeys.DEV_DEBUG_MODE,l.ADAPTER_DEBUG_MODE.NONE),s=Object.values(l.ADAPTER_DEBUG_MODE);let r=s.indexOf(t);r=r<0?r=0:(r+1)%s.length,e.set(l.CortexDebugKeys.DEV_DEBUG_MODE,s[r])}debugSessionStarted(e){if("cortex-debug"!==e.type)return;const t=S.CDebugSession.NewSessionStarted(e);this.functionSymbols=null,e.customRequest("get-arguments").then((s=>{t.config=s;let r=s.svdFile;r||(r=this.getSVDFile(s.device)),d.default.beginSession(e.id,s),t.swoSource&&this.initializeSWO(e,s),Object.keys(t.rttPortMap).length>0&&this.initializeRTT(e,s),this.isDebugging(e)&&this.registerProvider.debugSessionStarted(e),this.peripheralProvider.debugSessionStarted(e,r&&!s.noDebug?r:null,s.svdAddrGapThreshold),this.cleanupRTTTerminals()}),(e=>{n.window.showErrorMessage(`Internal Error: Could not get startup arguments. Many debug functions can fail. Please report this problem. Error: ${e}`)}))}debugSessionTerminated(e){if("cortex-debug"!==e.type)return;const t=S.CDebugSession.FindSession(e);try{if(d.default.endSession(e.id),this.registerProvider.debugSessionTerminated(e),this.peripheralProvider.debugSessionTerminated(e),(null==t?void 0:t.swo)&&t.swo.debugSessionTerminated(),(null==t?void 0:t.swoSource)&&t.swoSource.dispose(),(null==t?void 0:t.rtt)&&t.rtt.debugSessionTerminated(),null==t?void 0:t.rttPortMap){for(const e of Object.keys(t.rttPortMap))t.rttPortMap[e].dispose();t.rttPortMap={}}}catch(e){n.window.showInformationMessage(`Debug session did not terminate cleanly ${e}\n${e?e.stackstrace:""}. Please report this problem`)}finally{S.CDebugSession.RemoveSession(e)}}receivedCustomEvent(e){var t,s;if("cortex-debug"===e.session.type)switch(e.event){case"custom-stop":this.receivedStopEvent(e);break;case"custom-continued":this.receivedContinuedEvent(e);break;case"swo-configure":this.receivedSWOConfigureEvent(e);break;case"rtt-configure":this.receivedRTTConfigureEvent(e);break;case"record-event":this.receivedEvent(e);break;case"custom-event-open-disassembly":n.commands.executeCommand("editor.debug.action.openDisassemblyView");break;case"custom-event-post-start-server":this.startChainedConfigs(e,l.ChainedEvents.POSTSTART);break;case"custom-event-post-start-gdb":this.startChainedConfigs(e,l.ChainedEvents.POSTINIT);break;case"custom-event-session-terminating":C.ServerConsoleLog("Got event for sessions terminating",process.pid),this.endChainedConfigs(e);break;case"custom-event-session-restart":this.resetOrResartChained(e,"restart");break;case"custom-event-session-reset":this.resetOrResartChained(e,"reset");break;case"custom-event-popup":const r=null===(t=e.body.info)||void 0===t?void 0:t.message;switch(null===(s=e.body.info)||void 0===s?void 0:s.type){case"warning":n.window.showWarningMessage(r);break;case"error":n.window.showErrorMessage(r);break;default:n.window.showInformationMessage(r)}break;case"custom-event-ports-allocated":this.registerPortsAsUsed(e);break;case"custom-event-ports-done":this.signalPortsAllocated(e)}}signalPortsAllocated(e){this.serverStartedEvent&&(this.serverStartedEvent.resolve(e),this.serverStartedEvent=void 0)}registerPortsAsUsed(e){var t;S.CDebugSession.GetSession(e.session).addUsedPorts((null===(t=e.body)||void 0===t?void 0:t.info)||[])}startChainedConfigs(e,t){var s,i;return r(this,void 0,void 0,(function*(){const r=null===(s=null==e?void 0:e.body)||void 0===s?void 0:s.info,o=S.CDebugSession.GetSession(e.session,r);if(!r||!(null===(i=r.chainedConfigurations)||void 0===i?void 0:i.enabled))return;const a=r.chainedConfigurations.launches.filter(((e,t)=>t===r.chainedConfigurations.launches.findIndex(((t,s)=>t.name===e.name)))).filter((e=>e.enabled&&e.waitOnEvent===t&&e.name));let c=0,h=a.length;for(const t of a){h--;const s={consoleMode:n.DebugConsoleMode.Separate,noDebug:r.noDebug,compact:!1};t.lifecycleManagedByParent&&(s.lifecycleManagedByParent=!0,s.parentSession=e.session),c+=Math.max(t.delayMs||0,0);const i=new S.CDebugChainedSessionItem(o,t,s),a=this.getWsFolder(t.folder,e.session.workspaceFolder,t.name);if(setTimeout((()=>{n.debug.startDebugging(a,t.name,s).then((e=>{e||n.window.showErrorMessage("Failed to launch chained configuration "+t.name),S.CDebugChainedSessionItem.RemoveItem(i)}),(e=>{n.window.showErrorMessage(`Failed to launch chained configuration ${t.name}: ${e}`),S.CDebugChainedSessionItem.RemoveItem(i)}))}),c),t&&t.detached&&h>0){try{let e,s;const r=new Promise(((t,r)=>{e=t,s=r}));this.serverStartedEvent=new O(t.name,r,e,s);let n=setTimeout((()=>{this.serverStartedEvent&&(this.serverStartedEvent.reject(new Error(`Timeout starting chained session: ${t.name}`)),this.serverStartedEvent=void 0),n=void 0}),5e3);yield r,n&&clearTimeout(n)}catch(e){n.window.showErrorMessage(`Detached chained configuration launch failed? Aborting rest. Error: ${e}`);break}c=0}else c+=5}}))}endChainedConfigs(e){const t=S.CDebugSession.FindSession(e.session);if(t&&t.hasChildren){const s=[],r=[];for(t.broadcastDFS((e=>{e!==t&&(e.config.pvtMyConfigFromParent.lifecycleManagedByParent?s.push(e):r.push(e))}),!1);r.length>0;)r.pop().moveToRoot();for(;s.length>0;){const t=s.pop();C.ServerConsoleLog(`Sending custom-stop-debugging to ${t.session.name}`,process.pid),t.session.customRequest("custom-stop-debugging",e.body.info).then((()=>{}),(e=>{n.window.showErrorMessage(`Cortex-Debug: Bug? session.customRequest('set-stop-debugging-type', ... failed ${e}\n`)}))}}}resetOrResartChained(e,t){const s=S.CDebugSession.FindSession(e.session);s&&s.hasChildren&&s.broadcastDFS((e=>{e!==s&&e.config.pvtMyConfigFromParent.lifecycleManagedByParent&&e.session.customRequest("reset-device",t).then((()=>{}),(e=>{}))}),!1)}getWsFolder(e,t,s){if(e){const t=e,r=e=>(e="/"===(e=o.normalize(e).replace(/\\/g,"/"))?e:e.replace(/\/+$/,""),"win32"===process.platform&&(e=e.toLowerCase()),e);e=r(e);for(const t of n.workspace.workspaceFolders){const s=r(t.uri.fsPath);if(t.uri.fsPath===e||t.name===e||s===e)return t}n.window.showInformationMessage(`Chained configuration for '${s}' specified folder is '${t}' normalized path is '${e}' did not match any workspace folders. Using parents folder.`)}return t}getCurrentArgs(e){if(!(e||(e=n.debug.activeDebugSession)&&"cortex-debug"===e.type))return;const t=S.CDebugSession.FindSession(e);return t?t.config:e.configuration}getCurrentProp(e,t){const s=this.getCurrentArgs(e);return s?s[t]:void 0}isDebugging(e){return!0!==this.getCurrentProp(e,"noDebug")}receivedStopEvent(e){const t=S.CDebugSession.FindSession(e.session);t.status="stopped",this.peripheralProvider.debugStopped(e.session),this.isDebugging(e.session)&&this.registerProvider.debugStopped(e.session),n.workspace.textDocuments.filter((e=>e.fileName.endsWith(".cdmem"))).forEach((e=>{e.isClosed||this.memoryProvider.update(e)})),t.swo&&t.swo.debugStopped(),t.rtt&&t.rtt.debugStopped()}receivedContinuedEvent(e){const t=S.CDebugSession.FindSession(e.session);t.status="running",this.peripheralProvider.debugContinued(),this.isDebugging(e.session)&&this.registerProvider.debugContinued(),t.swo&&t.swo.debugContinued(),t.rtt&&t.rtt.debugContinued()}receivedEvent(e){d.default.sendEvent(e.body.category,e.body.action,e.body.label,e.body.parameters)}receivedSWOConfigureEvent(e){const t=S.CDebugSession.GetSession(e.session);if("socket"===e.body.type){const s=new f.SocketSWOSource(e.body.port);return t.swoSource=s,this.initializeSWO(e.session,e.body.args),s.start().then((()=>{console.log(`Connected after ${s.nTries} tries`)}),(e=>{n.window.showErrorMessage(`Could not open SWO TCP port ${e.body.port} ${e} after ${s.nTries} tries`)})),void d.default.sendEvent("SWO","Source","Socket")}"fifo"===e.body.type?(t.swoSource=new m.FifoSWOSource(e.body.path),d.default.sendEvent("SWO","Source","FIFO")):"file"===e.body.type?(t.swoSource=new g.FileSWOSource(e.body.path),d.default.sendEvent("SWO","Source","File")):"serial"===e.body.type&&(t.swoSource=new y.SerialSWOSource(e.body.device,e.body.baudRate,this.context.extensionPath),d.default.sendEvent("SWO","Source","Serial")),this.initializeSWO(e.session,e.body.args)}receivedRTTConfigureEvent(e){if("socket"===e.body.type){const t=e.body.decoder;if("console"===t.type||"binary"===t.type)d.default.sendEvent("RTT","Source","Socket: Console"),this.rttCreateTerninal(e,t);else if(d.default.sendEvent("RTT","Source",`Socket: ${t.type}`),t.ports)for(let s=0;s<t.ports.length;s+=1)this.createRTTSource(e,t.tcpPorts[s],t.ports[s]);else this.createRTTSource(e,t.tcpPort,t.port)}else console.error("receivedRTTConfigureEvent: unknown type: "+e.body.type)}createRTTSource(e,t,s){const r=S.CDebugSession.GetSession(e.session);return new Promise(((e,i)=>{let o=r.rttPortMap[s];o?e(o):(o="jlink"===r.config.servertype?new f.JLinkSocketRTTSource(t,s):new f.SocketRTTSource(t,s),r.rttPortMap[s]=o,e(o),o.start().then((()=>{r.session.customRequest("rtt-poll")})).catch((e=>{n.window.showErrorMessage(`Could not connect to RTT TCP port ${t} ${e}`),i(e)})))}))}cleanupRTTTerminals(){this.rttTerminals=this.rttTerminals.filter((e=>!!e.inUse||(e.dispose(),!1)))}rttCreateTerninal(e,t){this.createRTTSource(e,t.tcpPort,t.port).then((e=>{for(const s of this.rttTerminals)if(!s.inUse&&s.tryReuse(t,e))return void(n.debug.activeDebugConsole&&n.debug.activeDebugConsole.appendLine(`Reusing RTT terminal for channel ${t.port} on tcp port ${t.tcpPort}`));const s=new w.RTTTerminal(this.context,t,e);this.rttTerminals.push(s),n.debug.activeDebugConsole&&n.debug.activeDebugConsole.appendLine(`Created RTT terminal for channel ${t.port} on tcp port ${t.tcpPort}`)}))}terminalClosed(e){this.rttTerminals=this.rttTerminals.filter((t=>t.terminal!==e))}initializeSWO(e,t){const s=S.CDebugSession.FindSession(e);s.swoSource?s.swo||(s.swo=new h.SWOCore(e,s.swoSource,t,this.context.extensionPath)):n.window.showErrorMessage("Tried to initialize SWO Decoding without a SWO data source")}initializeRTT(e,t){const s=S.CDebugSession.FindSession(e);s.rtt||(s.rtt=new h.RTTCore(s.rttPortMap,t,this.context.extensionPath))}}t.CortexDebugExtension=P,t.activate=function(e){return new P(e)},t.deactivate=function(){}},4533:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryContentProvider=void 0;const r=s(6828),n=s(3200),i=s(6292),o=s(2942);t.MemoryContentProvider=class{constructor(){this._onDidChange=new r.EventEmitter,this.onDidChange=this._onDidChange.event,this.allMemoryWindows={},this.firstBytePos=10,this.lastBytePos=this.firstBytePos+48-1,this.firstAsciiPos=this.lastBytePos+3,this.lastAsciiPos=this.firstAsciiPos+16,this.smallDecorationType=r.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:r.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}})}Unregister(e){const t=this.allMemoryWindows[e.uri.path];t&&(t.isClosed=!0,t.textDoc=void 0)}PreRegister(e){const t={textDoc:void 0,isClosed:!1,uri:e,lastText:""};this.allMemoryWindows[e.path]=t}Register(e){const t=this.allMemoryWindows[e.uri.path];t&&(t.textDoc=e,t.isClosed=!1)}provideTextDocumentContent(e){return new Promise(((t,s)=>{const a=this.allMemoryWindows[e.path];if(a&&a.isClosed)return void t(a.lastText);const c=this.parseQuery(e.query),h=c.address,l=n.parseHexOrDecInt(c.length),u=i.CortexDebugExtension.getActiveCDSession();u?u.customRequest("read-memory",{address:h,length:l||32}).then((e=>{const s=e.bytes,r=n.parseHexOrDecInt(e.startAddress);let i=r-r%16;const c=r-i;let h="";h+="  Offset: 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F \t\n",h+=o.hexFormat(i,8,!1)+": ";let u="";for(let e=0;e<c;e++)h+="   ",u+=" ";for(let e=0;e<l;e++){const t=s[e];h+=o.hexFormat(t,2,!1).toUpperCase()+" ",u+=t<=32||t>=127&&t<=159?".":String.fromCharCode(s[e]),(r+e)%16==15&&e<l-1&&(h+="  "+u,u="",h+="\n",i+=16,h+=o.hexFormat(i,8,!1)+": ")}const d=(16-(r+l)%16)%16;for(let e=0;e<d;e++)h+="   ";h+="  "+u,h+="\n",a&&(a.lastText=h),t(h)}),(e=>{const t=e.message||"";r.window.showErrorMessage(`Unable to read memory from ${h} of length ${o.hexFormat(l,8)}: ${t}`),s(e.toString())})):s(new Error("MemoryContentProvider: unknown debug session type"))}))}update(e){this._onDidChange.fire(e.uri)}parseQuery(e){const t={};function s(e){const s=e.split("="),r=s.shift();t[r]=s.join("=")}const r=("?"===e[0]?e.substr(1):e).split("&");return s(r.pop()),s(r.pop()),s(r.join("&")),t}getOffset(e){if(e.line<1||e.character<this.firstBytePos)return;let t=16*(e.line-1);const s=e.character-this.firstBytePos;return e.character>=this.firstBytePos&&e.character<=this.lastBytePos?t+=Math.floor(s/3):e.character>=this.firstAsciiPos&&(t+=e.character-this.firstAsciiPos),t}getPosition(e,t=!1){const s=1+Math.floor(e/16);let n=e%16;return t?n+=this.firstAsciiPos:n=this.firstBytePos+3*n,new r.Position(s,n)}getRanges(e,t,s){const n=this.getPosition(e,s);let i=this.getPosition(t,s);i=new r.Position(i.line,i.character+(s?1:2));const o=[],a=s?this.firstAsciiPos:this.firstBytePos,c=s?this.lastAsciiPos:this.lastBytePos;for(let e=n.line;e<=i.line;++e){const t=new r.Position(e,e===n.line?n.character:a),s=new r.Position(e,e===i.line?i.character:c);o.push(new r.Range(t,s))}return o}handleSelection(e){const t=e.textEditor.document.lineCount;if(e.selections[0].start.line+1===t||e.selections[0].end.line+1===t)return void e.textEditor.setDecorations(this.smallDecorationType,[]);const s=this.getOffset(e.selections[0].start),r=this.getOffset(e.selections[0].end);if(void 0===s||void 0===r)return void e.textEditor.setDecorations(this.smallDecorationType,[]);let n=this.getRanges(s,r,!1);n=n.concat(this.getRanges(s,r,!0)),e.textEditor.setDecorations(this.smallDecorationType,n)}}},4751:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MemReadUtils=void 0;const n=s(1644);class i{static readMemoryChunks(e,t,s,n){const i=s.map((s=>new Promise(((r,i)=>{const o="0x"+s.base.toString(16);e.customRequest("read-memory",{address:o,length:s.length}).then((e=>{let i=s.base-t;const o=e.bytes;for(const e of o)n[i++]=e;r(!0)}),(e=>{let r=s.base-t;for(let e=0;e<s.length;e++)n[r++]=255;i(e)}))}))));return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){const s=yield Promise.all(i.map((e=>e.catch((e=>e))))),r=[];s.map((e=>{e instanceof Error&&r.push(e.message)})),0!==r.length?t(new Error(r.join("\n"))):e(!0)}))))}static readMemory(e,t,s,r){const o=n.AddressRangesUtils.splitIntoChunks([new n.AddrRange(t,s)],4096);return i.readMemoryChunks(e,t,o,r)}}t.MemReadUtils=i},8477:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PtyTerminal=t.magentaWrite=void 0;const r=s(2361),n=s(2037),i=s(6828),o=s(3200),a=s(530);t.magentaWrite=function(e,t){t&&t.write(a.BR_MAGENTA_FG+e+a.RESET)};const c={},h="@".charCodeAt(0);for(let e=h;e<="Z".charCodeAt(0);e++)c[String.fromCharCode(e)]=e-h;class l{static cursorUp(e=1){return e>0?a.CSI+e.toString()+"A":""}static cursorDown(e=1){return e>0?a.CSI+e.toString()+"B":""}static cursorForward(e=1){return e>0?a.CSI+e.toString()+"C":""}static cursorBack(e=1){return e>0?a.CSI+e.toString()+"D":""}static clearAll(){return a.CSI+"2J"+a.CSI+"3J"+a.CSI+";H"}static clearScreen(){return a.CSI+"2J"+a.CSI+";H"}static deleteChar(){return a.CSI+"P"}static deletePrevChar(){return l.cursorBack()+l.deleteChar()}static deleteCurrChar(){return l.deleteChar()}static killLineForward(){return a.CSI+"K"}static killLine(e=0){return l.cursorBack(e)+l.killLineForward()}static killEntireLine(){return a.CSI+"2K"}}class u extends r{constructor(e){super(),this.options=e,this.writeEmitter=new i.EventEmitter,this.didPrompt=!1,this.curLine="",this.cursorPos=1,this.terminal=null,this.disposing=!1,this.isPaused=!1,this.promptTimer=null,this.isReady=!1,this.pendingWrites=[],this.suspendPrompting=!1,this.pty={onDidWrite:this.writeEmitter.event,open:()=>{this.onOpen()},close:()=>{this.onClose()},handleInput:e=>{this.handleInput(e)}},this.terminal=i.window.createTerminal({name:this.options.name,pty:this.pty}),this.resetOptions(e),u.oldOnes[this.options.name]=this,i.window.onDidCloseTerminal((e=>{e!==this.terminal||this.disposing||this.onClose()}))}onOpen(){if(this.isReady=!0,this.pendingWrites.length){for(const e of this.pendingWrites)this.write(e);this.pendingWrites=[]}else this.doPrompt()}onClose(){this.emit("close"),super.removeAllListeners(),delete u.oldOnes[this.options.name],this.isReady=!1,this.terminal=null}static findExisting(e){return u.oldOnes[e]}pause(){this.isPaused=!0}resume(){this.isPaused=!1}resetOptions(e){if(this.options.name!==e.name)throw Error("Reset terminal: Terminal name cannot change once created");this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null),this.unPrompt(),this.options=e,this.curLine="",this.cursorPos=1,this.write("\n")}handleInput(e){if(!this.isPaused&&this.options.inputMode!==o.TerminalInputMode.DISABLED)try{switch(e){case"\r":this.handleReturn(e);break;case"":this.options.inputMode===o.TerminalInputMode.COOKED?this.killPrevChar():this.emit("data",e);break;default:this.handleSpecialChars(e)||this.handleOtherChars(e)}}catch(e){console.error(`MyPtyTerminal: handleInput: ${e}`)}}handleReturn(e){this.options.inputMode===o.TerminalInputMode.COOKED?this.emit("data",this.curLine+n.EOL):this.emit("data",e),this.options.inputMode!==o.TerminalInputMode.RAW&&(this.writeEmitter.fire("\r\n"),this.cursorPos=1,this.curLine="",this.didPrompt=!1,this.doPrompt())}handleOtherChars(e){const t=e.split(/\r\n|\r|\n/);t.length>1&&(this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null),this.didPrompt=!1,this.suspendPrompting=!0);for(let e=0;e<t.length;e++){const s=t[e],r=e===t.length-1;if(""===s&&r){this.suspendPrompting=!1,this.doPrompt();break}let n=this.curLine.slice(this.cursorPos-1);if(this.curLine=u.insertCharsAt(this.curLine,s,this.cursorPos-1),this.writeEmitter.fire(l.killLineForward()),r){n=this.curLine.slice(this.cursorPos-1),this.writeEmitter.fire(n);const e=n.length-s.length;this.writeEmitter.fire(l.cursorBack(e)),this.cursorPos+=s.length}else this.writeEmitter.fire(s),this.cursorPos+=s.length,this.curLine=n.length>0?this.curLine.slice(0,-n.length):this.curLine,this.handleReturn("\r"),n.length>0&&(this.writeEmitter.fire(n+l.cursorBack(n.length)),this.curLine=n)}this.suspendPrompting=!1}handleSpecialChars(e){if(this.options.inputMode!==o.TerminalInputMode.COOKED)return this.options.inputMode===o.TerminalInputMode.RAWECHO&&this.writeEmitter.fire(e),this.emit("data",e),!0;let t=e.charCodeAt(0);if(27===t){if("["!==e[1]||3!==e.length)return!1;switch(e[2]){case"A":case"B":break;case"C":this.moveRight();break;case"D":this.moveLeft();break;case"H":this.moveToBeg();break;case"E":this.moveToEnd()}return!0}if(1===e.length&&t<32){switch(e=String.fromCharCode(t+=64)){case"C":this.emit("break");break;case"D":"win32"!==n.platform()&&this.emit("eof");break;case"Z":"win32"===n.platform()&&this.emit("eof");break;case"A":this.moveToBeg();break;case"E":this.moveToEnd();break;case"F":this.moveRight();break;case"B":this.moveLeft();break;case"D":this.killCurrChar();break;case"H":this.killPrevChar();break;case"K":this.killLineFromCursor();break;case"U":this.killEntireLine();break;case"L":this.clearScreen()}return!0}return!1}clearScreen(){this.writeEmitter.fire(l.clearScreen()),this.curLine="",this.cursorPos=1,this.didPrompt=!1,this.doPrompt()}killEntireLine(){const e=this.cursorPos-1;this.writeEmitter.fire(l.killLine(e)),this.cursorPos=1,this.curLine=""}killLineFromCursor(){const e=this.curLine.length-this.cursorPos+1;e>1&&(this.writeEmitter.fire(l.killLineForward()),this.curLine=this.curLine.slice(this.cursorPos-1,e))}killCurrChar(){this.cursorPos<=this.curLine.length&&(this.writeEmitter.fire(l.deleteCurrChar()),this.curLine=u.removeCharAt(this.curLine,this.cursorPos-1))}moveToEnd(){const e=this.curLine.length-this.cursorPos+1;e>0&&(this.writeEmitter.fire(l.cursorForward(e)),this.cursorPos+=e)}moveToBeg(){const e=this.cursorPos-1;e>0&&(this.writeEmitter.fire(l.cursorBack(e)),this.cursorPos=1)}moveLeft(){this.cursorPos>1&&(this.writeEmitter.fire(l.cursorBack(1)),this.cursorPos--)}moveRight(){this.cursorPos<=this.curLine.length&&(this.writeEmitter.fire(l.cursorForward(1)),this.cursorPos++)}killPrevChar(){this.cursorPos>1&&(this.writeEmitter.fire(l.deletePrevChar()),this.cursorPos--,this.curLine=u.removeCharAt(this.curLine,this.cursorPos-1))}static removeCharAt(e,t){return 0===t?e.slice(1):t>=e.length-1?e.slice(0,-1):e.slice(0,t)+e.slice(t+1)}static insertCharsAt(e,t,s){return 0===s?t+e:s>=e.length?e+t:e.slice(0,s)+t+e.slice(s)}clearTerminalBuffer(){this.writeEmitter.fire(l.clearAll()),this.curLine="",this.cursorPos=1}writeWithHeader(e,t){if(!this.terminal)return;if(!t||!e)return void this.write(e);let s;s="string"==typeof e||e instanceof String?e:e.toString("utf8"),1===this.cursorPos&&this.write(t);let r=!1;for(;s.endsWith("\n");)s=s.substr(0,s.length-1),r=!0;s=s.replace(/\n/g,"\n"+t),this.write(r?s+"\n":s)}write(e){if(this.terminal)if(this.isReady)try{this.unPrompt(),"string"==typeof e||e instanceof String||(e=e.toString("utf8")),e=e.replace(/[\r]?\n/g,"\r\n"),this.writeEmitter.fire(e),e.endsWith("\n")?this.doPrompt():this.promptTimer&&this.promptTimer.kill()}catch(e){console.error(`MyPtyTerminal: write: ${e}`)}else this.pendingWrites.push(e)}doPrompt(){this.didPrompt||this.suspendPrompting||(null===this.promptTimer?this.promptTimer=new o.ResettableTimeout((()=>{const e=this.options.prompt+this.curLine;e.length&&this.writeEmitter.fire(e),this.cursorPos=this.curLine.length+1,this.didPrompt=!0}),100):this.promptTimer.reset())}unPrompt(){if(this.didPrompt){const e=this.options.prompt.length+this.cursorPos-1;this.writeEmitter.fire(l.killEntireLine()),this.writeEmitter.fire(l.cursorBack(e)),this.writeEmitter.fire(this.curLine),this.didPrompt=!1}}dispose(){this.terminal&&(super.removeAllListeners(),this.disposing=!0,this.terminal.dispose(),this.terminal=null,delete u.oldOnes[this.options.name]),this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null)}}t.PtyTerminal=u,u.oldOnes={}},2982:function(e,t){"use strict";var s,r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSVarHelper=t.RTOSBase=t.ShouldRetry=t.ColTypeEnum=t.traceVars=void 0,t.traceVars=!1,function(e){e[e.colTypeNormal=0]="colTypeNormal",e[e.colTypePercentage=1]="colTypePercentage",e[e.colTypeNumeric=2]="colTypeNumeric",e[e.colTypeLink=4]="colTypeLink",e[e.colTypeCollapse=8]="colTypeCollapse"}(s=t.ColTypeEnum||(t.ColTypeEnum={}));class n extends Error{constructor(e){super("Busy or Error for expr "+e)}}t.ShouldRetry=n;class i{constructor(e,t){this.session=e,this.name=t,this.exprValues=new Map,this.status="none",this.progStatus="started",this.className=this.name.replace(new RegExp("[^_a-zA-Z0-9-]","g"),"")}customRequest(e,s,n){return new Promise(((o,a)=>r(this,void 0,void 0,(function*(){const r=++i.reqCounter;t.traceVars&&console.log(`${r} RTOS: request -> ${n?"opt":""} ${e} ${JSON.stringify(s)}`);try{const n=yield this.session.customRequest(e,s);t.traceVars&&console.log(`${r} RTOS: result <- ${JSON.stringify(n)}`),o(n)}catch(e){t.traceVars&&console.log(`${r} RTOS: exception <- ${e}`),a(e)}}))))}onStopped(e){return this.progStatus="stopped",this.refresh(e)}onContinued(){this.progStatus="running"}onExited(){this.progStatus="exited"}evalForVarRef(e,t,s,n){return r(this,void 0,void 0,(function*(){if(void 0!==e)return e;if("stopped"!==this.progStatus)return;const r={frameId:t,expression:s,context:"hover"};try{const e=yield this.customRequest("evaluate",r,n);if(!e||!n&&0===e.variablesReference)throw new Error(`Failed to evaluate ${s}`);return e?e.variablesReference:0}catch(e){throw e}}))}evalForVarValue(e,t){return r(this,void 0,void 0,(function*(){const s={frameId:e,expression:t,context:"hover"};try{const e=yield this.customRequest("evaluate",s);return null==e?void 0:e.result}catch(e){throw e}}))}getVarChildren(e,t){return new Promise(((s,r)=>{if("stopped"!==this.progStatus)return r(new Error(`busy, failed to evaluate ${t}`));{const n={variablesReference:e};this.customRequest("variables",n).then((e=>{e&&e.variables&&e.variables.length?s(e.variables):r(Error(`Failed to evaluate variable ${n.variablesReference} ${t}`))}),(e=>{r(e)}))}}))}getVarChildrenObj(e,t){return new Promise(((s,r)=>{void 0!==e&&0!==e?this.getVarChildren(e,t).then((e=>{const t=o.varsToObj(e);s(t)}),(e=>{r(e)})):s(null)}))}getVarIfEmpty(e,s,i,c){return r(this,void 0,void 0,(function*(){try{if(void 0!==e||"stopped"!==this.progStatus)return e;const r=new o(i,this);if(!(yield r.tryInitOrUpdate(s,c))||a(r.value)&&"stopped"!==this.progStatus)throw new n(i);if(a(r.value)){if(!c)throw t.traceVars&&console.error(`1. Throwing exception for variable ${i}`),Error(`${i} not found`);return null}return r}catch(e){if(e instanceof n)throw e;if(c&&"stopped"===this.progStatus)return null;throw t.traceVars&&console.error(`2. Throwing exception for variable ${i}`),new Error(`Failed to evaluate ${i}: ${e.toString()}`)}}))}getExprVal(e,t){return r(this,void 0,void 0,(function*(){let s=this.exprValues.get(e);return s||(s=new o(e,this)),s.getValue(t)}))}getExprValChildren(e,t){return r(this,void 0,void 0,(function*(){let s=this.exprValues.get(e);return s||(s=new o(e,this)),s.getVarChildren(t)}))}getExprValChildrenObj(e,t){return new Promise(((s,n)=>r(this,void 0,void 0,(function*(){try{const r=yield this.getExprValChildren(e,t),n=o.varsToObj(r);s(n)}catch(e){s(e)}}))))}getHTMLCommon(e,t,r,n){const i=e=>{const r=t[e].colType;let n="";return r&s.colTypePercentage&&(n+=" centerAlign"),r&s.colTypeNumeric&&(n+=" rightAlign"),n},o=(e,s)=>{var r,n;let i=!1;void 0!==t[e].colSpaceFillThreshold&&s.length>0&&(s=s.padStart(t[e].colSpaceFillThreshold),i=!0);const o=(null===(r=t[e])||void 0===r?void 0:r.colGapBefore)||0;o>0&&(s=" ".repeat(o)+s,i=!0);const a=(null===(n=t[e])||void 0===n?void 0:n.colGapAfter)||0;return a>0&&(s+=" ".repeat(a),i=!0),i&&(s=`<div class="whitespacePreserve">${s}</div>`),s},a=e.map((e=>`${t[e].width}fr`)).join(" ");let c=`<vscode-data-grid class="${this.className}-grid threads-grid" grid-template-columns="${a}">\n`,h="",l="",u=1;for(const n of r){const r=n.display;if(!h){let s=1,r=!1;const n='  <vscode-data-grid-row row-type="header" class="threads-header-row">\n',a='    <vscode-data-grid-cell cell-type="columnheader" class="threads-header-cell';h=n;for(const n of e){const e=o(n,t[n].headerRow1);h+=`${a}${i(n)}" grid-column="${s}">${e}</vscode-data-grid-cell>\n`,r||(r=!!t[n].headerRow2),s++}if(h+="  </vscode-data-grid-row>\n",r){s=1,h+=n;for(const r of e){const e=o(r,t[r].headerRow2);h+=`${a}${i(r)}" grid-column="${s}">${e}</vscode-data-grid-cell>\n`,s++}h+="  </vscode-data-grid-row>\n"}c+=h}let a=1;const d=!0===n.running?" running":"",p=`thread-row-${u}`;c+=`  <vscode-data-grid-row class="${this.className}-row threads-row ${p}">\n`;for(const n of e){const e=r[n];let h=o(n,e.text);const u=n.toLowerCase();let f=d+i(n);if(t[n].colType&s.colTypePercentage){if(void 0!==e.value){const t=parseFloat(e.value);if(!isNaN(t)){const e=Math.floor(t).toString();f+=" backgroundPercent",l+=`.${this.className}-grid .${p} .threads-cell-${u}.backgroundPercent {\n  --rtosview-percentage-active: ${e}%;\n}\n\n`}}}else if(t[n].colType&s.colTypeLink);else if(t[n].colType&s.colTypeCollapse&&e.value&&Object.values(e.value).reduce(((e,t)=>e+t.length),0)>1){const t=Object.keys(e.value).map((t=>`${t}: ${e.value[t].join(", ")}`)).join("<br>");h=`<button class="collapse-button">${e.text}</button><div class="collapse">${t}</div>`}c+=`    <vscode-data-grid-cell class="${this.className}-cell threads-cell threads-cell-${u}${f}" grid-column="${a}">${h}</vscode-data-grid-cell>\n`,a++}c+="  </vscode-data-grid-row>\n",u++}c+="</vscode-data-grid>\n";let d=c;return n&&(d+=`<p>Data collected at ${n}</p>\n`),{html:d,css:l}}}t.RTOSBase=i,i.reqCounter=0;class o{constructor(e,t){this.expression=e,this.rtos=t}static varsToObj(e){const t={};for(const s of e)t[s.name+"-val"]=s.value,t[s.name+"-ref"]=s.variablesReference,t[s.name+"-exp"]=s.evaluateName;return t}tryInitOrUpdate(e,t){return r(this,void 0,void 0,(function*(){try{if("stopped"!==this.rtos.progStatus)return!1;const s={frameId:e,expression:this.expression,context:"hover"};this.value=void 0;const r=yield this.rtos.customRequest("evaluate",s,t);return this.value=r.result,this.varReference=r.variablesReference,!0}catch(e){const t=null==e?void 0:e.message;if(t&&("Busy"===t||t.includes("process is running")))return!1;throw e}}))}getValue(e){return new Promise(((t,s)=>r(this,void 0,void 0,(function*(){if("stopped"!==this.rtos.progStatus)return s(new Error(`busy, failed on ${this.expression}`));this.tryInitOrUpdate(e).then((e=>{e?t(this.value):s(new Error("failed to initialize/update"))}),(e=>{s(e)}))}))))}getVarChildren(e){return new Promise(((t,s)=>{if("stopped"!==this.rtos.progStatus)return s(new Error(`busy, failed on ${this.expression}`));this.getValue(e).then((e=>{if(!this.varReference||!e)return void s(Error(`Failed to get variable reference for ${this.expression}`));const r={variablesReference:this.varReference};this.rtos.customRequest("variables",r).then((e=>{e&&e.variables&&e.variables.length?t(e.variables):s(Error(`Failed to evaluate variable ${this.expression} ${r.variablesReference}`))}),(e=>{s(e)}))}),(e=>{s(e)}))}))}getVarChildrenObj(e){return new Promise(((t,s)=>{this.getVarChildren(e).then((e=>{const s=o.varsToObj(e);t(s)}),(e=>{s(e)}))}))}}function a(e){return null==e}t.RTOSVarHelper=o},4162:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSEmbOS=void 0;const n=s(2982),i=s(2942),o=s(3200);var a;!function(e){e[e.ID_Address=0]="ID_Address",e[e.TaskName=1]="TaskName",e[e.Status=2]="Status",e[e.Priority=3]="Priority",e[e.StackPercent=4]="StackPercent",e[e.StackPeakPercent=5]="StackPeakPercent"}(a||(a={}));const c={};c[a[a.ID_Address]]={width:2,headerRow1:"",headerRow2:"ID / Address"},c[a[a.TaskName]]={width:4,headerRow1:"",headerRow2:"Name",colGapBefore:1},c[a[a.Status]]={width:4,headerRow1:"Thread",headerRow2:"Status",colType:n.ColTypeEnum.colTypeCollapse},c[a[a.Priority]]={width:2,headerRow1:"Priority",headerRow2:"cur,base",colType:n.ColTypeEnum.colTypeNumeric,colGapAfter:1},c[a[a.StackPercent]]={width:4,headerRow1:"Stack Usage",headerRow2:"% (Used B / Size B)",colType:n.ColTypeEnum.colTypePercentage},c[a[a.StackPeakPercent]]={width:4,headerRow1:"Stack Peak Usage",headerRow2:"% (Peak B / Size B)",colType:n.ColTypeEnum.colTypePercentage};const h=Object.keys(c);class l extends n.RTOSBase{constructor(e){super(e,"embOS"),this.session=e,this.foundThreads=[],this.finalThreads=[],this.maxThreads=1024,this.stackPattern=0,this.stackIncrements=-1,this.helpHtml=void 0,this.lastValidHtmlContent={html:"",css:""},e.configuration.rtosViewConfig&&(e.configuration.rtosViewConfig.stackPattern&&(this.stackPattern=parseInt(e.configuration.rtosViewConfig.stackPattern)),e.configuration.rtosViewConfig.stackGrowth&&(this.stackIncrements=parseInt(e.configuration.rtosViewConfig.stackGrowth)))}tryDetect(e){return r(this,void 0,void 0,(function*(){this.progStatus="stopped";try{return"none"===this.status&&(this.OSGlobal=yield this.getVarIfEmpty(this.OSGlobal,e,"OS_Global",!1),this.OSGlobalpTask=yield this.getVarIfEmpty(this.OSGlobalpTask,e,"OS_Global.pTask",!1),this.OSGlobalpObjNameRoot=yield this.getVarIfEmpty(this.OSGlobalpObjNameRoot,e,"OS_Global.pObjNameRoot",!0),this.status="initialized"),this}catch(e){return e instanceof n.ShouldRetry?console.error(e.message):(this.status="failed",this.failedWhy=e),this}}))}createHmlHelp(e,t){if(void 0===this.helpHtml){this.helpHtml="";try{let s="";function r(e){return`<strong>${e}</strong>`}t["sName-val"]||(s+=`Thread name missing: Enable ${r("OS_SUPPORT_TRACKNAME")} or use library mode that enables it and\n                    use ${r("sName")} parameter on task creation in FW<br><br>`),e.stackInfo.stackSize||(s+=`Stack Size & Peak missing: Enable ${r("OS_SUPPORT_STACKCHECK")} or use library mode that enables it<br><br>`),s&&(s+="Note: Make sure you consider the performance/resources impact for any changes to your FW.<br>\n",this.helpHtml=`<button class="help-button">Hints to get more out of the embOS RTOS View</button>\n<div class="help"><p>\n${s}\n</p></div>\n`)}catch(n){console.log(n)}}}refresh(e){return new Promise(((t,s)=>{if("stopped"!==this.progStatus)return void t();const n=new o.HrTimer;this.stale=!0,this.timeInfo=(new Date).toISOString(),this.taskCount=Number.MAX_SAFE_INTEGER,this.foundThreads=[],this.OSGlobal.getVarChildrenObj(e).then((s=>r(this,void 0,void 0,(function*(){try{this.OSGlobalVal=s;let r="0";if(r=this.OSGlobalVal.hasOwnProperty("IsRunning-val")?this.OSGlobalVal["IsRunning-val"]:"1",void 0===r||isNaN(r)||0===parseInt(r))this.finalThreads=[];else{const t=this.OSGlobalVal["pTask-val"];if(void 0!==t&&0!==parseInt(t)){this.OSGlobalVal["pCurrentTask-val"]?this.pCurrentTaskVal=parseInt(this.OSGlobalVal["pCurrentTask-val"]):this.pCurrentTaskVal=Number.MAX_SAFE_INTEGER;const t=yield this.getObjectNameEntries(e);yield this.getThreadInfo(this.OSGlobalpTask,t,e),this.foundThreads.sort(((e,t)=>parseInt(e.display[h[a.ID_Address]].text)-parseInt(t.display[h[a.ID_Address]].text))),this.finalThreads=[...this.foundThreads]}else this.finalThreads=[]}this.stale=!1,this.timeInfo+=" in "+n.deltaMs()+" ms",t()}catch(e){t(),console.error("RTOSEMBOS.refresh() failed: ",e)}}))),(e=>{t(),console.error("RTOSEMBOS.refresh() failed: ",e)}))}))}getThreadInfo(e,t,s){return new Promise(((n,o)=>{e&&e.varReference?"stopped"===this.progStatus?e.getVarChildrenObj(s).then((s=>r(this,void 0,void 0,(function*(){try{let r=s,o=parseInt(e.value),c=1;do{let e="???";if(r.hasOwnProperty("sName-val")){const t=r["sName-val"].match(/"([^*]*)"$/);e=t?t[1]:r["sName-val"]}else if(r.hasOwnProperty("Name-val")){const t=r["Name-val"].match(/"([^*]*)"$/);e=t?t[1]:r["Name-val"]}const s=o===this.pCurrentTaskVal,n=yield this.analyzeTaskState(r,t),l=yield this.getStackInfo(r,this.stackPattern),u={},d=(e,t,s)=>{u[h[e]]={text:t,value:s}};d(a.ID_Address,i.hexFormat(o)),d(a.TaskName,e),d(a.Status,s?"RUNNING":n.describe(),n.fullData());const p=e=>parseInt(e).toString(),f=`${p(r["Priority-val"])},${p(r["BasePrio-val"])}`;if(d(a.Priority,f),void 0!==l.stackUsed&&void 0!==l.stackSize){const e=Math.round(l.stackUsed/l.stackSize*100),t=`${e} % (${l.stackUsed} / ${l.stackSize})`;d(a.StackPercent,t,e)}else d(a.StackPercent,"?? %");if(void 0!==l.stackPeak&&void 0!==l.stackSize){const e=Math.round(l.stackPeak/l.stackSize*100),t=`${e.toString().padStart(3)} % (${l.stackPeak} / ${l.stackSize})`;d(a.StackPeakPercent,t,e)}else d(a.StackPeakPercent,"?? %");const m={display:u,stackInfo:l,running:s};if(this.foundThreads.push(m),this.createHmlHelp(m,r),o=parseInt(r["pNext-val"]),0!==o&&(r=yield this.getVarChildrenObj(r["pNext-ref"],"pNext"),c++),c>this.maxThreads){console.error(`Exceeded maximum number of allowed threads (${this.maxThreads})`);break}}while(0!==o);this.taskCount=c,n()}catch(e){console.log("RTOSEMBOS.getThreadInfo() error",e)}}))),(e=>{o(e)})):o(new Error("Busy")):n()}))}analyzeTaskState(e,t){return r(this,void 0,void 0,(function*(){const s=parseInt(e["Stat-val"]),r=s&u;if(0!==r)return new b(r);let n=Number.MAX_SAFE_INTEGER,i=!1;s&d&&(n=parseInt(e["Timeout-val"]),i=!0);const o=s&p;switch(o){case f.READY:return n?new y(n):new g;case f.TASK_EVENT:const r=new v;if(r.addEventType(o),e["EventMask-val"]){const t=parseInt(e["EventMask-val"]),o={address:t,eventType:s,name:`mask ${t} - set ${parseInt(e["Events-val"])}`};i&&(o.timeOut=n),r.addEvent(o)}return r;default:{const r=new v;if(r.addEventType(o),e["pWaitList-val"]&&0!==parseInt(e["pWaitList-val"])){const o=yield this.getVarChildrenObj(e["pWaitList-ref"],"pWaitList"),a=parseInt(o["pWaitObj-val"]),c={address:a,eventType:s};t.has(a)&&(c.name=t.get(a)),i&&(c.timeOut=n),r.addEvent(c)}return r}}}))}getStackInfo(e,t){return r(this,void 0,void 0,(function*(){const s=e["pStack-val"],r=e["StackSize-val"];let n;n=e.hasOwnProperty("pStackBase-val")?e["pStackBase-val"]:e["pStackBot-val"];let o=0;o=n&&r?this.stackIncrements<0?parseInt(n)+parseInt(r):parseInt(n)-parseInt(r):parseInt(s);const a={stackStart:o,stackTop:parseInt(s)};if(n&&r){if(a.stackEnd=parseInt(n),a.stackSize=parseInt(r),this.stackIncrements<0){const e=a.stackStart-a.stackTop;a.stackFree=a.stackSize-e,a.stackUsed=e}else{const e=a.stackTop-a.stackStart;a.stackFree=e,a.stackUsed=a.stackSize-e}const e={memoryReference:i.hexFormat(Math.min(a.stackTop,a.stackEnd)),count:a.stackFree};try{const s=yield this.session.customRequest("readMemory",e),r=Buffer.from(s.data,"base64");a.bytes=new Uint8Array(r);let n=this.stackIncrements<0?0:a.bytes.length-1;const i=this.stackIncrements<0?a.bytes.length:-1;let o=0;for(;n!==i&&a.bytes[n]===t;)n-=this.stackIncrements,o++;a.stackPeak=a.stackSize-o}catch(e){console.log(e)}}return a}))}getObjectNameEntries(e){return r(this,void 0,void 0,(function*(){const t=new Map;if(null!==this.OSGlobalpObjNameRoot&&(yield this.OSGlobalpObjNameRoot.getValue(e),0!==parseInt(this.OSGlobalpObjNameRoot.value))){let s=yield this.OSGlobalpObjNameRoot.getVarChildrenObj(e);for(;s;){const e=parseInt(s["pOSObjID-val"]);if(!e||0===e)break;const r=s["sName-val"].match(/"([^*]*)"$/),n=r?r[1]:s["sName-val"];if(n&&!t.has(e)&&t.set(e,n),0===parseInt(s["pNext-val"]))break;s=yield this.getVarChildrenObj(s["pNext-ref"],"pNext")}}return t}))}getHTML(){const e={html:"",css:""};let t="";if("none"===this.status)return e.html="<p>RTOS not yet fully initialized. Will occur next time program pauses</p>\n",e;if(this.stale){const s=this.lastValidHtmlContent;return this.taskCount===Number.MAX_SAFE_INTEGER?(t=' Could not read any task from "OS_Global.pTask". Perhaps program is busy or did not stop long enough',s.html="",s.css=""):this.taskCount>this.maxThreads?(t=` embOS variable "OS_Global.pTask" holds ${this.taskCount} tasks which seems invalid for us`,s.html="",s.css=""):s.html&&(t=" Following info from last query may be stale."),e.html=`<p>Unable to collect full RTOS information.${t}</p>\n`+s.html,e.css=s.css,e}if(this.taskCount!==Number.MAX_SAFE_INTEGER&&this.finalThreads.length!==this.taskCount)t+=`<p>Expecting ${this.taskCount} threads, found ${this.finalThreads.length}. Thread data may be unreliable<p>\n`;else if(0===this.finalThreads.length)return e.html=`<p>No ${this.name} threads detected, perhaps RTOS not yet initialized or tasks yet to be created!</p>\n`,e;const s=this.getHTMLCommon(h,c,this.finalThreads,this.timeInfo);return e.html=t+s.html+(this.helpHtml||""),e.css=s.css,this.lastValidHtmlContent=e,this.lastValidHtmlContent}}t.RTOSEmbOS=l;const u=3,d=4,p=248;var f;!function(e){e[e.READY=0]="READY",e[e.TASK_EVENT=8]="TASK_EVENT",e[e.MUTEX=16]="MUTEX",e[e.UNKNOWN=24]="UNKNOWN",e[e.SEMAPHORE=32]="SEMAPHORE",e[e.MEMPOOL=40]="MEMPOOL",e[e.QUEUE_NOT_EMPTY=48]="QUEUE_NOT_EMPTY",e[e.MAILBOX_NOT_FULL=56]="MAILBOX_NOT_FULL",e[e.MAILBOX_NOT_EMPTY=64]="MAILBOX_NOT_EMPTY",e[e.EVENT_OBJECT=72]="EVENT_OBJECT",e[e.QUEUE_NOT_FULL=80]="QUEUE_NOT_FULL"}(f||(f={}));class m{}class g extends m{describe(){return"READY"}fullData(){return null}}class y extends m{constructor(e){super(),this.delayTicks=e}describe(){return`DELAYED by ${this.delayTicks}`}fullData(){return null}}class b extends m{constructor(e){super(),this.suspendCount=e}describe(){return`SUSPENDED (count: ${this.suspendCount})`}fullData(){return null}}class v extends m{constructor(){super(),this.pendingInfo=new Map}addEvent(e){this.addEventType(e.eventType),this.pendingInfo.get(e.eventType).push(e)}addEventType(e){this.pendingInfo.has(e)||this.pendingInfo.set(e,[])}describe(){if([...this.pendingInfo.values()].reduce(((e,t)=>e+t.length),0)<=1){let e=null;for(const t of this.pendingInfo.values())t.length>0&&(e=t[0]);if(e){const t=f[e.eventType]?f[e.eventType]:"Unknown",s=e.timeOut?` with timeout in ${e.timeOut}`:"";return`PEND ${t}: ${w(e)}${s}`}return"PEND Unknown"}return"PEND MULTI"}fullData(){const e={},t=[...this.pendingInfo.keys()];t.sort();for(const s of t){e[f[s]]=[];for(const t of this.pendingInfo.get(s))e[f[s]].push(w(t))}return e}}function w(e){return e.name&&"?"!==e.name?e.name:`0x${e.address.toString(16)}`}},4883:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSFreeRTOS=void 0;const n=s(2982),i=s(2942),o=s(3200);var a;!function(e){e[e.ID=0]="ID",e[e.Address=1]="Address",e[e.TaskName=2]="TaskName",e[e.Status=3]="Status",e[e.Priority=4]="Priority",e[e.StackStart=5]="StackStart",e[e.StackTop=6]="StackTop",e[e.StackEnd=7]="StackEnd",e[e.StackSize=8]="StackSize",e[e.StackUsed=9]="StackUsed",e[e.StackFree=10]="StackFree",e[e.StackPeak=11]="StackPeak",e[e.Runtime=12]="Runtime"}(a||(a={}));const c=n.ColTypeEnum.colTypeNumeric,h={};h[a[a.ID]]={width:1,headerRow1:"",headerRow2:"ID",colType:c},h[a[a.Address]]={width:3,headerRow1:"Thread",headerRow2:"Address",colGapBefore:1},h[a[a.TaskName]]={width:4,headerRow1:"",headerRow2:"Task Name"},h[a[a.Status]]={width:3,headerRow1:"",headerRow2:"Status"},h[a[a.Priority]]={width:1.5,headerRow1:"Prio",headerRow2:"rity",colType:c},h[a[a.StackStart]]={width:3,headerRow1:"Stack",headerRow2:"Start",colType:n.ColTypeEnum.colTypeLink,colGapBefore:1},h[a[a.StackTop]]={width:3,headerRow1:"Stack",headerRow2:"Top"},h[a[a.StackEnd]]={width:3,headerRow1:"Stack",headerRow2:"End"},h[a[a.StackSize]]={width:2,headerRow1:"Stack",headerRow2:"Size",colType:c},h[a[a.StackUsed]]={width:2,headerRow1:"Stack",headerRow2:"Used",colType:c},h[a[a.StackFree]]={width:2,headerRow1:"Stack",headerRow2:"Free",colType:c},h[a[a.StackPeak]]={width:2,headerRow1:"Stack",headerRow2:"Peak",colType:c},h[a[a.Runtime]]={width:2,headerRow1:"",headerRow2:"Runtime",colType:c};const l=Object.keys(h);class u extends n.RTOSBase{constructor(e){super(e,"FreeRTOS"),this.session=e,this.foundThreads=[],this.finalThreads=[],this.maxThreads=1024,this.helpHtml=void 0,this.stackIncrements=-1,this.lastValidHtmlContent={html:"",css:""}}tryDetect(e){return r(this,void 0,void 0,(function*(){this.progStatus="stopped";try{return"none"===this.status&&(this.uxCurrentNumberOfTasks=yield this.getVarIfEmpty(this.uxCurrentNumberOfTasks,e,"uxCurrentNumberOfTasks"),this.pxReadyTasksLists=yield this.getVarIfEmpty(this.pxReadyTasksLists,e,"pxReadyTasksLists"),this.xDelayedTaskList1=yield this.getVarIfEmpty(this.xDelayedTaskList1,e,"xDelayedTaskList1"),this.xDelayedTaskList2=yield this.getVarIfEmpty(this.xDelayedTaskList2,e,"xDelayedTaskList2"),this.xPendingReadyList=yield this.getVarIfEmpty(this.xPendingReadyList,e,"xPendingReadyList"),this.pxCurrentTCB=yield this.getVarIfEmpty(this.pxCurrentTCB,e,"pxCurrentTCB"),this.xSuspendedTaskList=yield this.getVarIfEmpty(this.xSuspendedTaskList,e,"xSuspendedTaskList",!0),this.xTasksWaitingTermination=yield this.getVarIfEmpty(this.xTasksWaitingTermination,e,"xTasksWaitingTermination",!0),this.ulTotalRunTime=yield this.getVarIfEmpty(this.ulTotalRunTime,e,"ulTotalRunTime",!0),this.status="initialized"),this}catch(e){return e instanceof n.ShouldRetry?console.error(e.message):(this.status="failed",this.failedWhy=e),this}}))}createHmlHelp(e,t){if(void 0===this.helpHtml){this.helpHtml="";try{let s="";function r(e){return`<strong>${e}</strong>`}t["uxTCBNumber-val"]||(s+=`Thread ID missing......: Enable macro ${r("configUSE_TRACE_FACILITY")} in FW<br>`),e.stackInfo.stackEnd||(s+=`Stack End missing......: Enable macro ${r("configRECORD_STACK_HIGH_ADDRESS")} in FW<br>`),"[0]"!==t["pcTaskName-val"]&&"[1]"!==t["pcTaskName-val"]||(s+=`Thread Name missing....: Set macro ${r("configMAX_TASK_NAME_LEN")} to something greater than 1 in FW<br>`),this.ulTotalRunTime||(s+=`<br>Missing Runtime stats..:<br>\n                    /* To get runtime stats, modify the following macro in FreeRTOSConfig.h */<br>\n                    #define ${r("configGENERATE_RUN_TIME_STATS")}             1 /* 1: generate runtime statistics; 0: no runtime statistics */<br>\n                    /* Also, add the following two macros to provide a high speed counter -- something at least 10x faster than<br>\n                    ** your RTOS scheduler tick. One strategy could be to use a HW counter and sample its current value when needed<br>\n                    */<br>\n                    #define ${r("portCONFIGURE_TIMER_FOR_RUN_TIME_STATS()")} /* Define this to initialize your timer */<br>\n                    #define ${r("portGET_RUN_TIME_COUNTER_VALUE()")}${"&nbsp".repeat(9)}/* Define this to sample the counter */<br>\n                    `),s&&(s+="<br>Note: Make sure you consider the performance/resources impact for any changes to your FW.<br>\n",s=`<button class="help-button">Hints to get more out of the FreeRTOS viewer</button>\n<div class="help"><p>\n${s}\n</p></div>\n`,this.helpHtml=s)}catch(n){console.log(n)}}}updateCurrentThreadAddr(e){return new Promise(((t,s)=>{this.pxCurrentTCB.getValue(e).then((e=>{this.curThreadAddr=parseInt(e),t()}),(e=>{s(e)}))}))}updateTotalRuntime(e){return new Promise(((t,s)=>{this.ulTotalRunTime?this.ulTotalRunTime.getValue(e).then((e=>{this.ulTotalRunTimeVal=parseInt(e),t()}),(e=>{s(e)})):t()}))}refresh(e){return new Promise(((t,s)=>{if("stopped"!==this.progStatus)return void t();const n=new o.HrTimer;this.stale=!0,this.timeInfo=(new Date).toISOString(),this.uxCurrentNumberOfTasksVal=Number.MAX_SAFE_INTEGER,this.foundThreads=[],this.uxCurrentNumberOfTasks.getValue(e).then((s=>r(this,void 0,void 0,(function*(){try{if(this.uxCurrentNumberOfTasksVal=s?parseInt(s):Number.MAX_SAFE_INTEGER,this.uxCurrentNumberOfTasksVal>0&&this.uxCurrentNumberOfTasksVal<=this.maxThreads){let t=[];const s=yield this.pxReadyTasksLists.getVarChildren(e);for(const r of s)t.push(this.getThreadInfo(r.variablesReference,"READY",e));t.push(this.updateCurrentThreadAddr(e)),t.push(this.updateTotalRuntime(e)),yield Promise.all(t),t=[],t.push(this.getThreadInfo(this.xDelayedTaskList1,"BLOCKED",e)),t.push(this.getThreadInfo(this.xDelayedTaskList2,"BLOCKED",e)),t.push(this.getThreadInfo(this.xPendingReadyList,"PENDING",e)),yield Promise.all(t),t=[],t.push(this.getThreadInfo(this.xSuspendedTaskList,"SUSPENDED",e)),t.push(this.getThreadInfo(this.xTasksWaitingTermination,"TERMINATED",e)),yield Promise.all(t),t=[],this.foundThreads.length>0&&("??"!==this.foundThreads[0].display.ID.text?this.foundThreads.sort(((e,t)=>parseInt(e.display.ID.text)-parseInt(t.display.ID.text))):this.foundThreads.sort(((e,t)=>parseInt(e.display.Address.text)-parseInt(t.display.Address.text)))),this.finalThreads=[...this.foundThreads]}else this.finalThreads=[];this.stale=!1,this.timeInfo+=" in "+n.deltaMs()+" ms",t()}catch(e){t(),console.error("FreeRTOS.refresh() failed: ",e)}}))),(e=>{t(),console.error("FreeRTOS.refresh() failed: ",e)}))}))}getThreadInfo(e,t,s){return new Promise(((n,o)=>{if(!e||"number"!=typeof e&&!e.varReference||this.foundThreads.length>=this.uxCurrentNumberOfTasksVal)return void n();if("stopped"!==this.progStatus)return void o(new Error("Busy"));let c;c="number"!=typeof e?e.getVarChildrenObj(s):this.getVarChildrenObj(e,"task-list"),c.then((e=>r(this,void 0,void 0,(function*(){const r=parseInt(e["uxNumberOfItems-val"]),o=e["xListEnd-ref"];if(r<=0||!o)n();else try{let e=(yield this.getVarChildrenObj(o,"xListEnd"))["pxPrevious-ref"];for(let n=0;n<r;n++){const r=yield this.getVarChildrenObj(e,"pxPrevious"),n=parseInt(r["pvOwner-val"]),o=yield this.getExprValChildrenObj(`((TCB_t*)${i.hexFormat(n)})`,s),c=n===this.curThreadAddr,h=yield this.getExprVal("(char *)"+o["pcTaskName-exp"],s),u=h.match(/"([^*]*)"$/),d=u?u[1]:h,p=yield this.getStackInfo(o,165),f={},m=(e,t,s)=>{f[l[e]]={text:t,value:s}};m(a.ID,o["uxTCBNumber-val"]||"??"),m(a.Address,i.hexFormat(n)),m(a.TaskName,d),m(a.Status,c?"RUNNING":t),m(a.StackStart,i.hexFormat(p.stackStart)),m(a.StackTop,i.hexFormat(p.stackTop)),m(a.StackEnd,p.stackEnd?i.hexFormat(p.stackEnd):"0x????????"),o["uxBasePriority-val"]?m(a.Priority,`${o["uxPriority-val"]},${o["uxBasePriority-val"]}`):m(a.Priority,`${o["uxPriority-val"]}`);const g=e=>void 0===e?"???":e.toString();if(m(a.StackSize,g(p.stackSize)),m(a.StackUsed,g(p.stackUsed)),m(a.StackFree,g(p.stackFree)),m(a.StackPeak,g(p.stackPeak)),o["ulRunTimeCounter-val"]&&this.ulTotalRunTimeVal){const e=(parseInt(o["ulRunTimeCounter-val"])/this.ulTotalRunTimeVal*100).toFixed(2);m(a.Runtime,e.padStart(5,"0")+"%")}else m(a.Runtime,"??.??%");const y={display:f,stackInfo:p,running:c};this.foundThreads.push(y),this.createHmlHelp(y,o),e=r["pxPrevious-ref"]}n()}catch(e){console.log("FreeRTOS read thread info error",e)}}))),(e=>{o(e)}))}))}getStackInfo(e,t){return r(this,void 0,void 0,(function*(){const s=e["pxStack-val"],r=e["pxTopOfStack-val"],n=e["pxEndOfStack-val"],o={stackStart:parseInt(s),stackTop:parseInt(r)},a=Math.abs(o.stackTop-o.stackStart);if(this.stackIncrements<0?o.stackFree=a:o.stackUsed=a,n){o.stackEnd=parseInt(n),o.stackSize=Math.abs(o.stackStart-o.stackEnd),this.stackIncrements<0?o.stackUsed=o.stackSize-a:o.stackFree=o.stackSize-a;const e={memoryReference:i.hexFormat(Math.min(o.stackStart,o.stackEnd)),count:o.stackSize};try{const s=yield this.session.customRequest("readMemory",e),r=Buffer.from(s.data,"base64");o.bytes=new Uint8Array(r);let n=this.stackIncrements<0?0:o.bytes.length-1;const i=this.stackIncrements<0?o.bytes.length:-1;let a=0;for(;n!==i&&o.bytes[n]===t;)n-=this.stackIncrements,a++;o.stackPeak=o.stackSize-a}catch(e){console.log(e)}}return o}))}getHTML(){const e={html:"",css:""};let t="";if("none"===this.status)return e.html="<p>RTOS not yet fully initialized. Will occur next time program pauses</p>\n",e;if(this.stale){const s=this.lastValidHtmlContent;return this.uxCurrentNumberOfTasksVal===Number.MAX_SAFE_INTEGER?(t=' Could not read "uxCurrentNumberOfTasks". Perhaps program is busy or did not stop long enough',s.html="",s.css=""):this.uxCurrentNumberOfTasksVal>this.maxThreads?(t=` FreeRTOS variable uxCurrentNumberOfTasks = ${this.uxCurrentNumberOfTasksVal} seems invalid`,s.html="",s.css=""):s.html&&(t=" Following info from last query may be stale."),e.html=`<p>Unable to collect full RTOS information.${t}</p>\n`+s.html,e.css=s.css,e}if(this.uxCurrentNumberOfTasksVal!==Number.MAX_SAFE_INTEGER&&this.finalThreads.length!==this.uxCurrentNumberOfTasksVal)t+=`<p>Expecting ${this.uxCurrentNumberOfTasksVal} threads, found ${this.finalThreads.length}. Thread data may be unreliable<p>\n`;else if(0===this.finalThreads.length)return e.html=`<p>No ${this.name} threads detected, perhaps RTOS not yet initialized or tasks yet to be created!</p>\n`,e;const s=this.getHTMLCommon(l,h,this.finalThreads,this.timeInfo);return e.html=t+s.html+(this.helpHtml||""),e.css=s.css,this.lastValidHtmlContent=e,this.lastValidHtmlContent}}t.RTOSFreeRTOS=u},3783:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSUCOS2=void 0;const n=s(2982),i=s(2942),o=s(3200);var a;!function(e){e[e.ID=0]="ID",e[e.Address=1]="Address",e[e.TaskName=2]="TaskName",e[e.Status=3]="Status",e[e.Priority=4]="Priority",e[e.StackPercent=5]="StackPercent",e[e.StackPeakPercent=6]="StackPeakPercent"}(a||(a={}));const c={};c[a[a.ID]]={width:1,headerRow1:"",headerRow2:"ID",colType:n.ColTypeEnum.colTypeNumeric},c[a[a.Address]]={width:2,headerRow1:"",headerRow2:"Address",colGapBefore:1},c[a[a.TaskName]]={width:4,headerRow1:"",headerRow2:"Name",colGapBefore:1},c[a[a.Status]]={width:4,headerRow1:"Thread",headerRow2:"Status",colType:n.ColTypeEnum.colTypeCollapse},c[a[a.Priority]]={width:1,headerRow1:"Prio",headerRow2:"rity",colType:n.ColTypeEnum.colTypeNumeric,colGapAfter:1},c[a[a.StackPercent]]={width:4,headerRow1:"Stack Usage",headerRow2:"% (Used B / Size B)",colType:n.ColTypeEnum.colTypePercentage},c[a[a.StackPeakPercent]]={width:4,headerRow1:"Stack Peak Usage",headerRow2:"% (Peak B / Size B)",colType:n.ColTypeEnum.colTypePercentage};const h=Object.keys(c);class l extends n.RTOSBase{constructor(e){super(e,"uC/OS-II"),this.session=e,this.stackEntrySize=0,this.foundThreads=[],this.finalThreads=[],this.maxThreads=1024,this.stackPattern=0,this.stackIncrements=-1,this.helpHtml=void 0,this.lastValidHtmlContent={html:"",css:""},e.configuration.rtosViewConfig&&(e.configuration.rtosViewConfig.stackPattern&&(this.stackPattern=parseInt(e.configuration.rtosViewConfig.stackPattern)),e.configuration.rtosViewConfig.stackGrowth&&(this.stackIncrements=parseInt(e.configuration.rtosViewConfig.stackGrowth)))}tryDetect(e){return r(this,void 0,void 0,(function*(){this.progStatus="stopped";try{return"none"===this.status&&(this.OSRunning=yield this.getVarIfEmpty(this.OSRunning,e,"OSRunning",!1),this.OSTaskCtr=yield this.getVarIfEmpty(this.OSTaskCtr,e,"OSTaskCtr",!1),this.OSTCBList=yield this.getVarIfEmpty(this.OSTCBList,e,"OSTCBList",!1),this.OSTCBCur=yield this.getVarIfEmpty(this.OSTCBCur,e,"OSTCBCur",!1),this.OSFlagTbl=yield this.getVarIfEmpty(this.OSFlagTbl,e,"OSFlagTbl",!0),this.status="initialized"),this}catch(e){return e instanceof n.ShouldRetry?console.error(e.message):(this.status="failed",this.failedWhy=e),this}}))}createHmlHelp(e,t){if(void 0===this.helpHtml){this.helpHtml="";try{let s="";function r(e){return`<strong>${e}</strong>`}t["OSTCBTaskName-val"]||(s+=`Thread name missing: Enable macro ${r("OS_TASK_NAME_EN")} and use ${r("OSTaskNameSet")} in FW<br><br>`),t["OSTCBId-val"]&&e.stackInfo.stackSize||(s+=`Thread ID & Stack Size & Peak missing: Enable macro ${r("OS_TASK_CREATE_EXT_EN")} anduse ${r("OSTaskCreateExt")} in FW<br><br>`),s&&(s+="Note: Make sure you consider the performance/resources impact for any changes to your FW.<br>\n",this.helpHtml=`<button class="help-button">Hints to get more out of the uC/OS-II RTOS View</button>\n<div class="help"><p>\n${s}\n</p></div>\n`)}catch(n){console.log(n)}}}refresh(e){return new Promise(((t,s)=>{if("stopped"!==this.progStatus)return void t();const n=new o.HrTimer;this.stale=!0,this.timeInfo=(new Date).toISOString(),this.OSTaskCtrVal=Number.MAX_SAFE_INTEGER,this.OSRunningVal=Number.MAX_SAFE_INTEGER,this.foundThreads=[],this.OSRunning.getValue(e).then((s=>r(this,void 0,void 0,(function*(){try{if(this.OSRunningVal=s?parseInt(s):0,0!==this.OSRunningVal){const t=yield this.OSTaskCtr.getValue(e);if(this.OSTaskCtrVal=t?parseInt(t):Number.MAX_SAFE_INTEGER,this.OSTaskCtrVal>0&&this.OSTaskCtrVal<=this.maxThreads){const t=yield this.OSTCBList.getValue(e);if(t&&0!==parseInt(t)){if(0===this.stackEntrySize){const t=yield this.getExprVal("sizeof(OS_STK)",e);this.stackEntrySize=parseInt(t)}const t=this.OSFlagTbl?yield this.OSFlagTbl.getVarChildren(e):[],s=yield this.getPendingFlagGroupsForTasks(t,e),r=yield this.OSTCBCur.getValue(e);this.OSTCBCurVal=r?parseInt(r):Number.MAX_SAFE_INTEGER,yield this.getThreadInfo(this.OSTCBList,s,e),"???"!==this.foundThreads[0].display.ID.text?this.foundThreads.sort(((e,t)=>parseInt(e.display.ID.text)-parseInt(t.display.ID.text))):this.foundThreads.sort(((e,t)=>parseInt(e.display.Address.text)-parseInt(t.display.Address.text)))}this.finalThreads=[...this.foundThreads]}else this.finalThreads=[]}else this.finalThreads=[];this.stale=!1,this.timeInfo+=" in "+n.deltaMs()+" ms",t()}catch(e){t(),console.error("RTOSUCOS2.refresh() failed: ",e)}}))),(e=>{t(),console.error("RTOSUCOS2.refresh() failed: ",e)}))}))}getThreadInfo(e,t,s){return new Promise(((n,o)=>{!e||!e.varReference||this.foundThreads.length>=this.OSTaskCtrVal?n():"stopped"===this.progStatus?e.getVarChildrenObj(s).then((o=>r(this,void 0,void 0,(function*(){try{let r=o,c=parseInt(e.value),l=1;do{const e=r["OSTCBId-val"];let n="???";if(r["OSTCBTaskName-exp"]){const e=yield this.getExprVal("(char *)"+r["OSTCBTaskName-exp"],s),t=e.match(/"([^*]*)"$/);n=t?t[1]:e}const o=c===this.OSTCBCurVal,u=yield this.analyzeTaskState(c,r,t,s),d=u.describe(),p=yield this.getStackInfo(r,this.stackPattern,s),f={},m=(e,t,s)=>{f[h[e]]={text:t,value:s}};if(m(a.ID,e?parseInt(e).toString():"???"),m(a.Address,i.hexFormat(c)),m(a.TaskName,n),m(a.Status,o?"RUNNING":d,u.fullData()),m(a.Priority,parseInt(r["OSTCBPrio-val"]).toString()),void 0!==p.stackUsed&&void 0!==p.stackSize){const e=Math.round(p.stackUsed/p.stackSize*100),t=`${e} % (${p.stackUsed} / ${p.stackSize})`;m(a.StackPercent,t,e)}else m(a.StackPercent,"?? %");if(void 0!==p.stackPeak&&void 0!==p.stackSize){const e=Math.round(p.stackPeak/p.stackSize*100),t=`${e.toString().padStart(3)} % (${p.stackPeak} / ${p.stackSize})`;m(a.StackPeakPercent,t,e)}else m(a.StackPeakPercent,"?? %");const g={display:f,stackInfo:p,running:o};if(this.foundThreads.push(g),this.createHmlHelp(g,r),c=parseInt(r["OSTCBNext-val"]),0!==c&&(r=yield this.getVarChildrenObj(r["OSTCBNext-ref"],"OSTCBNext"),l++),l>this.OSTaskCtrVal){console.log("RTOSUCOS2.getThreadInfo() detected more threads in OSTCBCur linked list that OSTaskCtr states");break}}while(0!==c);n()}catch(e){console.log("RTOSUCOS2.getThreadInfo() error",e)}}))),(e=>{o(e)})):o(new Error("Busy"))}))}getEventInfo(e,t,s){return r(this,void 0,void 0,(function*(){const s={address:e,eventType:parseInt(t["OSEventType-val"])};if(t["OSEventName-val"]){const e=t["OSEventName-val"],r=e.match(/"(.*)"$/);s.name=r?r[1]:e}return s}))}readEventArray(e,t){return r(this,void 0,void 0,(function*(){const s=[];for(let r=0;;r++){const n=parseInt(yield this.getExprVal(`((OS_EVENT**)(${e}))[${r}]`,t));if(0===n)break;{const e=yield this.getExprValChildrenObj(`(OS_EVENT*)(${n})`,t);s.push(yield this.getEventInfo(n,e,t))}}return s}))}analyzeTaskState(e,t,s,n){return r(this,void 0,void 0,(function*(){const r=parseInt(t["OSTCBStat-val"]);switch(r){case u.READY:return new m;case u.SUSPENDED:return new g;default:{const i=new y;if(d.forEach((e=>{(r&e)===e&&i.addEventType(function(e){switch(e){case u.PEND_SEMAPHORE:return p.Semaphore;case u.PEND_MAILBOX:return p.Mailbox;case u.PEND_QUEUE:return p.Queue;case u.PEND_MUTEX:return p.Mutex;case u.PEND_FLAGGROUP:return p.Flag}}(e))})),t["OSTCBEventPtr-val"]){const e=parseInt(t["OSTCBEventPtr-val"]);if(0!==e){const s=yield this.getVarChildrenObj(t["OSTCBEventPtr-ref"],"OSTCBEventPtr"),r=yield this.getEventInfo(e,s,n);i.addEvent(r)}}if(t["OSTCBEventMultiPtr-val"]){const e=parseInt(t["OSTCBEventMultiPtr-val"]);0!==e&&(yield this.readEventArray(e,n)).forEach((e=>i.addEvent(e)))}return s.has(e)&&s.get(e).forEach((e=>i.addEvent({name:e.name,eventType:p.Flag,address:e.address}))),i}}}))}getPendingFlagGroupsForTasks(e,t){return r(this,void 0,void 0,(function*(){const s=new Map;for(const r of e)if(r.variablesReference>0&&r.evaluateName){const e=yield this.getVarChildrenObj(r.variablesReference,r.name);if(parseInt(e["OSFlagType-val"])===p.Flag){const n={address:parseInt(yield this.getExprVal(`&(${r.evaluateName})`,t))},i=e["OSFlagName-val"];if(i){const e=i.match(/"(.*)"$/);n.name=e?e[1]:i}let o=yield this.getExprValChildrenObj(`(OS_FLAG_NODE *)(${e["OSFlagWaitList-exp"]})`,t);for(;o;){const e=parseInt(o["OSFlagNodeTCB-val"]);if(!e||0===e)break;s.has(e)||s.set(e,[]),s.get(e).push(n);const r=parseInt(o["OSFlagNodeNext-val"]);if(0===r)break;o=yield this.getExprValChildrenObj(`(OS_FLAG_NODE *) ${r}`,t)}}}return s}))}getStackInfo(e,t,s){return r(this,void 0,void 0,(function*(){const s=e["OSTCBStkPtr-val"],r=e["OSTCBStkBottom-val"],n=e["OSTCBStkSize-val"];let o=0;o=r&&n?this.stackIncrements<0?parseInt(r)+parseInt(n)*this.stackEntrySize:parseInt(r)-parseInt(n)*this.stackEntrySize:parseInt(s);const a={stackStart:o,stackTop:parseInt(s)};if(r&&n){if(a.stackEnd=parseInt(r),a.stackSize=parseInt(n)*this.stackEntrySize,this.stackIncrements<0){const e=a.stackStart-a.stackTop;a.stackFree=a.stackSize-e,a.stackUsed=e}else{const e=a.stackTop-a.stackStart;a.stackFree=e,a.stackUsed=a.stackSize-e}const e={memoryReference:i.hexFormat(Math.min(a.stackTop,a.stackEnd)),count:a.stackFree};try{const s=yield this.session.customRequest("readMemory",e),r=Buffer.from(s.data,"base64");a.bytes=new Uint8Array(r);let n=this.stackIncrements<0?0:a.bytes.length-1;const i=this.stackIncrements<0?a.bytes.length:-1;let o=0;for(;n!==i&&a.bytes[n]===t;)n-=this.stackIncrements,o++;a.stackPeak=a.stackSize-o}catch(e){console.log(e)}}return a}))}getHTML(){const e={html:"",css:""};let t="";if("none"===this.status)return e.html="<p>RTOS not yet fully initialized. Will occur next time program pauses</p>\n",e;if(this.stale){const s=this.lastValidHtmlContent;return this.OSTaskCtrVal===Number.MAX_SAFE_INTEGER?(t=' Could not read "OSTaskCtr". Perhaps program is busy or did not stop long enough',s.html="",s.css=""):this.OSTaskCtrVal>this.maxThreads?(t=` uC/OS-II variable OSTaskCtr = ${this.OSTaskCtrVal} seems invalid`,s.html="",s.css=""):s.html&&(t=" Following info from last query may be stale."),e.html=`<p>Unable to collect full RTOS information.${t}</p>\n`+s.html,e.css=s.css,e}if(this.OSTaskCtrVal!==Number.MAX_SAFE_INTEGER&&this.finalThreads.length!==this.OSTaskCtrVal)t+=`<p>Expecting ${this.OSTaskCtrVal} threads, found ${this.finalThreads.length}. Thread data may be unreliable<p>\n`;else if(0===this.finalThreads.length)return e.html=`<p>No ${this.name} threads detected, perhaps RTOS not yet initialized or tasks yet to be created!</p>\n`,e;const s=this.getHTMLCommon(h,c,this.finalThreads,this.timeInfo);return e.html=t+s.html+(this.helpHtml||""),e.css=s.css,this.lastValidHtmlContent=e,this.lastValidHtmlContent}}var u;t.RTOSUCOS2=l,function(e){e[e.READY=0]="READY",e[e.SUSPENDED=8]="SUSPENDED",e[e.PEND_SEMAPHORE=1]="PEND_SEMAPHORE",e[e.PEND_MAILBOX=2]="PEND_MAILBOX",e[e.PEND_QUEUE=4]="PEND_QUEUE",e[e.PEND_MUTEX=16]="PEND_MUTEX",e[e.PEND_FLAGGROUP=32]="PEND_FLAGGROUP"}(u||(u={}));const d=[u.PEND_SEMAPHORE,u.PEND_MAILBOX,u.PEND_QUEUE,u.PEND_MUTEX,u.PEND_FLAGGROUP];var p;!function(e){e[e.Mailbox=1]="Mailbox",e[e.Queue=2]="Queue",e[e.Semaphore=3]="Semaphore",e[e.Mutex=4]="Mutex",e[e.Flag=5]="Flag"}(p||(p={}));class f{}class m extends f{describe(){return"READY"}fullData(){return null}}class g extends f{describe(){return"SUSPENDED"}fullData(){return null}}class y extends f{constructor(){super(),this.pendingInfo=new Map}addEvent(e){this.addEventType(e.eventType),this.pendingInfo.get(e.eventType).push(e)}addEventType(e){this.pendingInfo.has(e)||this.pendingInfo.set(e,[])}describe(){if([...this.pendingInfo.values()].reduce(((e,t)=>e+t.length),0)<=1){let e=null;for(const t of this.pendingInfo.values())t.length>0&&(e=t[0]);return e?`PEND ${p[e.eventType]?p[e.eventType]:"Unknown"}: ${b(e)}`:"PEND Unknown"}return"PEND MULTI"}fullData(){const e={},t=[...this.pendingInfo.keys()];t.sort();for(const s of t){e[p[s]]=[];for(const t of this.pendingInfo.get(s))e[p[s]].push(b(t))}return e}}function b(e){return e.name&&"?"!==e.name?e.name:`0x${e.address.toString(16)}`}},1485:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUri=t.RTOSTracker=t.RTOSSession=void 0;const n=s(6828),i=(s(2037),s(7147),s(1017),s(4883)),o=s(3783),a=s(4162),c={FreeRTOS:i.RTOSFreeRTOS,"uC/OS-II":o.RTOSUCOS2,embOS:a.RTOSEmbOS};class h{constructor(e){this.session=e,this.htmlContent={html:"",css:""},this.allRTOSes=[],this.triedAndFailed=!1,this.lastFrameId=void 0;for(const t of Object.keys(c))this.allRTOSes.push(new c[t](e))}onStopped(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,s)=>r(this,void 0,void 0,(function*(){this.lastFrameId=e;const s=()=>{this.rtos?(this.htmlContent.html="<p>Failed to get RTOS information. Please report an issue if RTOS is actually running</p>\n",this.htmlContent.css="",this.rtos.onStopped(e).then((()=>{this.htmlContent=this.rtos.getHTML(),t()}))):(this.triedAndFailed=!0,this.htmlContent.html="",this.htmlContent.css="",t())};if(void 0===this.rtos&&this.allRTOSes.length>0){const r=[];for(const t of this.allRTOSes)r.push(t.tryDetect(e));Promise.all(r).then((e=>{for(const t of e)if("failed"===t.status){const e=this.allRTOSes.findIndex((e=>e===t));if(this.allRTOSes.splice(e,1),0===this.allRTOSes.length){s();break}}else if("initialized"===t.status){this.allRTOSes=[],this.rtos=t,s();break}this.allRTOSes.length>0&&(this.htmlContent.html="<p>RTOS detection in progress...</p>\n",this.htmlContent.css="",t())}))}else s()}))))}))}onContinued(){this.lastFrameId=void 0,this.rtos&&this.rtos.onContinued()}onExited(){this.rtos&&this.rtos.onExited(),this.lastFrameId=void 0,this.rtos=void 0}refresh(){return void 0!==this.lastFrameId?this.onStopped(this.lastFrameId):new Promise((e=>e()))}}t.RTOSSession=h;class l{constructor(e,t){this.session=e,this.handler=t,this.lastFrameId=void 0}onDidSendMessage(e){var t;d(JSON.stringify(e));const s=e;if(s)switch(s.type){case"event":{const e=s;e&&("stopped"===e.event?this.lastFrameId=void 0:"continued"===e.event&&this.handler.onContinued(this.session));break}case"response":{const e=s;if(e){const s=["continue","reverseContinue","step","stepIn","stepOut","stepBack","next","goto"];"stackTrace"===e.command?(null===(t=e.body)||void 0===t?void 0:t.stackFrames)&&e.body.stackFrames.length>0&&void 0===this.lastFrameId&&(this.lastFrameId=e.body.stackFrames[0].id,this.handler.onStopped(this.session,this.lastFrameId)):e.success&&s.includes(e.command)&&this.handler.onContinued(this.session)}break}}}onWillReceiveMessage(e){d(JSON.stringify(e))}}t.RTOSTracker=class{constructor(e){this.context=e,this.sessionMap=new Map,this.provider=new u(e.extensionUri,this);const t=n.workspace.getConfiguration("cortex-debug",null);this.enabled=t.get("showRTOS",!1),this.visible=this.enabled,n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled),e.subscriptions.push(n.debug.onDidStartDebugSession(this.debugSessionStarted.bind(this)),n.debug.onDidTerminateDebugSession(this.debugSessionTerminated.bind(this)),n.debug.registerDebugAdapterTrackerFactory("cortex-debug",this),n.debug.registerDebugAdapterTrackerFactory("cppdbg",this),n.window.registerWebviewViewProvider(u.viewType,this.provider),n.workspace.onDidChangeConfiguration(this.settingsChanged.bind(this)),n.commands.registerCommand("cortex-debug.rtos.toggleRTOSPanel",this.toggleRTOSPanel.bind(this)),n.commands.registerCommand("cortex-debug.rtos.refresh",this.update.bind(this)))}settingsChanged(e){if(e.affectsConfiguration("cortex-debug.showRTOS")){const e=n.workspace.getConfiguration("cortex-debug",null);this.enabled=e.get("showRTOS",!1),n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled),this.update()}}createDebugAdapterTracker(e){return new l(e,this)}onStopped(e,t){return r(this,void 0,void 0,(function*(){for(const s of this.sessionMap.values())if(s.session.id===e.id){s.lastFrameId=t,this.enabled&&this.visible&&(yield s.onStopped(t),this.provider.updateHtml());break}}))}onContinued(e){for(const t of this.sessionMap.values())t.session.id===e.id&&t.onContinued()}debugSessionStarted(e){this.sessionMap.set(e.id,new h(e))}debugSessionTerminated(e){const t=this.sessionMap.get(e.id);t&&(t.onExited(),this.sessionMap.delete(e.id))}updateRTOSInfo(){return r(this,void 0,void 0,(function*(){const e=[];if(this.enabled&&this.visible)for(const t of this.sessionMap.values())e.push(t.refresh());return Promise.all(e)}))}toggleRTOSPanel(){this.enabled=!this.enabled,this.updateRTOSPanelStatus()}updateRTOSPanelStatus(){n.workspace.getConfiguration("cortex-debug",null).update("showRTOS",this.enabled),n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled)}notifyPanelDisposed(){this.enabled=this.visible=!1,this.updateRTOSPanelStatus()}visibilityChanged(e){return r(this,void 0,void 0,(function*(){if(e!==this.visible){if(this.visible=e,this.visible){const e="Some sessions are busy. RTOS panel will be updated when session is paused";for(const t of this.sessionMap.values())if(void 0===t.lastFrameId&&e){n.window.showInformationMessage(e);break}}try{yield this.update()}catch(e){}}}))}update(){return new Promise((e=>{this.enabled&&this.visible&&this.sessionMap.size||e(),this.busyHtml={html:"<h4>Busy updating...</h4>\n",css:""},this.provider.updateHtml(),this.updateRTOSInfo().then((()=>{this.busyHtml=void 0,this.provider.updateHtml(),e()}),(t=>{this.busyHtml=void 0,this.provider.updateHtml(),e()}))}))}getHtml(){const e={html:"",css:""};if(this.busyHtml)return this.busyHtml;if(0===this.sessionMap.size)return this.lastGoodHtmlContent?this.lastGoodHtmlContent:(e.html="<p>No active/compatible debug sessions running.</p>\n",e);if(!this.visible||!this.enabled)return e.html="<p>Contents are not visible, so no html generated</p>\n",e;for(const t of this.sessionMap.values()){const s=`Session Name: "${t.session.name}"`;if(t.rtos){const r=s+", "+t.rtos.name+" detected."+(t.htmlContent?"":" (No data available yet)");e.html+=`<h4>${r}</h4>\n`+t.htmlContent.html,e.css=t.htmlContent.css}else{const r=s+" -- No RTOS detected";if(e.html+=`<h4>${r}</h4>\n`,t.triedAndFailed){const t=Object.keys(c).join(", ");e.html+=`<p>Failed to match any supported RTOS. Supported RTOSes are (${t}). Please report issues and/or contribute code/knowledge to add your RTOS</p>\n`}else e.html+="<p>Try refreshing this panel. RTOS detection may be still in progress</p>\n"}}return this.lastGoodHtmlContent=e,e}};class u{constructor(e,t){this.extensionUri=e,this.parent=t}resolveWebviewView(e,t,s){this.webviewView=e,this.parent.visible=this.webviewView.visible,this.parent.enabled=!0,e.webview.options={enableScripts:!0,localResourceRoots:[this.extensionUri]},this.webviewView.description="View RTOS internals",this.webviewView.onDidDispose((e=>{this.webviewView=void 0,this.parent.notifyPanelDisposed()})),this.webviewView.onDidChangeVisibility((e=>{this.parent.visibilityChanged(this.webviewView.visible)})),this.updateHtml(),e.webview.onDidReceiveMessage((e=>{"refresh"===(null==e?void 0:e.type)&&this.parent.update()}))}showAndFocus(){this.webviewView&&this.webviewView.show(!1)}updateHtml(){this.webviewView&&(this.webviewView.webview.html=this.getHtmlForWebview())}getHtmlForWebview(){var e;const t=null===(e=this.webviewView)||void 0===e?void 0:e.webview;if(!t)return"";if(!this.parent.enabled)return'\n                <!DOCTYPE html>\n                <html lang="en">\n                <head>\n                    <meta charset="UTF-8">\n                    <title>RTOS Threads</title>\n                </head>\n                <body>\n                    <p>Currently disabled. Enable setting "cortex-debug.showRTOS" or use Command "Cortex Debug: Toggle RTOS Panel" to see any RTOS info</p>\n                </body>\n                </html>';const s=p(t,this.extensionUri,["webview","node_modules","@vscode","webview-ui-toolkit","dist","toolkit.js"]),r=t.asWebviewUri(n.Uri.joinPath(this.extensionUri,"resources","rtos.js")),i=t.asWebviewUri(n.Uri.joinPath(this.extensionUri,"resources","rtos.css")),o=this.parent.getHtml(),a=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<32;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return`\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="UTF-8">\n                \x3c!--\n                    Use a content security policy to only allow loading images from https or from our extension directory,\n                    and only allow scripts that have a specific nonce.\n                --\x3e\n                <meta http-equiv="Content-Security-Policy" content="default-src 'none';\n                style-src 'nonce-${a}' ${t.cspSource}; script-src 'nonce-${a}';">\n                <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                <link href="${i}" rel="stylesheet">\n                <style nonce="${a}">\n                ${o.css}\n                </style>\n                <title>RTOS Threads</title>\n            </head>\n            <body>\n                ${o.html}\n                <script type="module" nonce="${a}" src="${s}"><\/script>\n                <script type="module" nonce="${a}" src="${r}"><\/script>\n            </body>\n            </html>`}}function d(e){}function p(e,t,s){return e.asWebviewUri(n.Uri.joinPath(t,...s))}u.viewType="cortex-debug.rtos",t.getUri=p},7561:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTTTerminal=void 0;const r=s(6828),n=s(7147),i=s(3200),o=s(8477),a=s(4359),c=s(530);class h{constructor(e,t,s){this.context=e,this.options=t,this.inUse=!0,this.hrTimer=new i.HrTimer,this.ptyOptions=this.createTermOptions(null),this.createTerminal(),this.sanitizeEncodings(this.options),this.connectToSource(s),this.openLogFile()}get terminal(){return this.ptyTerm?this.ptyTerm.terminal:null}connectToSource(e){this.hrTimer=new i.HrTimer,this.binaryFormatter=new d(this.ptyTerm,this.options.encoding,this.options.scale),e.once("disconnected",(()=>{this.onClose()})),e.on("error",(e=>{const t=e.code;"ECONNRESET"===t||("ECONNREFUSED"===t?o.magentaWrite(`${e}\n.`,this.ptyTerm):o.magentaWrite(`${e}\n`,this.ptyTerm))})),e.on("data",(e=>{this.onData(e)})),e.connError?(this.source=e,o.magentaWrite(`${e.connError.message}\n`,this.ptyTerm)):e.connected?this.source=e:e.once("connected",(()=>{this.source=e}))}onClose(){if(this.source=null,this.inUse=!1,!this.options.noclear&&this.logFd>=0)try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1,this.ptyTerm.write(c.RESET+"\n"),o.magentaWrite(`RTT connection on TCP port ${this.options.tcpPort} ended. Waiting for next connection...`,this.ptyTerm)}onData(e){try{this.logFd>=0&&n.writeSync(this.logFd,e),"binary"===this.options.type?this.binaryFormatter.writeBinary(e):this.writeNonBinary(e)}catch(e){o.magentaWrite(`Error writing data: ${e}\n`,this.ptyTerm)}}openLogFile(){if(this.logFd=-1,this.options.logfile)try{this.logFd=n.openSync(this.options.logfile,"w")}catch(e){const t=`Could not open file ${this.options.logfile} for writing. ${e.toString()}`;console.error(t),o.magentaWrite(t,this.ptyTerm)}}writeNonBinary(e){let t=0,s="";this.options.timestamp&&(s=this.hrTimer.createDateTimestamp()+" ");for(let r=1;r<e.length;r++){if(255!==e[r-1])continue;const n=e[r];(n>=48&&n<=57||n>=65&&n<=90)&&(r>=1&&this.ptyTerm.writeWithHeader(e.slice(t,r-1),s),this.ptyTerm.write(`<switch to vTerm#${String.fromCharCode(n)}>\n`),e=e.slice(r+1),r=0,t=0)}e.length>0&&this.ptyTerm.writeWithHeader(e,s)}createTermOptions(e){return{name:h.createTermName(this.options,e),prompt:this.createPrompt(),inputMode:this.options.inputmode||i.TerminalInputMode.COOKED}}createTerminal(){this.ptyTerm=new o.PtyTerminal(this.createTermOptions(null)),this.ptyTerm.on("data",this.sendData.bind(this)),this.ptyTerm.on("close",this.terminalClosed.bind(this))}createPrompt(){return this.options.noprompt?"":this.options.prompt||`RTT:${this.options.port}> `}static createTermName(e,t){const s="binary"===e.type?`enc:${u(e.encoding)}`:e.type,n=e.label||`RTT Ch:${e.port} ${s}`;let i=n,o=1;for(;r.window.terminals.findIndex((e=>e.name===i))>=0;){if(t===i)return t;i=`${n}-${o}`,o++}return i}terminalClosed(){this.dispose()}sendData(e){if(this.source)try{("string"==typeof e||e instanceof String)&&this.options.inputmode===i.TerminalInputMode.COOKED&&(e=Buffer.from(e,this.options.iencoding)),this.source.write(e)}catch(e){console.error(`RTTTerminal:sendData failed ${e}`)}}sanitizeEncodings(e){var t;e.encoding=u(e.encoding),e.iencoding=(t=(t=e.iencoding)?t.toLowerCase():"")in i.TextEncoding?t:i.TextEncoding.UTF8}tryReuse(e,t){if(!this.ptyTerm||!this.ptyTerm.terminal)return!1;this.sanitizeEncodings(this.options);const s=h.createTermName(e,this.ptyOptions.name);if(s===this.ptyOptions.name){if(this.inUse=!0,!this.options.noclear||this.options.type!==e.type){this.ptyTerm.clearTerminalBuffer();try{this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1),this.openLogFile()}catch(e){o.magentaWrite(`Error: closing fille ${e}\n`,this.ptyTerm)}}return this.options=e,this.ptyOptions=this.createTermOptions(s),this.ptyTerm.resetOptions(this.ptyOptions),this.connectToSource(t),!0}return!1}dispose(){if(this.ptyTerm.dispose(),this.logFd>=0){try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}}function l(e,t,s=" "){return e.length>=t?e:e=s.repeat(t-e.length)+e}function u(e){return(e=e?e.toLowerCase():"")in i.BinaryEncoding||(e=i.BinaryEncoding.UNSIGNED),e}t.RTTTerminal=h;class d{constructor(e,t,s){this.ptyTerm=e,this.encoding=t,this.scale=s,this.bytesNeeded=4,this.buffer=Buffer.alloc(4),this.bytesRead=0,this.hrTimer=new i.HrTimer,this.bytesRead=0,this.encoding=u(t),this.scale=s||1}writeBinary(e){const t=Buffer.from(e),s=this.hrTimer.createDateTimestamp();for(const e of t)if(this.buffer[this.bytesRead]=e,this.bytesRead=this.bytesRead+1,this.bytesRead===this.bytesNeeded){let e="";for(const t of this.buffer)e+=t<=32||t>=127&&t<=159?".":String.fromCharCode(t);this.buffer.toString();const t=l(this.buffer.toString("hex"),8,"0"),i=(r=this.buffer,n=this.encoding,a.decoders[n]?a.decoders[n](r):a.decoders.unsigned(r)),o=l(`${i}`,12),c=l(""+i*this.scale,12);this.ptyTerm.write(`${s} ${e}  0x${t} - ${o} - ${c}\n`),this.bytesRead=0}var r,n}}},5287:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDBServerConsole=t.GDBServerConsoleInstance=void 0;const r=s(1808),n=s(6828),i=s(7147),o=s(2037),a=s(1017),c=s(8477),h=s(3200);let l=-1;class u{constructor(){this.ptyTerm=null,this.toBackend=null,this.ptyOptions={name:"gdb-server",prompt:"",inputMode:h.TerminalInputMode.COOKED}}static newOrExistingConsole(){let e=u.allConsoles.find((e=>e.isClosed()));return e||(e=new u,u.allConsoles.push(e),e)}static disposeAll(){const e=u.allConsoles;u.allConsoles=[];for(const t of e)t.toBackend&&(t.toBackend.destroy(),t.toBackend=null),t.ptyTerm&&t.ptyTerm.dispose()}newBackendConnection(e){this.createAndShowTerminal(),this.toBackend=e,this.ptyTerm.resume(),this.clearTerminal(),this.debugMsg('onBackendConnect: gdb-server session connected. You can switch to "DEBUG CONSOLE" to see GDB interactions.'),e.setKeepAlive(!0),e.on("close",(()=>{this.debugMsg("onBackendConnect: gdb-server session closed"),c.magentaWrite("GDB server session ended. This terminal will be reused, waiting for next session to start...",this.ptyTerm),this.toBackend=null,this.ptyTerm.pause()})),e.on("data",(e=>{this.ptyTerm.write(e),this.logData(e)})),e.on("error",(e=>{this.debugMsg(`GDBServerConsole: onBackendConnect: gdb-server program client error ${e}`),this.toBackend=null,this.ptyTerm.pause()}))}isClosed(){return null===this.toBackend}createAndShowTerminal(){this.ptyTerm||this.setupTerminal()}clearTerminal(){this.ptyTerm.clearTerminalBuffer()}setupTerminal(){this.ptyOptions.name=u.createTermName(this.ptyOptions.name,null),this.ptyTerm=new c.PtyTerminal(this.ptyOptions),this.ptyTerm.terminal.show(),this.ptyTerm.on("close",(()=>{this.onTerminalClosed()})),this.ptyTerm.on("data",(e=>{this.sendToBackend(e)})),null===this.toBackend?(c.magentaWrite("Waiting for gdb server to start...",this.ptyTerm),this.ptyTerm.pause()):(c.magentaWrite("Resuming connection to gdb server...\n",this.ptyTerm),this.ptyTerm.resume())}onTerminalClosed(){this.ptyTerm=null,this.toBackend&&setTimeout((()=>{n.window.showInformationMessage("gdb-server terminal closed unexpectedly. Trying to reopen it"),this.setupTerminal()}),10)}sendToBackend(e){this.toBackend&&(this.toBackend.write(e.toString()),this.toBackend.uncork())}logData(e){d.logDataStatic(this.ptyTerm,e)}debugMsg(e){d.debugMsgStatic(this.ptyTerm,e)}static createTermName(e,t){let s=e,r=1;for(;n.window.terminals.findIndex((e=>e.name===s))>=0;){if(t===s)return t;s=`${e}-${r}`,r+=1}return s}}t.GDBServerConsoleInstance=u,u.allConsoles=[];class d{constructor(e,t=""){this.context=e,this.logFileName=t,this.toBackendServer=null,this.toBackend=null,this.toBackendPort=-1,this.logFName="",this.allConsoles=[],this.createLogFile(t)}createLogFile(e){this.logFName=e;const t=!!this.logFName;if(l>=0)try{i.closeSync(l)}finally{l=-1}try{if(this.logFName){const e=a.dirname(this.logFName);e&&i.mkdirSync(e,{recursive:!0}),this.logFName=this.logFName.replace("${PID}",process.pid.toString())}else{const e=o.tmpdir();this.logFName=`${e}/gdb-server-console-${process.pid}.log`}l=i.openSync(this.logFName,"w")}catch(e){t&&n.window.showErrorMessage(`Could not open log file: ${this.logFName}\n${e}`)}}isServerAlive(){return null!==this.toBackendServer}static debugMsgStatic(e,t){try{t=`[${(new Date).toISOString()}] SERVER CONSOLE DEBUG: `+t,console.log(t),e&&(t+=t.endsWith("\n")?"":"\n",c.magentaWrite(t,e)),d.logDataStatic(e,t)}finally{}}startServer(){return new Promise(((e,t)=>{h.getAnyFreePort(55878).then((s=>{this.toBackendPort=s;const n=r.createServer(this.onBackendConnect.bind(this));n.listen(this.toBackendPort,"127.0.0.1",(()=>{this.toBackendServer=n,d.BackendPort=this.toBackendPort,e()})),n.on("error",(e=>{console.error(e),t(e)})),n.on("close",(()=>{this.toBackendServer=null}))}))}))}onBackendConnect(e){u.newOrExistingConsole().newBackendConnection(e)}static logDataStatic(e,t){try{if(l>=0){if(!e||!e.isReady){const e=`[${(new Date).toISOString()}] SERVER CONSOLE DEBUG: ******* Terminal not yet ready, buffering... ******`;console.log(e)}i.writeFileSync(l,t.toString()),i.fdatasyncSync(l)}}catch(e){l=-1}}dispose(){u.disposeAll()}}t.GDBServerConsole=d,d.BackendPort=-1},7525:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVDParser=t.AccessType=void 0;const r=s(2532),n=s(4051),i=s(9969),o=s(2942),a=s(3822),c=s(5055),h=s(7147);var l;!function(e){e[e.ReadOnly=1]="ReadOnly",e[e.ReadWrite=2]="ReadWrite",e[e.WriteOnly=3]="WriteOnly"}(l=t.AccessType||(t.AccessType={}));const u={"read-only":l.ReadOnly,"write-only":l.WriteOnly,"read-write":l.ReadWrite,writeOnce:l.WriteOnly,"read-writeOnce":l.ReadWrite};class d{static parseSVD(e,t,s){return d.gapThreshold=s,d.enumTypeValuesMap={},d.peripheralRegisterMap={},new Promise(((s,r)=>{h.readFile(t,"utf8",((t,n)=>{t?r(t):c.parseString(n,((t,n)=>{if(t)return void r(t);const a={},c={accessType:l.ReadWrite,size:32,resetValue:0};n.device.resetValue&&(c.resetValue=o.parseInteger(n.device.resetValue[0])),n.device.size&&(c.size=o.parseInteger(n.device.size[0])),n.device.access&&(c.accessType=u[n.device.access[0]]),n.device.peripherals[0].peripheral.forEach((e=>{const t=e.name[0];a[t]=e}));for(const e in a){const t=a[e];if(t.$&&t.$.derivedFrom){const s=a[t.$.derivedFrom];a[e]=Object.assign(Object.assign({},s),t)}}const h=[];for(const t in a)try{h.push(d.parsePeripheral(e,a[t],c))}catch(e){r(e)}h.sort(i.PeripheralNode.compare);for(const e of h)e.collectRanges([]);s(h)}))}))}))}static cleanupDescription(e){return e.replace("\r","").replace(/\n\s*/g," ")}static parseFields(e,t){const s=[];return null==e||e.map((e=>{let r,n;const i=this.cleanupDescription(e.description?e.description[0]:"");if(e.bitOffset&&e.bitWidth)r=o.parseInteger(e.bitOffset[0]),n=o.parseInteger(e.bitWidth[0]);else if(e.bitRange){let t=e.bitRange[0];t=t.substring(1,t.length-1),t=t.split(":");const s=o.parseInteger(t[0]),i=o.parseInteger(t[1]);n=s-i+1,r=i}else{if(!e.msb||!e.lsb)throw new Error(`Unable to parse SVD file: field ${e.name[0]} must have either bitOffset and bitWidth elements, bitRange Element, or msb and lsb elements.`);{const t=o.parseInteger(e.msb[0]),s=o.parseInteger(e.lsb[0]);n=t-s+1,r=s}}let c=null;if(e.enumeratedValues){c={};const s=e.enumeratedValues[0];if(s.$&&s.$.derivedFrom){const t=d.enumTypeValuesMap[s.$.derivedFrom];if(!t)throw new Error(`Invalid derivedFrom=${s.$.derivedFrom} for enumeratedValues of field ${e.name[0]}`);c=t}else if(s.enumeratedValue.map((e=>{if(e.value&&e.value.length>0){const t=e.name[0],s=this.cleanupDescription(e.description?e.description[0]:""),r=e.value[0].toLowerCase(),n=o.parseInteger(r);c[n]=new a.EnumeratedValue(t,s,n)}})),s.name&&s.name[0]){let r=s.name[0];for(const s of[null,e.name[0],t.name,t.parent.name])r=s?s+"."+r:r,d.enumTypeValuesMap[r]=c}}const h={name:e.name[0],description:i,offset:r,width:n,enumeration:c};if(e.access&&(h.accessType=u[e.access[0]]),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: field ${e.name[0]} has dim element, with no dimIncrement element.`);const n=o.parseInteger(e.dim[0]),i=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],n);else for(let e=0;e<n;e++)c.push(`${e}`);const l=e.name[0],u=r;for(let e=0;e<n;e++){const r=l.replace("%s",c[e]);s.push(new a.PeripheralFieldNode(t,Object.assign(Object.assign({},h),{name:r,offset:u+i*e})))}}else s.push(new a.PeripheralFieldNode(t,Object.assign({},h)))})),s}static parseRegisters(e,t){const s=[...e],n=[],i={};for(const e of s){const s=e.name[0];i[s]=e,d.peripheralRegisterMap[t.name+"."+s]=e}let a=0;for(const e of s){const r=e.$?e.$.derivedFrom:"";if(r){const n=e.name[0],o=i[r]||d.peripheralRegisterMap[r];if(!o)throw new Error(`SVD error: Invalid 'derivedFrom' "${r}" for register "${n}"`);const c=Object.assign(Object.assign({},o),e);delete c.$.derivedFrom,c.$._derivedFrom=r,i[n]=c,d.peripheralRegisterMap[t.name+"."+n]=c,s[a]=c}a++}for(const e of s){const s={};if(e.access&&(s.accessType=u[e.access[0]]),e.size&&(s.size=o.parseInteger(e.size[0])),e.resetValue&&(s.resetValue=o.parseInteger(e.resetValue[0])),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: register ${e.name[0]} has dim element, with no dimIncrement element.`);const i=o.parseInteger(e.dim[0]),a=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],i);else for(let e=0;e<i;e++)c.push(`${e}`);const h=e.name[0],l=this.cleanupDescription(e.description?e.description[0]:""),u=o.parseInteger(e.addressOffset[0]);for(let o=0;o<i;o++){const i=h.replace("%s",c[o]),p=l.replace("%s",c[o]),f=new r.PeripheralRegisterNode(t,Object.assign(Object.assign({},s),{name:i,description:p,addressOffset:u+a*o}));e.fields&&1===e.fields.length&&d.parseFields(e.fields[0].field,f),n.push(f)}}else{const i=this.cleanupDescription(e.description?e.description[0]:""),a=new r.PeripheralRegisterNode(t,Object.assign(Object.assign({},s),{name:e.name[0],description:i,addressOffset:o.parseInteger(e.addressOffset[0])}));e.fields&&1===e.fields.length&&d.parseFields(e.fields[0].field,a),n.push(a)}}return n.sort(((e,t)=>e.offset<t.offset?-1:e.offset>t.offset?1:0)),n}static parseClusters(e,t){const s=[];return e?(e.forEach((e=>{const r={};if(e.access&&(r.accessType=u[e.access[0]]),e.size&&(r.size=o.parseInteger(e.size[0])),e.resetValue&&(r.resetValue=o.parseInteger(e.resetValue)),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: cluster ${e.name[0]} has dim element, with no dimIncrement element.`);const i=o.parseInteger(e.dim[0]),a=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],i);else for(let e=0;e<i;e++)c.push(`${e}`);const h=e.name[0],l=this.cleanupDescription(e.description?e.description[0]:""),u=o.parseInteger(e.addressOffset[0]);for(let o=0;o<i;o++){const i=h.replace("%s",c[o]),p=l.replace("%s",c[o]),f=new n.PeripheralClusterNode(t,Object.assign(Object.assign({},r),{name:i,description:p,addressOffset:u+a*o}));e.register&&d.parseRegisters(e.register,f),s.push(f)}}else{const i=this.cleanupDescription(e.description?e.description[0]:""),a=new n.PeripheralClusterNode(t,Object.assign(Object.assign({},r),{name:e.name[0],description:i,addressOffset:o.parseInteger(e.addressOffset[0])}));e.register&&(d.parseRegisters(e.register,a),s.push(a))}})),s):[]}static parsePeripheral(e,t,s){let r=0;if(t.addressBlock)for(const e of t.addressBlock){const t=o.parseInteger(e.offset[0]),s=o.parseInteger(e.size[0]);r=Math.max(r,t+s)}const n={name:t.name[0],baseAddress:o.parseInteger(t.baseAddress?t.baseAddress[0]:0),description:this.cleanupDescription(t.description?t.description[0]:""),totalLength:r};t.access&&(n.accessType=u[t.access[0]]),t.size&&(n.size=o.parseInteger(t.size[0])),t.resetValue&&(n.resetValue=o.parseInteger(t.resetValue[0])),t.groupName&&(n.groupName=t.groupName[0]);const a=new i.PeripheralNode(e,d.gapThreshold,n);return t.registers&&(t.registers[0].register&&d.parseRegisters(t.registers[0].register,a),t.registers[0].cluster&&d.parseClusters(t.registers[0].cluster,a)),a}}t.SVDParser=d,d.enumTypeValuesMap={},d.peripheralRegisterMap={},d.gapThreshold=16},1619:(e,t)=>{"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampType=t.PacketType=void 0,(r=t.PacketType||(t.PacketType={}))[r.HARDWARE=1]="HARDWARE",r[r.SOFTWARE=2]="SOFTWARE",r[r.TIMESTAMP=3]="TIMESTAMP",(s=t.TimestampType||(t.TimestampType={}))[s.CURRENT=0]="CURRENT",s[s.DELAYED=1]="DELAYED",s[s.EVENT_DELAYED=2]="EVENT_DELAYED",s[s.EVENT_TIME_DELAYED=3]="EVENT_TIME_DELAYED"},8904:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTTCore=t.SWOCore=t.SWORTTCoreBase=void 0;const r=s(6828),n=s(1017),i=s(7147),o=s(29),a=s(8376),c=s(1887),h=s(8125),l=s(2361),u=s(1619),d=s(4359),p=s(3200),f=s(473);var m;!function(e){e[e.IDLE=1]="IDLE",e[e.UNSYNCED=2]="UNSYNCED",e[e.TIMESTAMP=3]="TIMESTAMP",e[e.HARDWARE_EVENT=4]="HARDWARE_EVENT",e[e.SOFTWARE_EVENT=5]="SOFTWARE_EVENT",e[e.RESERVED=6]="RESERVED"}(m||(m={}));class g extends l.EventEmitter{constructor(){super(),this.syncBuffer=new f(6),this.status=m.IDLE,this.rxCount=0,this.timestamp=0,this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255)}resetRxPacket(e,t,s){this.rxBuffer=Buffer.alloc(t,0),this.rxTargetLength=t,this.rxPacketType=s,this.rxPort=e,this.rxCount=0}rxWriteByte(e){return this.rxBuffer.writeUInt8(e,this.rxCount),this.rxCount++,this.rxCount===this.rxTargetLength}getRxPacket(){return{type:this.rxPacketType,port:this.rxPort,size:this.rxCount,data:this.rxBuffer}}checkSync(e){this.syncBuffer.enq(e);const t=this.syncBuffer.peekN(6);return 128===t[5]&&0===t[4]&&0===t[3]&&0===t[2]&&0===t[1]&&0===t[0]}processByte(e){let t=this.status;if(this.checkSync(e))t=m.IDLE,this.emit("synchronized");else switch(this.status){case m.IDLE:if(0===e)break;if(112===e)this.emit("overflow");else if(0==(15&e))this.timestamp=0,this.resetRxPacket(-1,5,u.PacketType.TIMESTAMP),this.rxWriteByte(e),128&e?t=m.TIMESTAMP:this.emit("timestamp",this.getRxPacket());else if(0!=(3&e)){let s=3&e;3===s&&(s=4);const r=(248&e)>>>3;0!=(4&e)?(this.resetRxPacket(r,s,u.PacketType.HARDWARE),t=m.HARDWARE_EVENT):(this.resetRxPacket(r,s,u.PacketType.SOFTWARE),t=m.SOFTWARE_EVENT)}else t=m.RESERVED,this.emit("lost-synchronization");break;case m.TIMESTAMP:this.rxWriteByte(e),0==(128&e)&&(this.emit("timestamp",this.getRxPacket()),t=m.IDLE);break;case m.UNSYNCED:break;case m.SOFTWARE_EVENT:this.rxWriteByte(e)&&(this.emit("software-event",this.getRxPacket()),t=m.IDLE);break;case m.HARDWARE_EVENT:this.rxWriteByte(e)&&(this.emit("hardware-event",this.getRxPacket()),t=m.IDLE);break;case m.RESERVED:0==(128&e)&&(t=m.IDLE)}this.status=t}}class y{constructor(e,t){this.extensionPath=e,this.graphs=t,this.currentStatus="stopped",this.processors=[],this.lastId=0,this.now=new Date;const s=this.now.toTimeString(),i={preserveFocus:!0,viewColumn:r.ViewColumn.Beside},o={retainContextWhenHidden:!0,enableFindWidget:!1,enableCommandUris:!1,enableScripts:!0,localResourceRoots:[r.Uri.file(n.join(e,"dist"))]},a=`SWO/RTT Graphs [${s}]`;this.viewPanel=r.window.createWebviewPanel("cortex-debug.grapher",a,i,o),this.viewPanel.webview.onDidReceiveMessage((e=>{this.onMessage(e)})),this.viewPanel.webview.html=this.getHTML()}getHTML(){const e=r.Uri.file(n.join(this.extensionPath,"dist","grapher.bundle.js")).with({scheme:"vscode-resource"}),t=p.getNonce();let s=i.readFileSync(n.join(this.extensionPath,"resources","grapher.html"),{encoding:"utf8",flag:"r"});return s=s.replace(/\$\{nonce\}/g,t).replace(/\$\{scriptUri\}/g,e.toString()),s}registerProcessors(e){e.on("message",this.sendMessage.bind(this)),this.processors.push(e)}clearProcessors(){this.processors=[]}sendMessage(e){e.timestamp=(new Date).getTime(),this.viewPanel.webview.postMessage(e)}onMessage(e){if("init"===e.type){const e={type:"configure",graphs:this.graphs,status:this.currentStatus};this.viewPanel.webview.postMessage(e)}}}class b{constructor(){this.webview=null}debugSessionTerminated(){if(this.webview){const e={type:"status",status:"terminated"};this.webview.sendMessage(e)}}debugStopped(){if(this.webview){const e={type:"status",status:"stopped"};this.webview.sendMessage(e)}}debugContinued(){if(this.webview){const e={type:"status",status:"continued"};this.webview.sendMessage(e)}}}t.SWORTTCoreBase=b,t.SWOCore=class extends b{constructor(e,t,s,n){super(),this.session=e,this.source=t,this.processors=[],this.connected=!1,this.itmDecoder=new g,e.customRequest("load-function-symbols").then((e=>{this.functionSymbols=e.functionSymbols}),(e=>{this.functionSymbols=[]})),this.source.connected?this.connected=!0:this.source.on("connected",(()=>{this.connected=!0})),this.source.on("data",this.handleData.bind(this)),this.source.on("disconnected",this.handleDisconnected.bind(this)),s.graphConfig.length>=1&&(this.webview=new y(n,s.graphConfig)),s.swoConfig.decoders.forEach((e=>{let t;switch(e.type){case"console":this.processors.push(new o.SWOConsoleProcessor(e));break;case"binary":this.processors.push(new a.SWOBinaryProcessor(e));break;case"graph":t=new c.SWORTTGraphProcessor(e),this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break;case"advanced":try{t=new h.SWORTTAdvancedProcessor(e),this.webview&&this.webview.registerProcessors(t),this.processors.push(t)}catch(e){r.window.showErrorMessage(`Error Initializing Advanced Decoder: ${e.toString()}`)}}})),this.itmDecoder.on("software-event",this.processPacket.bind(this)),this.itmDecoder.on("hardware-event",this.processPacket.bind(this)),this.itmDecoder.on("synchronized",this.synchronized.bind(this)),this.itmDecoder.on("lost-synchronization",this.lostSynchronization.bind(this)),this.itmDecoder.on("timestamp",this.processTimestampPacket.bind(this)),this.itmDecoder.on("overflow",this.overflow.bind(this))}handleDisconnected(e){for(const e of this.processors)e.close();this.processors=[],this.connected=!1}handleData(e){for(let t=0;t<e.length;t++){const s=e.readUInt8(t);this.itmDecoder.processByte(s)}}processPacket(e){if(e.type===u.PacketType.SOFTWARE)this.processors.forEach((t=>t.softwareEvent(e)));else if(e.type===u.PacketType.HARDWARE)if(this.processors.forEach((t=>t.hardwareEvent(e))),2===e.port){if(this.webview){const t=d.parseUnsigned(e.data),s=this.getFunctionAtAddress(t),r={type:"program-counter",counter:t,function:s?s.name:"**Unknown**"};this.webview.sendMessage(r)}}else console.log("Received Other Hardware Packet: ",e)}processTimestampPacket(e){let t=0;for(let s=1;s<e.size;s++)t<<=7,t|=127&e.data.readUInt8(s)}overflow(){}lostSynchronization(){this.processors.forEach((e=>e.lostSynchronization()))}synchronized(){this.processors.forEach((e=>e.synchronized()))}calculatePortMask(e){let t=0;return e.forEach((e=>{if("advanced"===e.type){const s=e;for(const e of s.ports)t=(t|1<<e)>>>0}else t=(t|1<<e.port)>>>0})),t}dispose(){this.processors.forEach((e=>e.dispose())),this.processors=null,this.webview&&this.webview.clearProcessors(),this.connected=!1}getFunctionAtAddress(e){const t=this.functionSymbols.filter((t=>t.address<=e&&t.address+t.length>e));if(t&&0!==t.length)return t[0]}};class v extends l.EventEmitter{constructor(e,t,s){super(),this.source=e,this.port=t,this.bytesNeeded=s,this.connected=!1,this.bytesRead=0,this.buffer=Buffer.alloc(s),this.source.connected?this.connected=!0:this.source.on("connected",(()=>{this.connected=!0})),this.source.on("data",this.onData.bind(this)),this.source.on("disconnected",(()=>{this.connected=!1}))}onData(e){const t="string"==typeof e?Buffer.from(e):e;for(const e of t)if(this.buffer[this.bytesRead]=e,this.bytesRead=this.bytesRead+1,this.bytesRead===this.bytesNeeded){const e={type:u.PacketType.SOFTWARE,port:this.port,size:this.bytesRead,data:Buffer.from(this.buffer)};this.emit("software-event",e),this.bytesRead=0}}dispose(){}}t.RTTCore=class extends b{constructor(e,t,s){super(),this.sources=e,this.processors=[],this.decoders=[],t.graphConfig.length>=1&&(this.webview=new y(s,t.graphConfig)),t.rttConfig.decoders.forEach((e=>{switch(e.type){case"graph":this.addRTTDecoder(this.sources[e.port]);const t=new c.SWORTTGraphProcessor(e);this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break;case"advanced":try{for(const t of e.ports)this.addRTTDecoder(this.sources[t]);const t=new h.SWORTTAdvancedProcessor(e);this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break}catch(e){r.window.showErrorMessage(`Error Initializing Advanced Decoder: ${e.toString()}`)}}}))}addRTTDecoder(e){if(e){const t=new v(e,e.channel,4);t.on("software-event",this.onPacket.bind(this)),this.decoders.push(t)}else console.error("Null source?")}onPacket(e){for(const t of this.processors)t.softwareEvent(e)}dispose(){this.processors.forEach((e=>e.dispose())),this.processors=null,this.webview&&this.webview.clearProcessors()}}},8125:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWORTTAdvancedProcessor=void 0;const r=s(6828),n=s(2361),i=require;class o extends n.EventEmitter{constructor(e){super(),this.format="advanced",this.ports=[];const t=e.decoder,s=i.resolve(t);i.cache[s]&&delete i.cache[s];const n=i(t);if(!n||!n.default)throw new Error(`Unable to load decoder class from: ${e.decoder}`);{const t=n.default;try{this.decoder=new t,this.decoder.init(e,this.displayOutput.bind(this),this.graphData.bind(this))}catch(e){throw new Error(`Error instantiating decoder class: ${e.toString()}`)}this.ports=e.ports,this.output=r.window.createOutputChannel(`SWO: ${this.decoder.outputLabel()||""} [type: ${this.decoder.typeName()}]`)}}softwareEvent(e){-1!==this.ports.indexOf(e.port)&&this.decoder.softwareEvent(e.port,e.data)}hardwareEvent(e){}synchronized(){this.decoder.synchronized()}lostSynchronization(){this.decoder.lostSynchronization()}displayOutput(e,t=!0){this.output.append(e)}graphData(e,t){const s={type:"data",data:e,id:t};this.emit("data",s)}dispose(){this.output.dispose(),this.close()}close(){}}t.SWORTTAdvancedProcessor=o},8376:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWOBinaryProcessor=void 0;const r=s(6828),n=s(7147),i=s(4359),o=s(8477),a=s(3200);t.SWOBinaryProcessor=class{constructor(e){if(this.format="binary",this.useTerminal=!0,this.ptyTerm=null,this.hrTimer=new a.HrTimer,this.logFd=-1,this.port=e.port,this.scale=e.scale||1,this.encoding=(e.encoding||"unsigned").replace(".","_"),this.useTerminal=!("useTerminal"in e)||e.useTerminal,this.useTerminal?this.createVSCodeTerminal(e):this.createVSCodeChannel(e),e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const s=`Could not open file ${e.logfile} for writing. ${t.toString()}`;r.window.showErrorMessage(s)}}}createVSCodeTerminal(e){const t={name:this.createName(e),prompt:"",inputMode:a.TerminalInputMode.DISABLED};this.ptyTerm=o.PtyTerminal.findExisting(t.name),this.ptyTerm?this.ptyTerm.clearTerminalBuffer():(this.ptyTerm=new o.PtyTerminal(t),this.ptyTerm.terminal.show())}createVSCodeChannel(e){const t=this.createName(e);this.output=r.window.createOutputChannel(t)}createName(e){return`SWO:${e.label||""}[port:${this.port}, enc:${this.encoding}]`}softwareEvent(e){if(e.port!==this.port)return;new Date;const t=e.data.toString("hex"),s=(o=e.data,a=this.encoding,i.decoders[a]?i.decoders[a](o):i.decoders.unsigned(o));var o,a;const c=s*this.scale,h=`${this.hrTimer.createDateTimestamp()} ${t} - ${s} - ${c}`;if(this.useTerminal?this.ptyTerm.write(h+"\n"):this.output.appendLine(h),this.logFd>=0)try{n.writeSync(this.logFd,e.data)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;r.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.output&&(this.output.dispose(),this.output=null),this.ptyTerm&&(this.ptyTerm.dispose(),this.ptyTerm=null),this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}},29:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWOConsoleProcessor=void 0;const r=s(6828),n=s(7147),i=s(8477),o=s(3200);t.SWOConsoleProcessor=class{constructor(e){if(this.position=0,this.timeout=null,this.format="console",this.showOutputTimer=null,this.useTerminal=!0,this.ptyTerm=null,this.timestamp=!1,this.hrTimer=new o.HrTimer,this.logFd=-1,this.port=e.port,this.encoding=e.encoding||"utf8",this.timestamp=!!e.timestamp,this.useTerminal=!("useTerminal"in e)||e.useTerminal,this.useTerminal?this.createVSCodeTerminal(e):this.createVSCodeChanne(e),e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const s=`Could not open file ${e.logfile} for writing. ${t.toString()}`;r.window.showErrorMessage(s)}}}createName(e){const t=`SWO:${e.label||""}[port:${this.port}`;return this.useTerminal?t+"] console":t+", type: console]"}createVSCodeTerminal(e){const t={name:this.createName(e),prompt:"",inputMode:o.TerminalInputMode.DISABLED};this.ptyTerm=i.PtyTerminal.findExisting(t.name),this.ptyTerm?this.ptyTerm.clearTerminalBuffer():(this.ptyTerm=new i.PtyTerminal(t),this.ptyTerm.on("close",(()=>{this.ptyTerm=null})),e.showOnStartup&&this.ptyTerm.terminal.show())}createVSCodeChanne(e){this.output=r.window.createOutputChannel(this.createName(e)),e.showOnStartup&&(this.showOutputTimer=setTimeout((()=>{this.output.show(!0),this.showOutputTimer=null}),1))}pushOutput(e){e&&(this.useTerminal?this.ptyTerm&&this.ptyTerm.write(e):this.output.append(e))}createDateHeaderUs(){return this.timestamp?this.hrTimer.createDateTimestamp()+" ":""}softwareEvent(e){if(e.port!==this.port)return;const t=e.data.toString(this.encoding);if(this.logFd>=0)try{n.writeSync(this.logFd,t)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;r.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}for(const e of t)this.timeout&&(clearTimeout(this.timeout),this.timeout=null),"\n"!==e?(0===this.position&&this.pushOutput(this.createDateHeaderUs()),this.pushOutput(e),this.position+=1,this.timestamp&&this.position>0&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.pushOutput("\n"),this.position=0,this.timeout=null}),5e3))):(this.pushOutput("\n"),this.position=0)}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.output&&(this.output.dispose(),this.output=null),this.ptyTerm&&(this.ptyTerm.dispose(),this.ptyTerm=null),this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}},1887:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWORTTGraphProcessor=void 0;const r=s(6828),n=s(7147),i=s(4359),o=s(2361);class a extends o.EventEmitter{constructor(e){if(super(),this.format="graph",this.logFd=-1,this.port=e.port,this.encoding=e.encoding||"unsigned",this.scale=e.scale||1,this.graphId=e.graphId,e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const s=`Could not open file ${e.logfile} for writing. ${t.toString()}`;r.window.showErrorMessage(s)}}}softwareEvent(e){if(e.port!==this.port)return;var t,s;e.data.toString("hex");const o={type:"data",data:(t=e.data,s=this.encoding,(i.decoders[s]?i.decoders[s](t):i.decoders.unsigned(t))*this.scale),id:this.graphId};if(this.emit("message",o),this.logFd>=0)try{n.writeSync(this.logFd,e.data)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;r.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}t.SWORTTGraphProcessor=a},4359:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decoders=t.parseUQ=t.parseQ=t.parseUnsigned=t.parseSigned=t.parseFloat=void 0;const r=s(291),n=(new r.Parser).endianess("little").int32("value"),i=(new r.Parser).endianess("little").uint32("value"),o=(new r.Parser).endianess("little").floatle("value");function a(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return o.parse(e).value}function c(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return n.parse(e).value}function h(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return i.parse(e).value}function l(e,t,s){const r=c(e);return(r>>s)+(r&t)/t}function u(e,t,s){const r=h(e);return(r>>>s)+(r&t)/t}t.parseFloat=a,t.parseSigned=c,t.parseUnsigned=h,t.parseQ=l,t.parseUQ=u,t.decoders={signed:c,float:a,Q8_24:e=>l(e,16777215,24),Q16_16:e=>l(e,65535,16),Q24_8:e=>l(e,255,8),UQ8_24:e=>u(e,16777215,24),UQ16_16:e=>u(e,65535,16),UQ24_8:e=>u(e,255,8),unsigned:h}},1339:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FifoSWOSource=void 0;const r=s(7147),n=s(2361);class i extends n.EventEmitter{constructor(e){super(),this.SWOPath=e,this.connected=!1,this.stream=r.createReadStream(this.SWOPath,{highWaterMark:128,encoding:null,autoClose:!1}),this.stream.on("data",(e=>{this.emit("data",e)})),this.stream.on("close",(e=>{this.emit("disconnected")})),this.connected=!0}dispose(){this.stream.close()}}t.FifoSWOSource=i},3624:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSWOSource=void 0;const r=s(7147),n=s(6828),i=s(2361);class o extends i.EventEmitter{constructor(e,t=500){super(),this.SWOPath=e,this.timeout=t,this.connected=!1,this.fd=null,this.interval=null;const s=Date.now();!function i(o=1){t<=0||r.existsSync(e)?r.open(e,"r",((t,s)=>{t?n.window.showWarningMessage(`Unable to open path: ${e} - Unable to read SWO data.`):(this.fd=s,this.interval=setInterval(this.read.bind(this),2),this.connected=!0,this.emit("connected"))})):t>0&&(Date.now()-s>=t?n.window.showWarningMessage(`SWO File ${e} does not exist even after timeout of ${t}ms.`):setTimeout(i,Math.min(10,o+1)))}(1)}read(){const e=Buffer.alloc(64);r.read(this.fd,e,0,64,null,((e,t,s)=>{t>0&&this.emit("data",s.slice(0,t))}))}dispose(){this.emit("disconnected"),clearInterval(this.interval),r.closeSync(this.fd)}}t.FileSWOSource=o},1325:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialSWOSource=exports.findSerialPortModule=exports.findSerialPortModuleHelp=void 0;const events_1=__webpack_require__(2361),fs=__webpack_require__(7147),vscode=__webpack_require__(6828),path=__webpack_require__(1017);function findSerialPortModuleHelp(e){return`Node/npm module "serialport" not found. You can install this in one of two ways\n1. Install "Serial Monitor" VSCode extension. https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-serial-monitor\n2. or, you can compile the serialport module locally on your computer. Follow these instructions on a shell prompt\n    cd ${e}/binary_modules\n    bash ./build.sh ${process.versions.electron}\nIf you chose to compile locally, make sure NodeJS is installed on your system. Visit https://nodejs.org/en/download/`}function findSerialPortModule(e,t){const s=[],r=path.normalize(path.join(e,"binary_modules","electron-"+process.versions.electron,"node_modules"));if(fs.existsSync(r)&&fs.existsSync(path.join(r,"serialport")))s.push(r);else{const e="ms-vscode.vscode-serial-monitor",t=vscode.extensions.getExtension(e);t&&(s.push(path.join(t.extensionPath,"dist","node_modules")),s.push(path.join(t.extensionPath,"node_modules")))}let n=!1;for(const e of s)fs.existsSync(path.join(e,"serialport"))&&(-1===t.paths.indexOf(e)&&(console.log(`Adding ${e} to module search path`),t.paths.push(e)),n=!0);return n}exports.findSerialPortModuleHelp=findSerialPortModuleHelp,exports.findSerialPortModule=findSerialPortModule;class SerialSWOSource extends events_1.EventEmitter{constructor(device,baudRate,extensionPath){super(),this.device=device,this.baudRate=baudRate,this.serialPort=null,this.connected=!1;const mainModule=eval("require.main"),added=findSerialPortModule(extensionPath,mainModule);if(!added)return void vscode.window.showErrorMessage(findSerialPortModuleHelp(extensionPath));let SerialPort;try{if(SerialPort=mainModule.require("serialport").SerialPort,!SerialPort)return void vscode.window.showErrorMessage(findSerialPortModuleHelp(extensionPath))}catch(e){return void vscode.window.showErrorMessage(findSerialPortModuleHelp(extensionPath))}this.serialPort=new SerialPort(device,{baudRate,autoOpen:!1}),this.serialPort.on("data",(e=>{this.emit("data",e)})),this.serialPort.on("error",(e=>{vscode.window.showErrorMessage(`Unable to open serial port: ${device} - ${e.toString()}`)})),this.serialPort.on("open",(()=>{this.connected=!0,this.emit("connected")})),this.serialPort.open()}dispose(){this.serialPort&&(this.serialPort.close(),this.emit("disconnected"))}}exports.SerialSWOSource=SerialSWOSource},1337:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JLinkSocketRTTSource=t.SocketRTTSource=t.SocketSWOSource=void 0;const r=s(2361),n=s(1808),i=s(3200);class o extends r.EventEmitter{constructor(e){super(),this.tcpPort=e,this.client=null,this.connected=!1,this.connError=null,this.nTries=1}start(e=1200){const t=i.parseHostPort(this.tcpPort);return new Promise(((s,r)=>{this.timer=setInterval((()=>{this.client=n.createConnection(t,(()=>{clearInterval(this.timer),this.timer=void 0,this.connected=!0,this.emit("connected"),console.log(`Connected SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}\n`),s()})),this.client.on("data",(e=>{this.emit("data",e)})),this.client.on("end",(()=>{this.dispose()})),this.client.on("close",(()=>{this.disposeClient()})),this.client.on("error",(t=>{const s=t.code;"ECONNRESET"===s&&this.connected?this.dispose():"ECONNREFUSED"===s?this.nTries>e?(t.message=`Error: Failed to connect to port ${this.tcpPort} ${s}`,console.log(`Failed ECONNREFUSED SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}`),this.connError=t,this.emit("error",t),r(t),this.dispose()):(this.nTries%10==0&&console.log(`Trying SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}`),this.nTries++,this.disposeClient()):(t.message=`Error: Ignored unknown error on port ${this.tcpPort} ${s}`,this.emit("error",t),this.connected||(this.connError=t,r(t)),this.dispose())}))}),250)}))}disposeClient(){try{if(this.connected&&(this.connected=!1,this.emit("disconnected")),this.client){const e=this.client;this.client=null,e.destroy()}}catch(e){console.log(`Socked destroy error ${e}`)}}dispose(){this.timer&&(clearInterval(this.timer),this.timer=void 0),this.disposeClient()}}t.SocketSWOSource=o;class a extends o{constructor(e,t){super(e),this.channel=t}write(e){try{this.client.write(e)}catch(e){throw e}}}t.SocketRTTSource=a,t.JLinkSocketRTTSource=class extends a{constructor(e,t){super(e,t),this.channel=t,this.on("connected",(()=>{this.write(`$$SEGGER_TELNET_ConfigStr=RTTCh;${t}$$`)}))}}},2942:(e,t)=>{"use strict";function s(e,t){let s=0;const r=e+t-1;for(let t=e;t<=r;t++)s=(s|1<<t)>>>0;return s}function r(e){return/^0b([01]+)$/i.test(e)?parseInt(e.substring(2),2):/^0x([0-9a-f]+)$/i.test(e)?parseInt(e.substring(2),16):/^[0-9]+/i.test(e)?parseInt(e,10):/^#[0-1]+/i.test(e)?parseInt(e.substring(1),2):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDimIndex=t.parseInteger=t.extractBits=t.createMask=t.binaryFormat=t.hexFormat=void 0,t.hexFormat=function(e,t=8,s=!0){let r=(e>>>0).toString(16);return r=r.padStart(t,"0"),s?"0x"+r:r},t.binaryFormat=function(e,t=0,s=!0,r=!1){let n=(e>>>0).toString(2);for(;n.length<t;)n="0"+n;if(r){const e=4-n.length%4;for(let t=0;t<e;t++)n="0"+n;const t=n.match(/[01]{4}/g);n=t.join(" "),n=n.substring(e)}return s?"0b"+n:n},t.createMask=s,t.extractBits=function(e,t,r){return(e&s(t,r))>>>t>>>0},t.parseInteger=r,t.parseDimIndex=function(e,t){if(-1!==e.indexOf(",")){const s=e.split(",").map((e=>e.trim()));if(s.length!==t)throw new Error("dimIndex Element has invalid specification.");return s}if(/^([0-9]+)\-([0-9]+)$/i.test(e)){const s=e.split("-").map((e=>r(e))),n=s[0];if(s[1]-n+1<t)throw new Error("dimIndex Element has invalid specification.");const i=[];for(let e=0;e<t;e++)i.push(`${n+e}`);return i}if(/^[a-zA-Z]\-[a-zA-Z]$/.test(e)){const s=e.charCodeAt(0);if(e.charCodeAt(2)-s+1<t)throw new Error("dimIndex Element has invalid specification.");const r=[];for(let e=0;e<t;e++)r.push(String.fromCharCode(s+e));return r}return[]}},9493:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralBaseNode=t.BaseNode=void 0;const r=s(3200);class n{constructor(e){this.parent=e,this.expanded=!1}getParent(){return this.parent}getCommand(){}}t.BaseNode=n,t.PeripheralBaseNode=class extends n{constructor(e){super(e),this.parent=e,this.format=r.NumberFormat.Auto,this.pinned=!1}selected(){return Promise.resolve(!1)}}},6350:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldNode=void 0;const r=s(9493),n=s(6828),i=s(3200);class o extends r.BaseNode{constructor(e,t,s,r){super(r),this.name=e,this.offset=t,this.size=s,this.register=r,this.prevValue="",this.value=""}getChildren(){return[]}getTreeItem(){const e=this.register.extractBits(this.offset,this.size);this.value=e.toString();const t={label:this.name+" "+this.value};this.prevValue&&this.prevValue!==this.value&&(t.highlights=[[this.name.length+1,t.label.length]]),this.prevValue=this.value;const s=new n.TreeItem(t,n.TreeItemCollapsibleState.None);return s.contextValue="field",s.tooltip="$"+this.register.name+"."+this.name+"\n"+i.toStringDecHexOctBin(e),s}getCopyValue(){return this.register.extractBits(this.offset,this.size).toString()}}t.FieldNode=o},2370:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageNode=void 0;const r=s(9493),n=s(6828);class i extends r.PeripheralBaseNode{constructor(e,t){super(null),this.message=e,this.tooltip=t}getChildren(){return[]}getTreeItem(){const e=new n.TreeItem(this.message,n.TreeItemCollapsibleState.None);return this.tooltip&&(e.tooltip=this.tooltip),e}getCopyValue(){return null}performUpdate(){return Promise.resolve(!1)}updateData(){return Promise.resolve(!1)}getPeripheral(){return null}collectRanges(e){}saveState(e){return[]}findByPath(e){return null}}t.MessageNode=i},4051:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralClusterNode=void 0;const r=s(6828),n=s(9493),i=s(7525),o=s(3200),a=s(2942);class c extends n.PeripheralBaseNode{constructor(e,t){super(e),this.parent=e,this.name=t.name,this.description=t.description,this.offset=t.addressOffset,this.accessType=t.accessType||i.AccessType.ReadWrite,this.size=t.size||e.size,this.resetValue=t.resetValue||e.resetValue,this.children=[],this.parent.addChild(this)}getTreeItem(){const e=`${this.name} [${a.hexFormat(this.offset,0)}]`,t=new r.TreeItem(e,this.expanded?r.TreeItemCollapsibleState.Expanded:r.TreeItemCollapsibleState.Collapsed);return t.contextValue="cluster",t.tooltip=this.description||void 0,t}getChildren(){return this.children}setChildren(e){this.children=e.slice(0,e.length),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getBytes(e,t){return this.parent.getBytes(this.offset+e,t)}getAddress(e){return this.parent.getAddress(this.offset+e)}getOffset(e){return this.parent.getOffset(this.offset+e)}getFormat(){return this.format!==o.NumberFormat.Auto?this.format:this.parent.getFormat()}updateData(){return new Promise(((e,t)=>{const s=this.children.map((e=>e.updateData()));Promise.all(s).then((t=>{e(!0)})).catch((e=>{t("Failed")}))}))}saveState(e){const t=[];return(this.format!==o.NumberFormat.Auto||this.expanded)&&t.push({node:`${e}.${this.name}`,expanded:this.expanded,format:this.format}),this.children.forEach((s=>{t.push(...s.saveState(`${e}.${this.name}`))})),t}findByPath(e){if(0===e.length)return this;{const t=this.children.find((t=>t.name===e[0]));return t?t.findByPath(e.slice(1)):null}}collectRanges(e){this.children.map((t=>{t.collectRanges(e)}))}getPeripheral(){return this.parent.getPeripheral()}getCopyValue(){throw new Error("Method not implemented.")}performUpdate(){throw new Error("Method not implemented.")}}t.PeripheralClusterNode=c},3822:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralFieldNode=t.EnumeratedValue=void 0;const r=s(6828),n=s(9493),i=s(7525),o=s(3200),a=s(2942);t.EnumeratedValue=class{constructor(e,t,s){this.name=e,this.description=t,this.value=s}};class c extends n.PeripheralBaseNode{constructor(e,t){if(super(e),this.parent=e,this.prevValue="",this.name=t.name,this.description=t.description,this.offset=t.offset,this.width=t.width,t.accessType?e.accessType===i.AccessType.ReadOnly&&t.accessType!==i.AccessType.ReadOnly?this.accessType=i.AccessType.ReadOnly:e.accessType===i.AccessType.WriteOnly&&t.accessType!==i.AccessType.WriteOnly?this.accessType=i.AccessType.WriteOnly:this.accessType=t.accessType:this.accessType=e.accessType,t.enumeration){this.enumeration=t.enumeration,this.enumerationMap={},this.enumerationValues=[];for(const e in t.enumeration){const s=t.enumeration[e].name;this.enumerationValues.push(s),this.enumerationMap[s]=e}}this.parent.addChild(this)}getTreeItem(){const e="reserved"===this.name.toLowerCase(),t=e?"field-res":this.parent.accessType===i.AccessType.ReadOnly?"field-ro":"field",s=this.offset,n=this.offset+this.width-1,o=`${this.name} [${n}:${s}]`,a=this.getFormattedValue(this.getFormat()),c={label:o+" "+a};a!==this.prevValue&&(c.highlights=[[o.length+1,c.label.length]],this.prevValue=a);const h=new r.TreeItem(c,r.TreeItemCollapsibleState.None);return h.contextValue=t,h.tooltip=this.generateTooltipMarkdown(e),h}generateTooltipMarkdown(e){const t=new r.MarkdownString("",!0);t.isTrusted=!0;const s=`${a.hexFormat(this.parent.getAddress())}${this.getFormattedRange()}`;if(e)return t.appendMarkdown(`| ${this.name}@${s} | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | *Reserved* |\n`),t.appendMarkdown("|:---|:---:|---:|"),t;const n=this.getFormattedValue(this.getFormat(),!0),o=this.accessType===i.AccessType.ReadOnly?"(Read Only)":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(t.appendMarkdown(`| ${this.name}@${s} | ${o} | *${n}* |\n`),t.appendMarkdown("|:---|:---:|---:|\n\n"),this.accessType!==i.AccessType.WriteOnly&&t.appendMarkdown(`**Reset Value:** ${this.formatValue(this.getResetValue(),this.getFormat())}\n`),t.appendMarkdown("\n____\n\n"),t.appendMarkdown(this.description),t.appendMarkdown("\n_____\n\n"),this.accessType===i.AccessType.WriteOnly)return t;const c=this.parent.extractBits(this.offset,this.width),h=a.hexFormat(c,Math.ceil(this.width/4),!0),l=c.toString(),u=a.binaryFormat(c,this.width);if(this.enumeration){t.appendMarkdown("| Enumeration Value &nbsp;&nbsp; | Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),t.appendMarkdown("|:---|:---|:---|:---|\n");let e="Unknown";this.enumeration[c]&&(e=this.enumeration[c].name),t.appendMarkdown(`| ${e} &nbsp;&nbsp; | ${h} &nbsp;&nbsp; | ${l} &nbsp;&nbsp; | ${u} &nbsp;&nbsp; |\n\n`),this.enumeration[c]&&this.enumeration[c].description&&t.appendMarkdown(this.enumeration[c].description)}else t.appendMarkdown("| Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),t.appendMarkdown("|:---|:---|:---|\n"),t.appendMarkdown(`| ${h} &nbsp;&nbsp; | ${l} &nbsp;&nbsp; | ${u} &nbsp;&nbsp; |\n`);return t}getFormattedRange(){const e=this.offset;return`[${this.offset+this.width-1}:${e}]`}getCurrentValue(){return this.parent.extractBits(this.offset,this.width)}getResetValue(){return this.parent.extractBitsFromReset(this.offset,this.width)}getFormattedValue(e,t=!0){return this.formatValue(this.getCurrentValue(),e,t)}formatValue(e,t,s=!0){if(this.accessType===i.AccessType.WriteOnly)return"(Write Only)";let r="";switch(t){case o.NumberFormat.Decimal:r=e.toString();break;case o.NumberFormat.Binary:r=a.binaryFormat(e,this.width);break;case o.NumberFormat.Hexadecimal:r=a.hexFormat(e,Math.ceil(this.width/4),!0);break;default:r=this.width>=4?a.hexFormat(e,Math.ceil(this.width/4),!0):a.binaryFormat(e,this.width)}return s&&this.enumeration&&(r=this.enumeration[e]?`${this.enumeration[e].name} (${r})`:`Unkown Enumeration Value (${r})`),r}getEnumerationValue(e){return this.enumeration?this.enumeration[e]?this.enumeration[e].name:void 0:null}getChildren(){return[]}performUpdate(){return new Promise(((e,t)=>{this.enumeration?r.window.showQuickPick(this.enumerationValues).then((s=>{if(void 0===s)return t("Input not selected");const r=this.enumerationMap[s];this.parent.updateBits(this.offset,this.width,r).then(e,t)})):r.window.showInputBox({prompt:"Enter new value: (prefix hex with 0x, binary with 0b)",value:this.getCopyValue()}).then((s=>{const r=a.parseInteger(s);if(void 0===r)return t("Unable to parse input value.");this.parent.updateBits(this.offset,this.width,r).then(e,t)}))}))}getCopyValue(){const e=this.parent.extractBits(this.offset,this.width);switch(this.getFormat()){case o.NumberFormat.Decimal:return e.toString();case o.NumberFormat.Binary:return a.binaryFormat(e,this.width);case o.NumberFormat.Hexadecimal:return a.hexFormat(e,Math.ceil(this.width/4),!0);default:return this.width>=4?a.hexFormat(e,Math.ceil(this.width/4),!0):a.binaryFormat(e,this.width)}}updateData(){return Promise.resolve(!0)}getFormat(){return this.format!==o.NumberFormat.Auto?this.format:this.parent.getFormat()}saveState(e){return this.format!==o.NumberFormat.Auto?[{node:`${e}.${this.name}`,format:this.format}]:[]}findByPath(e){return 0===e.length?this:null}getPeripheral(){return this.parent.getPeripheral()}collectRanges(e){throw new Error("Method not implemented.")}}t.PeripheralFieldNode=c},9969:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralNode=void 0;const r=s(6828),n=s(9493),i=s(1644),o=s(3200),a=s(4751),c=s(2942),h=s(6828);class l extends n.PeripheralBaseNode{constructor(e,t,s){super(null),this.session=e,this.gapThreshold=t,this.name=s.name,this.baseAddress=s.baseAddress,this.totalLength=s.totalLength,this.description=s.description,this.groupName=s.groupName||"",this.resetValue=s.resetValue||0,this.size=s.size||32,this.children=[],this.addrRanges=[]}getPeripheral(){return this}getTreeItem(){const e=`${this.name} @ ${c.hexFormat(this.baseAddress)}`,t=new r.TreeItem(e,this.expanded?r.TreeItemCollapsibleState.Expanded:r.TreeItemCollapsibleState.Collapsed);return t.contextValue=this.pinned?"peripheral.pinned":"peripheral",t.tooltip=this.description||void 0,this.pinned&&(t.iconPath=new r.ThemeIcon("pinned")),t}getCopyValue(){throw new Error("Method not implemented.")}getChildren(){return this.children}setChildren(e){this.children=e,this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getBytes(e,t){try{return new Uint8Array(this.currentValue.slice(e,e+t))}catch(e){return new Uint8Array(0)}}getAddress(e){return this.baseAddress+e}getOffset(e){return e}getFormat(){return this.format}updateData(){return new Promise(((e,t)=>{this.expanded?this.readMemory().then((s=>{this.updateChildData(e,t,null)}),(e=>{const s=e.message||"unknown error",r=`Failed to update peripheral ${this.name}: ${s}`;h.debug.activeDebugConsole&&h.debug.activeDebugConsole.appendLine(r),this.updateChildData(null,t,new Error(r))})):e(!1)}))}updateChildData(e,t,s){const r=this.children.map((e=>e.updateData()));Promise.all(r).then((r=>{s?t(s):e(!0)})).catch((e=>{const r=e.message||"unknown error",n=`Failed to update peripheral ${this.name}: ${r}`;h.debug.activeDebugConsole&&h.debug.activeDebugConsole.appendLine(n),t(s||new Error(n))}))}readMemory(){return this.currentValue||(this.currentValue=new Array(this.totalLength)),a.MemReadUtils.readMemoryChunks(this.session,this.baseAddress,this.addrRanges,this.currentValue)}collectRanges(){const e=[];this.children.map((t=>t.collectRanges(e))),e.sort(((e,t)=>e.base<t.base?-1:e.base>t.base?1:0)),e.map((e=>e.base+=this.baseAddress));const t=this.gapThreshold;let s=[];if(t>=0){let r=null;for(const n of e)if(r&&r.nxtAddr()+t>=n.base){const e=Math.max(r.nxtAddr(),n.nxtAddr());r.length=e-r.base}else s.push(n),r=n}else s=e;this.addrRanges=i.AddressRangesUtils.splitIntoChunks(s,4096,this.name,this.totalLength)}getPeripheralNode(){return this}selected(){return this.performUpdate()}saveState(e){const t=[];return(this.format!==o.NumberFormat.Auto||this.expanded||this.pinned)&&t.push({node:`${this.name}`,expanded:this.expanded,format:this.format,pinned:this.pinned}),this.children.forEach((e=>{t.push(...e.saveState(`${this.name}`))})),t}findByPath(e){if(0===e.length)return this;{const t=this.children.find((t=>t.name===e[0]));return t?t.findByPath(e.slice(1)):null}}performUpdate(){throw new Error("Method not implemented.")}static compare(e,t){return e.pinned&&t.pinned||!e.pinned&&!t.pinned?e.groupName!==t.groupName?e.groupName>t.groupName?1:-1:e.name!==t.name?e.name>t.name?1:-1:0:e.pinned?-1:1}}t.PeripheralNode=l},2532:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralRegisterNode=void 0;const r=s(6828),n=s(9493),i=s(7525),o=s(2942),a=s(3200),c=s(1644);class h extends n.PeripheralBaseNode{constructor(e,t){super(e),this.parent=e,this.prevValue="",this.name=t.name,this.description=t.description,this.offset=t.addressOffset,this.accessType=t.accessType||e.accessType,this.size=t.size||e.size,this.resetValue=void 0!==t.resetValue?t.resetValue:e.resetValue,this.currentValue=this.resetValue,this.hexLength=Math.ceil(this.size/4),this.maxValue=Math.pow(2,this.size),this.binaryRegex=new RegExp(`^0b[01]{1,${this.size}}$`,"i"),this.hexRegex=new RegExp(`^0x[0-9a-f]{1,${this.hexLength}}$`,"i"),this.children=[],this.parent.addChild(this)}reset(){this.currentValue=this.resetValue}extractBits(e,t){return o.extractBits(this.currentValue,e,t)}updateBits(e,t,s){return new Promise(((r,n)=>{const i=Math.pow(2,t);if(s>i)return n(`Value entered is invalid. Maximum value for this field is ${i-1} (${o.hexFormat(i-1,0)})`);{const i=o.createMask(e,t),a=s<<e,c=this.currentValue&~i|a;this.updateValueInternal(c).then(r,n)}}))}getTreeItem(){const e=`${this.name} @ ${o.hexFormat(this.offset,0)}`,t=this.children&&this.children.length>0?this.expanded?r.TreeItemCollapsibleState.Expanded:r.TreeItemCollapsibleState.Collapsed:r.TreeItemCollapsibleState.None,s=this.getFormattedValue(this.getFormat()),n={label:e+" "+s};s!==this.prevValue&&(n.highlights=[[e.length+1,n.label.length]],this.prevValue=s);const a=new r.TreeItem(n,t);return a.contextValue=this.accessType===i.AccessType.ReadWrite?"registerRW":this.accessType===i.AccessType.ReadOnly?"registerRO":"registerWO",a.tooltip=this.generateTooltipMarkdown(),a}generateTooltipMarkdown(){const e=new r.MarkdownString("",!0);e.isTrusted=!0;const t=`${o.hexFormat(this.getAddress())}`,s=this.getFormattedValue(this.getFormat()),n=this.accessType===i.AccessType.ReadOnly?"(Read Only)":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(e.appendMarkdown(`| ${this.name}@${t} | ${n} | *${s}* |\n`),e.appendMarkdown("|:---|:---:|---:|\n\n"),this.accessType!==i.AccessType.WriteOnly&&e.appendMarkdown(`**Reset Value:** ${this.getFormattedResetValue(this.getFormat())}\n`),e.appendMarkdown("\n____\n\n"),e.appendMarkdown(this.description),e.appendMarkdown("\n_____\n\n"),this.accessType===i.AccessType.WriteOnly)return e;const c=this.getFormattedValue(a.NumberFormat.Hexadecimal),h=this.getFormattedValue(a.NumberFormat.Decimal),l=this.getFormattedValue(a.NumberFormat.Binary);e.appendMarkdown("| Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),e.appendMarkdown("|:---|:---|:---|\n"),e.appendMarkdown(`| ${c} &nbsp;&nbsp; | ${h} &nbsp;&nbsp; | ${l} &nbsp;&nbsp; |\n\n`);const u=this.getChildren();return 0===u.length||(e.appendMarkdown("**Fields**\n\n"),e.appendMarkdown("| Field | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Bit-Range | Value |\n"),e.appendMarkdown("|:---|:---:|:---|:---|\n"),u.forEach((t=>{e.appendMarkdown(`| ${t.name} | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | ${t.getFormattedRange()} | ${t.getFormattedValue(t.getFormat(),!0)} |\n`)}))),e}getFormattedValue(e){return this.formatValue(this.currentValue,e)}getFormattedResetValue(e){return this.formatValue(this.resetValue,e)}formatValue(e,t){if(this.accessType===i.AccessType.WriteOnly)return"(Write Only)";switch(t){case a.NumberFormat.Decimal:return e.toString();case a.NumberFormat.Binary:return o.binaryFormat(e,4*this.hexLength);default:return o.hexFormat(e,this.hexLength,!0)}}extractBitsFromReset(e,t){return o.extractBits(this.resetValue,e,t)}getChildren(){return this.children||[]}setChildren(e){this.children=e.slice(0,e.length),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getFormat(){return this.format!==a.NumberFormat.Auto?this.format:this.parent.getFormat()}getCopyValue(){switch(this.getFormat()){case a.NumberFormat.Decimal:return this.currentValue.toString();case a.NumberFormat.Binary:return o.binaryFormat(this.currentValue,4*this.hexLength);default:return o.hexFormat(this.currentValue,this.hexLength)}}performUpdate(){return new Promise(((e,t)=>{r.window.showInputBox({prompt:"Enter new value: (prefix hex with 0x, binary with 0b)",value:this.getCopyValue()}).then((s=>{let r;if(s.match(this.hexRegex))r=parseInt(s.substr(2),16);else if(s.match(this.binaryRegex))r=parseInt(s.substr(2),2);else{if(!s.match(/^[0-9]+/))return t("Value entered is not a valid format.");if(r=parseInt(s,10),r>=this.maxValue)return t(`Value entered (${r}) is greater than the maximum value of ${this.maxValue}`)}this.updateValueInternal(r).then(e,t)}))}))}getAddress(){return this.parent.getAddress(this.offset)}updateValueInternal(e){const t=this.parent.getAddress(this.offset),s=[],n=this.size/8;for(let t=0;t<n;t++){const r=255&e;e>>>=8;let n=r.toString(16);1===n.length&&(n="0"+n),s[t]=n}return new Promise(((e,n)=>{r.debug.activeDebugSession.customRequest("write-memory",{address:t,data:s.join("")}).then((t=>{this.parent.updateData().then((()=>{}),(()=>{})),e(!0)}),n)}))}updateData(){const e=this.size/8,t=this.parent.getBytes(this.offset,e),s=Buffer.from(t);switch(e){case 1:this.currentValue=s.readUInt8(0);break;case 2:this.currentValue=s.readUInt16LE(0);break;case 4:this.currentValue=s.readUInt32LE(0);break;default:r.window.showErrorMessage(`Register ${this.name} has invalid size: ${this.size}. Should be 8, 16 or 32.`)}return this.children.forEach((e=>e.updateData())),Promise.resolve(!0)}saveState(e){const t=[];return(this.format!==a.NumberFormat.Auto||this.expanded)&&t.push({node:`${e}.${this.name}`,expanded:this.expanded,format:this.format}),this.children.forEach((s=>{t.push(...s.saveState(`${e}.${this.name}`))})),t}findByPath(e){return 0===e.length?this:1===e.length?this.children.find((t=>t.name===e[0])):null}getPeripheral(){return this.parent.getPeripheral()}collectRanges(e){const t=this.parent.getOffset(this.offset);e.push(new c.AddrRange(t,this.size/8))}}t.PeripheralRegisterNode=h},9797:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterNode=void 0;const r=s(6828),n=s(9493),i=s(6350),o=s(3200),a=s(2942);class c extends n.BaseNode{constructor(e,t){super(null),this.name=e,this.index=t,this.name=this.name,"XPSR"===e.toUpperCase()||"CPSR"===e.toUpperCase()?this.fields=[new i.FieldNode("Negative Flag (N)",31,1,this),new i.FieldNode("Zero Flag (Z)",30,1,this),new i.FieldNode("Carry or borrow flag (C)",29,1,this),new i.FieldNode("Overflow Flag (V)",28,1,this),new i.FieldNode("Saturation Flag (Q)",27,1,this),new i.FieldNode("GE",16,4,this),new i.FieldNode("Interrupt Number",0,8,this),new i.FieldNode("ICI/IT",25,2,this),new i.FieldNode("ICI/IT",10,6,this),new i.FieldNode("Thumb State (T)",24,1,this)]:"CONTROL"===e.toUpperCase()&&(this.fields=[new i.FieldNode("FPCA",2,1,this),new i.FieldNode("SPSEL",1,1,this),new i.FieldNode("nPRIV",0,1,this)]),this.currentValue=0,this.currentNaturalValue="0x00000000",this.prevNaturalValue=""}extractBits(e,t){return a.extractBits(this.currentValue,e,t)}getTreeItem(){const e=this.fields&&this.fields.length>0?this.expanded?r.TreeItemCollapsibleState.Expanded:r.TreeItemCollapsibleState.Collapsed:r.TreeItemCollapsibleState.None,t={label:this.name+" "+this.currentNaturalValue};this.prevNaturalValue&&this.prevNaturalValue!==this.currentNaturalValue&&(t.highlights=[[this.name.length+1,t.label.length]]),this.prevNaturalValue=this.currentNaturalValue;const s=new r.TreeItem(t,e);return s.contextValue="register",/^[sd][0-9]/.test(this.name)||(s.tooltip="$"+this.name+"\n"+o.toStringDecHexOctBin(parseInt(this.currentNaturalValue))),s}getChildren(){return this.fields}setValue(e){if(this.currentNaturalValue=e,"CONTROL"===this.name.toUpperCase()||"XPSR"===this.name.toUpperCase()||"CPSR"===this.name.toUpperCase())if(this.currentNaturalValue.startsWith("0x"))this.currentValue=parseInt(this.currentNaturalValue,16);else{if(this.currentValue=parseInt(this.currentNaturalValue,10),this.currentValue<0){const e=(4294967295&this.currentValue)>>>0;this.currentValue=e}let e=this.currentValue.toString(16);for(;e.length<8;)e="0"+e;this.currentNaturalValue="0x"+e}}getCopyValue(){return this.currentNaturalValue}_saveState(){const e=[];return this.fields&&this.fields.length>0&&this.expanded&&e.push({node:this.name,expanded:this.expanded}),e}}t.RegisterNode=c},2028:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralTreeProvider=t.PeripheralTreeForSession=void 0;const n=s(6828),i=s(7147),o=s(1017),a=s(6828),c=s(4942),h=s(9493),l=s(9969),u=s(7525),d=s(2370),p=s(6292);class f extends h.PeripheralBaseNode{constructor(e,t,s){super(),this.session=e,this.state=t,this.fireCb=s,this.peripherials=[],this.loaded=!1,this.gapThreshold=16,this.errMessage="No SVD file loaded";try{this.wsFolderPath=this.session.workspaceFolder.uri.fsPath}catch(e){}this.myTreeItem=new a.TreeItem(this.session.name,this.state)}saveState(e){const t=[];this.peripherials.forEach((e=>{t.push(...e.saveState())}));try{e&&(i.mkdirSync(o.dirname(e),{recursive:!0}),i.writeFileSync(e,JSON.stringify(t),{encoding:"utf8",flag:"w"}))}catch(e){n.window.showWarningMessage(`Unable to save periperal preferences ${e}`)}return t}loadSVD(){return new Promise(((e,t)=>{try{this.errMessage=`Loading ${this.svdFileName}`,u.SVDParser.parseSVD(this.session,this.svdFileName,this.gapThreshold).then((t=>{this.peripherials=t,this.loaded=!0,this.errMessage="",e(!0)})).catch((e=>{this.peripherials=[],this.loaded=!1,t(e)}))}catch(e){t(e)}}))}performUpdate(){throw new Error("Method not implemented.")}updateData(){if(this.loaded){const e=this.peripherials.map((e=>e.updateData()));Promise.all(e).then((e=>{this.fireCb()}),(e=>{this.fireCb()}))}return Promise.resolve(!0)}getPeripheral(){throw new Error("Method not implemented.")}collectRanges(e){throw new Error("Method not implemented.")}findByPath(e){throw new Error("Method not implemented.")}findNodeByPath(e){const t=e.split("."),s=this.peripherials.find((e=>e.name===t[0]));return s?s.findByPath(t.slice(1)):null}refresh(){this.fireCb()}getTreeItem(e){return e?e.getTreeItem():this.myTreeItem}getChildren(e){return this.loaded?e?e.getChildren():this.peripherials:this.loaded?this.peripherials:[new d.MessageNode(this.errMessage)]}getCopyValue(){}sessionStarted(e,t){if(this.svdFileName=e,!o.isAbsolute(this.svdFileName)&&this.wsFolderPath){const e=o.normalize(o.join(this.wsFolderPath,this.svdFileName));this.svdFileName=e}return this.gapThreshold="number"==typeof t&&t<0?-1:("number"==typeof t?Math.max(0,Math.min(t,32)):16)+7&-8,new Promise(((e,t)=>{this.peripherials=[],this.fireCb(),this.loadSVD().then((()=>{const t=this.stateFileName();if(t&&i.existsSync(t)){const e=i.readFileSync(t,"utf8");JSON.parse(e).forEach((e=>{const t=this.findNodeByPath(e.node);t&&(t.expanded=e.expanded||!1,t.pinned=e.pinned||!1,t.format=e.format)}))}this.peripherials.sort(l.PeripheralNode.compare),this.fireCb(),e(void 0),c.default.sendEvent("Peripheral View","Used",this.svdFileName)}),(t=>{this.errMessage=`Unable to parse SVD file ${this.svdFileName}: ${t.toString()}`,n.window.showErrorMessage(this.errMessage),n.debug.activeDebugConsole&&n.debug.activeDebugConsole.appendLine(this.errMessage),this.fireCb(),e(void 0),c.default.sendEvent("Peripheral View","Error",t.toString())}))}))}stateFileName(){return this.wsFolderPath?o.join(this.wsFolderPath,".vscode",".cortex-debug.peripherals.state.json"):void 0}sessionTerminated(){this.saveState(this.stateFileName())}togglePinPeripheral(e){e.pinned=!e.pinned,this.peripherials.sort(l.PeripheralNode.compare)}}t.PeripheralTreeForSession=f,t.PeripheralTreeProvider=class{constructor(){this._onDidChangeTreeData=new n.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.sessionPeripheralsMap=new Map,this.oldState=new Map}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return null==e?void 0:e.getTreeItem()}getChildren(e){const t=Array.from(this.sessionPeripheralsMap.values());return e?e.getChildren():0===t.length?[new d.MessageNode("SVD: No active debug sessions or no SVD files specified")]:1===t.length?t[0].getChildren():t}debugSessionStarted(e,t,s){return new Promise(((i,o)=>r(this,void 0,void 0,(function*(){if(!t)return void i(void 0);if(this.sessionPeripheralsMap.get(e.id))return this._onDidChangeTreeData.fire(void 0),n.window.showErrorMessage(`Internal Error: Session ${e.name} id=${e.id} already in the tree view?`),void i(void 0);let r=this.oldState.get(e.name);void 0===r&&(r=0===this.sessionPeripheralsMap.size?n.TreeItemCollapsibleState.Expanded:n.TreeItemCollapsibleState.Collapsed);const o=new f(e,r,(()=>{this._onDidChangeTreeData.fire(void 0)}));this.sessionPeripheralsMap.set(e.id,o);try{yield o.sessionStarted(t,s)}catch(e){n.window.showErrorMessage(`Internal Error: Unexpected rejection of promise ${e}`)}finally{this._onDidChangeTreeData.fire(void 0)}}))))}debugSessionTerminated(e){const t=this.sessionPeripheralsMap.get(e.id);return t&&(this.oldState.set(e.name,t.myTreeItem.collapsibleState),this.sessionPeripheralsMap.delete(e.id),t.sessionTerminated(),this._onDidChangeTreeData.fire(void 0)),Promise.resolve(!0)}debugStopped(e){const t=this.sessionPeripheralsMap.get(e.id);t&&t.updateData()}debugContinued(){}togglePinPeripheral(e){const t=p.CortexDebugExtension.getActiveCDSession(),s=this.sessionPeripheralsMap.get(t.id);s&&(s.togglePinPeripheral(e),this._onDidChangeTreeData.fire(void 0))}}},3213:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterTreeProvider=t.RegisterTreeForSession=void 0;const r=s(6828),n=s(7147),i=s(1017),o=s(6828),a=s(3200),c=s(9797),h=s(2370),l=s(9493),u='Due to a VSCode limitation, this Panel cannot track current thread/frame so it can be inaccurate. You can find proper Registers in the VARIABLES panel where it is also possible to also SET registers. We may bring this Panel back when VSCode provides an API to track the "CALL STACK" Panel';class d extends l.BaseNode{constructor(e,t,s){super(),this.session=e,this.state=t,this.fireCb=s,this.registers=[],this.registerMap={},this.loaded=!1;try{this.wsFolderPath=this.session.workspaceFolder.uri.fsPath}catch(e){}this.myTreeItem=new r.TreeItem(this.session.name,this.state),this.myTreeItem.tooltip=u}getChildren(e){return this.loaded&&this.registers.length>0?e?e.getChildren():this.registers:this.loaded?this.registers:[new h.MessageNode("Session not in active/available.")]}getTreeItem(e){return e?e.getTreeItem():this.myTreeItem}getCopyValue(){}refresh(){this.loaded?this._refreshRegisterValues():this.session.customRequest("read-register-list").then((e=>{this.createRegisters(e),this._refreshRegisterValues()}),(e=>{}))}_refreshRegisterValues(){const e={hex:!o.workspace.getConfiguration("cortex-debug").get(a.CortexDebugKeys.REGISTER_DISPLAY_MODE)};this.session.customRequest("read-registers",e).then((e=>{e.forEach((e=>{const t=parseInt(e.number,10),s=this.registerMap[t];s&&s.setValue(e.value)})),this.fireCb()}),(e=>{}))}getStateFilename(){if(this.wsFolderPath)return i.join(this.wsFolderPath,".vscode",".cortex-debug.registers.state.json")}createRegisters(e){this.registerMap={},this.registers=[],e.forEach(((e,t)=>{if(e){const s=new c.RegisterNode(e,t);this.registers.push(s),this.registerMap[t]=s}})),this.loaded=!0;try{const e=this.getStateFilename();if(e&&n.existsSync(e)){const t=n.readFileSync(e,"utf8");JSON.parse(t).forEach((e=>{if(-1===e.node.indexOf(".")){const t=this.registers.find((t=>t.name===e.node));t&&e.expanded&&(t.expanded=e.expanded)}else{const[t,s]=e.node.split("."),r=this.registers.find((e=>e.name===t));r&&r.getChildren().find((e=>e.name===s))}}))}}catch(e){}this.fireCb()}sessionTerminated(){try{const e=this.getStateFilename();if(e){const t=[];this.registers.forEach((e=>{t.push(...e._saveState())})),n.mkdirSync(i.dirname(e),{recursive:!0}),n.writeFileSync(e,JSON.stringify(t),{encoding:"utf8",flag:"w"})}}catch(e){o.window.showWarningMessage(`Unable to save register preferences ${e}`)}}updateRegisterValues(e){e.forEach((e=>{this.registerMap[e.number].setValue(e.value)})),this.fireCb()}}t.RegisterTreeForSession=d,t.RegisterTreeProvider=class{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.sessionRegistersMap=new Map,this.oldState=new Map}refresh(e){const t=this.sessionRegistersMap.get(e.id);t&&t.refresh()}getTreeItem(e){return null==e?void 0:e.getTreeItem()}getChildren(e){const t=Array.from(this.sessionRegistersMap.values());return e?e.getChildren():0===t.length?[new h.MessageNode("DEPRECATION NOTICE: Hover for more info.",u)]:1===t.length?t[0].getChildren():t}debugSessionTerminated(e){const t=this.sessionRegistersMap.get(e.id);t&&(this.oldState.set(e.name,t.myTreeItem.collapsibleState),this.sessionRegistersMap.delete(e.id),t.sessionTerminated(),this._onDidChangeTreeData.fire(void 0))}debugSessionStarted(e){if(!this.sessionRegistersMap.get(e.id)){let t=this.oldState.get(e.name);void 0===t&&(t=0===this.sessionRegistersMap.size?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed);const s=new d(e,t,(()=>{this._onDidChangeTreeData.fire(void 0)}));this.sessionRegistersMap.set(e.id,s),this._onDidChangeTreeData.fire(void 0)}}debugStopped(e){const t=this.sessionRegistersMap.get(e.id);t?t.refresh():this.debugSessionStarted(e)}debugContinued(){}}},4942:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(6828),n=s(2037),i=s(1017),o=s(7147),a=s(387),c=s(3021),h=r.extensions.getExtension("marus25.cortex-debug"),l=h.id,u=h.packageJSON.version;let d,p=null;const f={};function m(){const e=r.workspace.getConfiguration("telemetry"),t=r.workspace.getConfiguration("cortex-debug");return e.enableTelemetry&&t.enableTelemetry}t.default={beginSession:function(e,t){m()&&(t.rtos&&d.set("cd4",t.rtos),t.device&&d.set("cd3",t.device),d.set("cd5",t.servertype),d.screenview("Debug Session","Cortex-Debug",u,l),d.event("Session","Started","",0,{sessionControl:"start"}),t.swoConfig.enabled&&d.event("SWO","Used"),t.rttConfig.enabled&&d.event("RTT","Used"),t.graphConfig.length>0&&d.event("Graphing","Used"),f[e]=new Date,d.send())},endSession:function(e){if(!m())return;const t=f[e];if(t){const s=((new Date).getTime()-t.getTime())/1e3;delete f[e],setTimeout((()=>{d.event("Session","Completed","",Math.round(s),{sessionControl:"end"}).send()}),500)}},activate:function(e){m()&&(d=a("UA-113901869-1",function(){if(!p){const e=i.join(n.homedir(),".cortex-debug");if(o.existsSync(e)){const t=o.readFileSync(e,"utf8"),s=JSON.parse(t);p=s.uuid}else{p=c.v4();const t={uuid:p};o.writeFileSync(e,JSON.stringify(t),"utf8")}}return p}()),d.set("cd2",u),d.set("cd1",r.version),d.set("cd6",n.platform()),d.set("cd7",n.release()),d.set("cd8",process.versions.node))},deactivate:function(){m()},sendEvent:function(e,t,s,r,n={}){m()&&d.event(e,t,s,Math.round(r),n).send()}}},2057:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STLinkServerController=void 0;const r=s(3200),n=s(2037),i=s(1017),o=s(7147),a=s(2361),c=function(){switch(n.platform()){case"win32":return"C:\\ST";case"darwin":return"/Applications/STM32CubeIDE.app/Contents/Eclipse";default:const e=(process.env.HOME||n.homedir())+"/st";return o.existsSync(e)?e:"/opt/st"}}(),h="win32"===n.platform()?"ST-LINK_gdbserver.exe":"ST-LINK_gdbserver",l=/^STM32CubeIDE_(.+)$/i,u=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.stlink-gdb-server\.(.+)/,d=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.cubeprogrammer\.(.+)/,p=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.gnu-tools-for-stm32\.(.+)/;function f(e,t,s,r=""){const n=i.join(...e);let a;try{for(const e of o.readdirSync(n).sort()){const c=i.join(n,e);if(!o.statSync(c).isDirectory())continue;const h=e.match(t);if(h){const e=i.join(n,h[0],s,r);o.existsSync(e)&&(!a||a.localeCompare(e,void 0,{sensitivity:"base",numeric:!0})<0)&&(a=e)}}}catch(e){}return a||r}class m extends a.EventEmitter{constructor(){super(),this.name="ST-LINK",this.portsNeeded=["gdbPort"]}static getSTMCubeIdeDir(){switch(n.platform()){case"darwin":return c;case"linux":return f([c],l,"");default:return f([c],l,"STM32CubeIDE")}}static getArmToolchainPath(){return f([this.getSTMCubeIdeDir(),"plugins"],p,"tools/bin")}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,s){return!1}initCommands(){return[`target-select extended-remote localhost:${this.ports[r.createPortName(this.args.targetProcessor)]}`]}launchCommands(){return[...r.genDownloadCommands(this.args,['interpreter-exec console "monitor reset"']),'interpreter-exec console "monitor reset"','interpreter-exec console "monitor halt"']}attachCommands(){return[]}restartCommands(){return['interpreter-exec console "monitor reset"']}swoAndRTTCommands(){return[]}serverExecutable(){return this.args.serverpath?this.args.serverpath:f([m.getSTMCubeIdeDir(),"plugins"],u,"tools/bin",h)}allocateRTTPorts(){return Promise.resolve()}serverArguments(){let e=["-p",this.ports.gdbPort.toString()],t=this.args.stm32cubeprogrammer;return t||(t=f([m.getSTMCubeIdeDir(),"plugins"],d,"tools/bin"),t||(t="win32"===n.platform()?process.env.ProgramFiles+"\\STMicroelectronics\\STM32Cube\\STM32CubeProgrammer\\bin":"darwin"===n.platform()?"/Applications/STMicroelectronics/STM32Cube/STM32CubeProgrammer/STM32CubeProgrammer.app/Contents/MacOs/bin":"/usr/local/STMicroelectronics/STM32Cube/STM32CubeProgrammer/bin")),e.push("-cp",t),"jtag"!==this.args.interface&&"cjtag"!==this.args.interface&&e.push("--swd"),this.args.serialNumber&&e.push("--serial-number",this.args.serialNumber),"attach"===this.args.request&&e.push("--attach"),e.push("--halt"),this.args.serverArgs&&(e=e.concat(this.args.serverArgs)),e}initMatch(){return/(Waiting for debugger connection|Listening at).*/gi}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.STLinkServerController=m},565:(e,t)=>{"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolScope=t.SymbolType=void 0,(r=t.SymbolType||(t.SymbolType={}))[r.Function=0]="Function",r[r.File=1]="File",r[r.Object=2]="Object",r[r.Normal=3]="Normal",(s=t.SymbolScope||(t.SymbolScope={}))[s.Local=0]="Local",s[s.Global=1]="Global",s[s.Neither=2]="Neither",s[s.Both=3]="Both"},3725:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PortStatusArgs=t.TcpPortScanner=void 0;const n=s(2037),i=s(1808),o=s(2081),a=s(5497),c=s(2361);let h=!1;function l(...e){h&&console.log(...e)}class u{static EmitAllocated(e){if(e&&e.length){for(const t of e)u.AvoidPorts.add(t);u.PortAllocated.emit("allocated",e)}}static isPortInUse(e,t,s=9999){return l(`isPortInUse: testing port ${t}:${e}`),new Promise(((r,n)=>{const o=i.createServer((e=>{}));o.once("error",(i=>{const a=i.code;a&&"EADDRINUSE"===a||"EACCES"===a?("EACCES"===a&&l(`isPortInUse: port ${t}:${e} returned code EACCES?, ${s}`),l(`isPortInUse: port ${t}:${e} is busy, ${s}`),r(!0)):(l(`isPortInUse: port ${t}:${e} unexpected error , ${s}`,i),n(i)),o.close()})),o.once("close",(()=>{l(`isPortInUse: port ${t}:${e} is free, ${s}`),r(!1)})),o.listen(e,t,(()=>{o.close()}))}))}static isPortInUseEx(e,t,s){const n=u.SeqNumber++,i=u.getLocalHostAliases();return new Promise((t=>r(this,void 0,void 0,(function*(){if(s&&s.has(e))t(!0);else{for(const s of i)try{if(yield u.isPortInUse(e,s,n))return void t(!0)}catch(e){return void t(!0)}t(!1)}}))))}static findFreePorts({min:e,max:t,retrieve:s=1,consecutive:r=!1,doLog:n=!1},i=u.DefaultHost){h=h||n;let o=[];const a=[],c=s;return new Promise(((s,n)=>{const d=e=>{u.EmitAllocated(e),s(e)};c<=0?d(o):function e(s,i){l(`findFreePorts: ******** Next ${s}`);const p=process.hrtime();u.isPortInUseEx(s,i,u.AvoidPorts).then((u=>{const f=process.hrtime(p);if(u?(a.push(s),l(`Busy ports = ${a}`)):(r&&o.length>0&&s!==1+o[o.length-1]&&(l("TcpPortHelper.findFreePorts: Oops, reset for consecutive ports requirement"),o=[]),o.push(s),l(`Free ports = ${o}`)),h){const e=(f[1]/1e6).toFixed(2),t=`${f[0]}s ${e}ms`;l(`TcpPortHelper.findFreePorts Port ${i}:${s} `+(u?"busy":"free")+`, Found: ${o.length} of ${c} needed ${t}`)}o.length===c?d(o):s<t?e(s+1,i):n(new Error(`Only found ${o.length} of ${c} ports`))})).catch((e=>{n(e)}))}(e,i)}))}static getOsNetProbeCmd(){if(""===u.OSNetProbeCmd){const e=a.sync,t=n.platform(),s="win32"===t,r="darwin"===t;s||r||!e("ss")?e("netstat")?(u.OSNetProbeCmd=s?"netstat -nap tcp":"netstat -nap tcp -f inet",u.OSNetProbeCmdRegexpStr="[tT][cC][pP][^\\n]*[:\\.]XYZZY\\s+[^\\s]+\\s+LISTEN[^\\n]*\\n"):r&&e("lsof")?(u.OSNetProbeCmd="lsof -n -iTCP:XYZZY -sTCP:LISTEN",u.OSNetProbeCmdRegexpStr="IPv4[^\\n]+:XYZZY\\s[^\\n]*\\(LISTEN\\)[^\\n]*\\n"):u.OSNetProbeCmd="?":(u.OSNetProbeCmd="ss -nlt",u.OSNetProbeCmdRegexpStr="LISTEN\\s+[^\\n]*:XYZZY\\s+[^\\s]+[^\\n]*\\n")}return u.OSNetProbeCmd}static waitForPortOpenOSUtl(e,t=100,s=5e3,r=!0,n=!0){const i=u.getOsNetProbeCmd().replace("XYZZY",e.toString());if(h=h||n,l(i),r&&"?"===i)return u.waitForPortOpen(e,u.DefaultHost,!0,t,s);const a=u.OSNetProbeCmdRegexpStr.replace("XYZZY",e.toString());l(a);const c=new RegExp(a),d=Date.now();let p=!0;return t=Math.max(t,1),new Promise((function e(r,n){if("?"===i)return n(new Error("failed"));o.exec(i,((o,a)=>{if(o&&!i.startsWith("lsof"))return n(o);if(c.test(a))return l(a.match(c).join("\n")),r();{p&&(p=!1);const i=Date.now()-d;if(!(i<s))return n(new Error("timeout"));l(`waitForPortOpenOSUtl: Setting timeout for ${t}ms, curTime = ${i}ms`),setTimeout((()=>{e(r,n)}),t)}}))}))}static waitForPortStatusEx(e){e.startTimeMs=Date.now();const t=e.checkLocalHostAliases?u.isPortInUseEx:u.isPortInUse;return new Promise((function s(r,n){t(e.port,e.host,null).then((t=>{if(t===e.desiredStatus)return r();throw new Error("tryagain")})).catch((t=>"tryagain"!==t.message?n(t):Date.now()-e.startTimeMs<e.timeOutMs?void setTimeout((()=>{s(r,n)}),e.retryTimeMs):n(new Error("timeout"))))}))}static waitForPortStatus(e,t=u.DefaultHost,s=!0,r=!0,n=100,i=5e3){n=Math.max(n,1);const o=new d(s,e,t,r,n,i);return u.waitForPortStatusEx(o)}static waitForPortOpen(e,t=u.DefaultHost,s=!0,r=100,n=5e3){r=Math.max(r,1);const i=new d(!0,e,t,s,r,n);return u.waitForPortStatusEx(i)}static waitForPortClosed(e,t=u.DefaultHost,s=!0,r=100,n=5e3){r=Math.max(r,1);const i=new d(!1,e,t,s,r,n);return u.waitForPortStatusEx(i)}static getLocalHostAliases(){if(0===u.localHostAliases.length){u.localHostAliases=["127.0.0.1","0.0.0.0"];const e=n.networkInterfaces();Object.keys(e).forEach((t=>{e[t].forEach((e=>{e.internal&&"ipv4"===e.family.toLowerCase()&&-1===u.localHostAliases.indexOf(e.address)&&u.localHostAliases.push(e.address)}))}))}return u.localHostAliases}static shouldUseServerMethod(e){return!u.ForceClientMethod&&(!e||"localhost"===e.toLowerCase()||u.getLocalHostAliases().indexOf(e)>=0)}}t.TcpPortScanner=u,u.ForceClientMethod=!1,u.DefaultHost="0.0.0.0",u.PortAllocated=new c.EventEmitter,u.AvoidPorts=new Set,u.SeqNumber=0,u.OSNetProbeCmd="",u.OSNetProbeCmdRegexpStr="",u.localHostAliases=[];class d{constructor(e,t,s=u.DefaultHost,r=!0,n=100,i=5e3){this.desiredStatus=e,this.port=t,this.host=s,this.checkLocalHostAliases=r,this.retryTimeMs=n,this.timeOutMs=i,this.startTimeMs=0,this.retryTimeMs=Math.max(this.retryTimeMs,1)}}t.PortStatusArgs=d},387:(e,t,s)=>{e.exports=s(5327)},5858:e=>{e.exports={protocolVersion:"1",hostname:"https://www.google-analytics.com",path:"/collect",batchPath:"/batch",batching:!0,batchSize:10,acceptedParameters:["v","tid","aip","ds","qt","z","cid","uid","sc","uip","ua","geoid","dr","cn","cs","cm","ck","cc","ci","gclid","dclid","sr","vp","de","sd","ul","je","fl","t","ni","dl","dh","dp","dt","cd","linkid","an","aid","av","aiid","ec","ea","el","ev","ti","ta","tr","ts","tt","in","ip","iq","ic","iv","cu","pa","tcc","pal","cos","col","promoa","sn","sa","st","utc","utv","utt","utl","plt","dns","pdt","rrt","tcp","srt","dit","clt","exd","exf","xid","xvar"],acceptedParametersRegex:[/^cm[0-9]+$/,/^cd[0-9]+$/,/^cg(10|[0-9])$/,/pr[0-9]{1,3}id/,/pr[0-9]{1,3}nm/,/pr[0-9]{1,3}br/,/pr[0-9]{1,3}ca/,/pr[0-9]{1,3}va/,/pr[0-9]{1,3}pr/,/pr[0-9]{1,3}qt/,/pr[0-9]{1,3}cc/,/pr[0-9]{1,3}ps/,/pr[0-9]{1,3}cd[0-9]{1,3}/,/pr[0-9]{1,3}cm[0-9]{1,3}/,/il[0-9]{1,3}nm/,/il[0-9]{1,3}pi[0-9]{1,3}id/,/il[0-9]{1,3}pi[0-9]{1,3}nm/,/il[0-9]{1,3}pi[0-9]{1,3}br/,/il[0-9]{1,3}pi[0-9]{1,3}ca/,/il[0-9]{1,3}pi[0-9]{1,3}va/,/il[0-9]{1,3}pi[0-9]{1,3}ps/,/il[0-9]{1,3}pi[0-9]{1,3}pr/,/il[0-9]{1,3}pi[0-9]{1,3}cd[0-9]{1,3}/,/il[0-9]{1,3}pi[0-9]{1,3}cm[0-9]{1,3}/,/promo[0-9]{1,3}id/,/promo[0-9]{1,3}nm/,/promo[0-9]{1,3}cr/,/promo[0-9]{1,3}ps/],parametersMap:{protocolVersion:"v",trackingId:"tid",webPropertyId:"tid",anonymizeIp:"aip",dataSource:"ds",queueTime:"qt",cacheBuster:"z",clientId:"cid",userId:"uid",sessionControl:"sc",ipOverride:"uip",userAgentOverride:"ua",documentReferrer:"dr",campaignName:"cn",campaignSource:"cs",campaignMedium:"cm",campaignKeyword:"ck",campaignContent:"cc",campaignId:"ci",googleAdwordsId:"gclid",googleDisplayAdsId:"dclid",screenResolution:"sr",viewportSize:"vp",documentEncoding:"de",screenColors:"sd",userLanguage:"ul",javaEnabled:"je",flashVersion:"fl",hitType:"t","non-interactionHit":"ni",documentLocationUrl:"dl",documentHostName:"dh",documentPath:"dp",documentTitle:"dt",screenName:"cd",linkId:"linkid",applicationName:"an",applicationId:"aid",applicationVersion:"av",applicationInstallerId:"aiid",eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",transactionId:"ti",transactionAffiliation:"ta",transactionRevenue:"tr",transactionShipping:"ts",transactionTax:"tt",itemName:"in",itemPrice:"ip",itemQuantity:"iq",itemCode:"ic",itemCategory:"iv",currencyCode:"cu",socialNetwork:"sn",socialAction:"sa",socialActionTarget:"st",userTimingCategory:"utc",userTimingVariableName:"utv",userTimingTime:"utt",userTimingLabel:"utl",pageLoadTime:"plt",dnsTime:"dns",pageDownloadTime:"pdt",redirectResponseTime:"rrt",tcpConnectTime:"tcp",serverResponseTime:"srt",domInteractiveTime:"dit",contentLoadTime:"clt",exceptionDescription:"exd",isExceptionFatal:"exf","isExceptionFatal?":"exf",experimentId:"xid",experimentVariant:"xvar"}}},5327:(e,t,s)=>{var r=s(3021),n=s(3477),i=s(7310),o=s(5119),a=s(5858),c=s(8092),h=s(5158)("universal-analytics");function l(e,t,s){return new u(e,t,s)}e.exports=l;var u=e.exports.Visitor=function(e,t,s,r,n){if("object"==typeof e?(s=e,e=t=null):"object"==typeof t&&(s=t,t=null),this._queue=[],this.options=s||{},this.options.hostname&&(a.hostname=this.options.hostname),this.options.path&&(a.path=this.options.path),this.options.http){var o=i.parse(a.hostname);a.hostname="http://"+o.host}void 0!==this.options.enableBatching&&(a.batching=s.enableBatching),this.options.batchSize&&(a.batchSize=this.options.batchSize),this._context=r||{},this._persistentParams=n||{},this.tid=e||this.options.tid,this.cid=this._determineCid(t,this.options.cid,!1!==this.options.strictCidFormat),this.options.uid&&(this.uid=this.options.uid)};e.exports.middleware=function(t,s){this.tid=t,this.options=s||{};var r=this.options.cookieName||"_ga",n=this.options.instanceName||"visitor";return delete this.options.instanceName,function(i,o,a){if(i[n]=e.exports.createFromSession(i.session),i[n])return a();var c;if(i.cookies&&i.cookies[r]){var h=i.cookies[r].split(".");c=h[2]+"."+h[3]}i[n]=l(t,c,s),i.session&&(i.session.cid=i[n].cid),a()}},e.exports.createFromSession=function(e){if(e&&e.cid)return l(this.tid,e.cid,this.options)},u.prototype={debug:function(e){return h.enabled=0===arguments.length||e,h("visitor.debug() is deprecated: set DEBUG=universal-analytics to enable logging"),this},reset:function(){return this._context=null,this},set:function(e,t){this._persistentParams=this._persistentParams||{},this._persistentParams[e]=t},pageview:function(e,t,s,r,n){return"object"==typeof e&&null!=e?(r=e,"function"==typeof t&&(n=t),e=t=s=null):"function"==typeof t?(n=t,t=s=null):"function"==typeof s?(n=s,s=null):"function"==typeof r&&(n=r,r=null),r=this._translateParams(r),(r=Object.assign({},this._persistentParams||{},r)).dp=e||r.dp||this._context.dp,r.dh=t||r.dh||this._context.dh,r.dt=s||r.dt||this._context.dt,this._tidyParameters(r),r.dp||r.dl?this._withContext(r)._enqueue("pageview",r,n):this._handleError("Please provide either a page path (dp) or a document location (dl)",n)},screenview:function(e,t,s,r,n,i,o){return"object"==typeof e&&null!=e?(i=e,"function"==typeof t&&(o=t),e=t=s=r=n=null):"function"==typeof t?(o=t,t=s=r=n=null):"function"==typeof s?(o=s,s=r=n=null):"function"==typeof r?(o=r,r=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).cd=e||i.cd||this._context.cd,i.an=t||i.an||this._context.an,i.av=s||i.av||this._context.av,i.aid=r||i.aid||this._context.aid,i.aiid=n||i.aiid||this._context.aiid,this._tidyParameters(i),i.cd&&i.an?this._withContext(i)._enqueue("screenview",i,o):this._handleError("Please provide at least a screen name (cd) and an app name (an)",o)},event:function(e,t,s,r,n,i){return"object"==typeof e&&null!=e?(n=e,"function"==typeof t&&(i=t),e=t=s=r=null):"function"==typeof s?(i=s,s=r=null):"function"==typeof r?(i=r,r=null):"function"==typeof n&&(i=n,n=null),n=this._translateParams(n),(n=Object.assign({},this._persistentParams||{},n)).ec=e||n.ec||this._context.ec,n.ea=t||n.ea||this._context.ea,n.el=s||n.el||this._context.el,n.ev=r||n.ev||this._context.ev,n.p=n.p||n.dp||this._context.p||this._context.dp,delete n.dp,this._tidyParameters(n),n.ec&&n.ea?this._withContext(n)._enqueue("event",n,i):this._handleError("Please provide at least an event category (ec) and an event action (ea)",i)},transaction:function(e,t,s,r,n,i,o){return"object"==typeof e?(i=e,"function"==typeof t&&(o=t),e=t=s=r=n=null):"function"==typeof t?(o=t,t=s=r=n=null):"function"==typeof s?(o=s,s=r=n=null):"function"==typeof r?(o=r,r=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).ti=e||i.ti||this._context.ti,i.tr=t||i.tr||this._context.tr,i.ts=s||i.ts||this._context.ts,i.tt=r||i.tt||this._context.tt,i.ta=n||i.ta||this._context.ta,i.p=i.p||this._context.p||this._context.dp,this._tidyParameters(i),i.ti?this._withContext(i)._enqueue("transaction",i,o):this._handleError("Please provide at least a transaction ID (ti)",o)},item:function(e,t,s,r,n,i,o){return"object"==typeof e?(i=e,"function"==typeof t&&(o=t),e=t=s=r=n=null):"function"==typeof t?(o=t,t=s=r=n=null):"function"==typeof s?(o=s,s=r=n=null):"function"==typeof r?(o=r,r=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).ip=e||i.ip||this._context.ip,i.iq=t||i.iq||this._context.iq,i.ic=s||i.ic||this._context.ic,i.in=r||i.in||this._context.in,i.iv=n||i.iv||this._context.iv,i.p=i.p||this._context.p||this._context.dp,i.ti=i.ti||this._context.ti,this._tidyParameters(i),i.ti?this._withContext(i)._enqueue("item",i,o):this._handleError("Please provide at least an item transaction ID (ti)",o)},exception:function(e,t,s,r){return"object"==typeof e?(s=e,"function"==typeof t&&(r=t),e=t=null):"function"==typeof t?(r=t,t=0):"function"==typeof s&&(r=s,s=null),s=this._translateParams(s),(s=Object.assign({},this._persistentParams||{},s)).exd=e||s.exd||this._context.exd,s.exf=+!!(t||s.exf||this._context.exf),0===s.exf&&delete s.exf,this._tidyParameters(s),this._withContext(s)._enqueue("exception",s,r)},timing:function(e,t,s,r,n,i){return"object"==typeof e?(n=e,"function"==typeof t&&(i=t),e=t=s=r=null):"function"==typeof t?(i=t,t=s=r=null):"function"==typeof s?(i=s,s=r=null):"function"==typeof r?(i=r,r=null):"function"==typeof n&&(i=n,n=null),n=this._translateParams(n),(n=Object.assign({},this._persistentParams||{},n)).utc=e||n.utc||this._context.utc,n.utv=t||n.utv||this._context.utv,n.utt=s||n.utt||this._context.utt,n.utl=r||n.utl||this._context.utl,this._tidyParameters(n),this._withContext(n)._enqueue("timing",n,i)},send:function(e){var t=this,s=1;e=e||function(){},h("Sending %d tracking call(s)",t._queue.length);var r=function(r){h("Finished sending tracking calls"),e.call(t,r||null,s-1)},i=function(){if(!t._queue.length)return r(null);var e=[];a.batching?e=t._queue.splice(0,Math.min(t._queue.length,a.batchSize)):e.push(t._queue.shift());var i=e.length>1,l=a.hostname+(i?a.batchPath:a.path);h("%d: %o",s++,e);var u=function(e){return e.map((function(e){return n.stringify(e)})).join("\n")}(e);c.post(l,u,t.options.headers,o)};function o(e){if(e)return r(e);i()}i()},_enqueue:function(e,t,s){return"function"==typeof t&&(s=t,t={}),t=this._translateParams(t)||{},Object.assign(t,{v:a.protocolVersion,tid:this.tid,cid:this.cid,t:e}),this.uid&&(t.uid=this.uid),this._queue.push(t),h.enabled&&this._checkParameters(t),h("Enqueued %s (%o)",e,t),s&&this.send(s),this},_handleError:function(e,t){return h("Error: %s",e),t&&t.call(this,new Error(e)),this},_determineCid:function(){var e,t=Array.prototype.splice.call(arguments,0),s=t.length-1,n=t[s];if(n)for(var i=0;i<s;i++){if(!1!==(e=o.ensureValidCid(t[i])))return e;null!=e&&h("Warning! Invalid UUID format '%s'",t[i])}else for(i=0;i<s;i++)if(t[i])return t[i];return r.v4()},_checkParameters:function(e){for(var t in e)-1!==a.acceptedParameters.indexOf(t)||a.acceptedParametersRegex.filter((function(e){return e.test(t)})).length||h("Warning! Unsupported tracking parameter %s (%s)",t,e[t])},_translateParams:function(e){var t={};for(var s in e)a.parametersMap.hasOwnProperty(s)?t[a.parametersMap[s]]=e[s]:t[s]=e[s];return t},_tidyParameters:function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e},_withContext:function(e){var t=new u(this.tid,this.cid,this.options,e,this._persistentParams);return t._queue=this._queue,t}},u.prototype.pv=u.prototype.pageview,u.prototype.e=u.prototype.event,u.prototype.t=u.prototype.transaction,u.prototype.i=u.prototype.item},8092:(e,t,s)=>{const r=s(3685),n=s(5687),i=s(7310),o=s(5158)("universal-analytics");e.exports={post:function(e,t,s,a){!function(e,t,s,a={},c){const{hostname:h,port:l,pathname:u}=i.parse(e),d={hostname:h,port:l,path:u,method:t,headers:a},p=function(e){return"http:"===i.parse(e).protocol?r:n}(e).request(d,(function(e){!function(e,t){let s="";const{headers:r,statusCode:n}=e,i=n>=300;e.setEncoding("utf8"),e.on("data",(function(e){s+=e})),e.on("end",(function(){t(i?s:null,i?null:s,n,r)}))}(e,c)}));p.on("error",(function(e){c(e),o("Request error",e)})),p.write(s),p.end()}(e,"POST",t,s,a)}}},5119:e=>{e.exports.isUuid=function(e){return!!e&&(e=e.toString().toLowerCase(),/[0-9a-f]{8}\-?[0-9a-f]{4}\-?4[0-9a-f]{3}\-?[89ab][0-9a-f]{3}\-?[0-9a-f]{12}/.test(e))},e.exports.isCookieCid=function(e){return/^[0-9]+\.[0-9]+$/.test(e)},e.exports.ensureValidCid=function(e){return this.isUuid(e)?(e=e.replace(/\-/g,"")).substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20):!!this.isCookieCid(e)&&e}},3021:(e,t,s)=>{"use strict";s.r(t),s.d(t,{NIL:()=>S,parse:()=>y,stringify:()=>u,v1:()=>g,v3:()=>v,v4:()=>w,v5:()=>T,validate:()=>h,version:()=>C});const r=require("crypto");var n=s.n(r);const i=new Uint8Array(256);let o=i.length;function a(){return o>i.length-16&&(n().randomFillSync(i),o=0),i.slice(o,o+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));const u=function(e,t=0){const s=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!h(s))throw TypeError("Stringified UUID is invalid");return s};let d,p,f=0,m=0;const g=function(e,t,s){let r=t&&s||0;const n=t||new Array(16);let i=(e=e||{}).node||d,o=void 0!==e.clockseq?e.clockseq:p;if(null==i||null==o){const t=e.random||(e.rng||a)();null==i&&(i=d=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==o&&(o=p=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:m+1;const l=c-f+(h-m)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||c>f)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,m=h,p=o,c+=122192928e5;const g=(1e4*(268435455&c)+h)%4294967296;n[r++]=g>>>24&255,n[r++]=g>>>16&255,n[r++]=g>>>8&255,n[r++]=255&g;const y=c/4294967296*1e4&268435455;n[r++]=y>>>8&255,n[r++]=255&y,n[r++]=y>>>24&15|16,n[r++]=y>>>16&255,n[r++]=o>>>8|128,n[r++]=255&o;for(let e=0;e<6;++e)n[r+e]=i[e];return t||u(n)},y=function(e){if(!h(e))throw TypeError("Invalid UUID");let t;const s=new Uint8Array(16);return s[0]=(t=parseInt(e.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=255&t,s[4]=(t=parseInt(e.slice(9,13),16))>>>8,s[5]=255&t,s[6]=(t=parseInt(e.slice(14,18),16))>>>8,s[7]=255&t,s[8]=(t=parseInt(e.slice(19,23),16))>>>8,s[9]=255&t,s[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=255&t,s};function b(e,t,s){function r(e,r,n,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}(e)),"string"==typeof r&&(r=y(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),o=s(o),o[6]=15&o[6]|t,o[8]=63&o[8]|128,n){i=i||0;for(let e=0;e<16;++e)n[i+e]=o[e];return n}return u(o)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const v=b("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("md5").update(e).digest()})),w=function(e,t,s){const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=r[e];return t}return u(r)},T=b("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",C=function(e){if(!h(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},306:function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},4096:function(e,t,s){(function(){"use strict";var e,r,n,i,o,a={}.hasOwnProperty;e=s(5532),r=s(8381).defaults,i=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},o=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,s,n;for(t in this.options={},s=r[.2])a.call(s,t)&&(n=s[t],this.options[t]=n);for(t in e)a.call(e,t)&&(n=e[t],this.options[t]=n)}return t.prototype.buildObject=function(t){var s,n,c,h,l,u;return s=this.options.attrkey,n=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===r[.2].rootName?t=t[l=Object.keys(t)[0]]:l=this.options.rootName,u=this,c=function(e,t){var r,h,l,d,p,f;if("object"!=typeof t)u.options.cdata&&i(t)?e.raw(o(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(a.call(t,d))for(p in h=t[d])l=h[p],e=c(e.ele(p),l).up()}else for(p in t)if(a.call(t,p))if(h=t[p],p===s){if("object"==typeof h)for(r in h)f=h[r],e=e.att(r,f)}else if(p===n)e=u.options.cdata&&i(h)?e.raw(o(h)):e.txt(h);else if(Array.isArray(h))for(d in h)a.call(h,d)&&(e="string"==typeof(l=h[d])?u.options.cdata&&i(l)?e.ele(p).raw(o(l)).up():e.ele(p,l).up():c(e.ele(p),l).up());else"object"==typeof h?e=c(e.ele(p),h).up():"string"==typeof h&&u.options.cdata&&i(h)?e=e.ele(p).raw(o(h)).up():(null==h&&(h=""),e=e.ele(p,h.toString()).up());return e},h=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(h,t).end(this.options.renderOpts)},t}()}).call(this)},8381:function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},9082:function(e,t,s){(function(){"use strict";var e,r,n,i,o,a,c,h,l=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;c=s(6099),n=s(2361),e=s(306),a=s(7526),h=s(9512).setImmediate,r=s(8381).defaults,i=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e,t,s){var r,n;for(r=0,n=e.length;r<n;r++)t=(0,e[r])(t,s);return t},t.Parser=function(s){function n(e){var s,n,i;if(this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(s in this.options={},n=r[.2])u.call(n,s)&&(i=n[s],this.options[s]=i);for(s in e)u.call(e,s)&&(i=e[s],this.options[s]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(e,t){for(var s in t)u.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,s),n.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),h(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},n.prototype.assignOrPush=function(e,t,s){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(s)):this.options.explicitArray?e[t]=[s]:e[t]=s},n.prototype.reset=function(){var e,t,s,r,n;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(n=this,function(e){if(n.saxParser.resume(),!n.saxParser.errThrown)return n.saxParser.errThrown=!0,n.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(s){return function(n){var i,a,c,h,l;if((c={})[t]="",!s.options.ignoreAttrs)for(i in l=n.attributes)u.call(l,i)&&(e in c||s.options.mergeAttrs||(c[e]={}),a=s.options.attrValueProcessors?o(s.options.attrValueProcessors,n.attributes[i],i):n.attributes[i],h=s.options.attrNameProcessors?o(s.options.attrNameProcessors,i):i,s.options.mergeAttrs?s.assignOrPush(c,h,a):c[e][h]=a);return c["#name"]=s.options.tagNameProcessors?o(s.options.tagNameProcessors,n.name):n.name,s.options.xmlns&&(c[s.options.xmlnskey]={uri:n.uri,local:n.local}),r.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var s,n,a,c,h,l,d,p,f,m;if(l=r.pop(),h=l["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(s=l.cdata,delete l.cdata),f=r[r.length-1],l[t].match(/^\s*$/)&&!s?(n=l[t],delete l[t]):(e.options.trim&&(l[t]=l[t].trim()),e.options.normalize&&(l[t]=l[t].replace(/\s{2,}/g," ").trim()),l[t]=e.options.valueProcessors?o(e.options.valueProcessors,l[t],h):l[t],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])),i(l)&&(l=""!==e.options.emptyTag?e.options.emptyTag:n),null!=e.options.validator&&(m="/"+function(){var e,t,s;for(s=[],e=0,t=r.length;e<t;e++)c=r[e],s.push(c["#name"]);return s}().concat(h).join("/"),function(){var t;try{l=e.options.validator(m,f&&f[h],l)}catch(s){return t=s,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof l)if(e.options.preserveChildrenOrder){if(f){for(a in f[e.options.childkey]=f[e.options.childkey]||[],d={},l)u.call(l,a)&&(d[a]=l[a]);f[e.options.childkey].push(d),delete l["#name"],1===Object.keys(l).length&&t in l&&!e.EXPLICIT_CHARKEY&&(l=l[t])}}else c={},e.options.attrkey in l&&(c[e.options.attrkey]=l[e.options.attrkey],delete l[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in l&&(c[e.options.charkey]=l[e.options.charkey],delete l[e.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(c[e.options.childkey]=l),l=c;return r.length>0?e.assignOrPush(f,h,l):(e.options.explicitRoot&&(p=l,(l={})[h]=p),e.resultObject=l,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),s=function(e){return function(s){var n,i;if(i=r[r.length-1])return i[t]+=s,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==s.replace(/\\n/g,"").trim())&&(i[e.options.childkey]=i[e.options.childkey]||[],(n={"#name":"__text__"})[t]=s,e.options.normalize&&(n[t]=n[t].replace(/\s{2,}/g," ").trim()),i[e.options.childkey].push(n)),i}}(this),this.saxParser.ontext=s,this.saxParser.oncdata=function(e){var t;if(t=s(e))return t.cdata=!0}},n.prototype.parseString=function(t,s){var r;null!=s&&"function"==typeof s&&(this.on("end",(function(e){return this.reset(),s(null,e)})),this.on("error",(function(e){return this.reset(),s(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,h(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(r=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},n.prototype.parseStringPromise=function(e){return new Promise((t=this,function(s,r){return t.parseString(e,(function(e,t){return e?r(e):s(t)}))}));var t},n}(n),t.parseString=function(e,s,r){var n,i;return null!=r?("function"==typeof r&&(n=r),"object"==typeof s&&(i=s)):("function"==typeof s&&(n=s),i={}),new t.Parser(i).parseString(e,n)},t.parseStringPromise=function(e,s){var r;return"object"==typeof s&&(r=s),new t.Parser(r).parseStringPromise(e)}}).call(this)},7526:function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},5055:function(e,t,s){(function(){"use strict";var e,r,n,i,o={}.hasOwnProperty;r=s(8381),e=s(4096),n=s(9082),i=s(7526),t.defaults=r.defaults,t.processors=i,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var s in t)o.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=n.Parser,t.parseString=n.parseString,t.parseStringPromise=n.parseStringPromise}).call(this)},7557:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},9335:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},8369:function(e){(function(){var t,s,r,n,i,o,a,c=[].slice,h={}.hasOwnProperty;t=function(){var e,t,s,r,n,o;if(o=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,s=n.length;e<s;e++)if(null!=(r=n[e]))for(t in r)h.call(r,t)&&(o[t]=r[t]);return o},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},r=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){var t;if(r(e))return!e.length;for(t in e)if(h.call(e,t))return!1;return!0},a=function(e){var t,s;return o(e)&&(s=Object.getPrototypeOf(e))&&(t=s.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},s=function(e){return i(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=o,e.exports.isArray=r,e.exports.isEmpty=n,e.exports.isPlainObject=a,e.exports.getValue=s}).call(this)},594:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},2750:function(e,t,s){(function(){var t;t=s(9335),s(2026),e.exports=function(){function e(e,s,r){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==s)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(r),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},6170:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;t=s(9335),r=s(6488),e.exports=function(e){function s(e,r){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},6488:function(e,t,s){(function(){var t,r={}.hasOwnProperty;t=s(2026),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var s in t)r.call(t,s)&&(e[s]=t[s]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},2096:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;t=s(9335),r=s(6488),e.exports=function(e){function s(e,r){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},383:function(e,t,s){(function(){var t,r;t=s(3933),r=s(6210),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},3933:function(e){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},1770:function(e){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,s){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,s){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},6210:function(e){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},1179:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;r=s(2026),t=s(9335),e.exports=function(e){function s(e,r,n,i,o,a){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!i)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(i),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=o}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},6347:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;r=s(2026),t=s(9335),e.exports=function(e){function s(e,r,n){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},9078:function(e,t,s){(function(){var t,r,n,i={}.hasOwnProperty;n=s(8369).isObject,r=s(2026),t=s(9335),e.exports=function(e){function s(e,r,i,o){if(s.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD entity name. "+this.debugInfo(i));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!r,this.name=this.stringify.name(i),this.type=t.EntityDeclaration,n(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}return function(e,t){for(var s in t)i.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(s.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlVersion",{get:function(){return null}}),s.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},4777:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;r=s(2026),t=s(9335),e.exports=function(e){function s(e,r,n){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},9077:function(e,t,s){(function(){var t,r,n,i={}.hasOwnProperty;n=s(8369).isObject,r=s(2026),t=s(9335),e.exports=function(e){function s(e,r,i,o){var a;s.__super__.constructor.call(this,e),n(r)&&(r=(a=r).version,i=a.encoding,o=a.standalone),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(e,t){for(var s in t)i.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},6544:function(e,t,s){(function(){var t,r,n,i,o,a,c,h,l={}.hasOwnProperty;h=s(8369).isObject,c=s(2026),t=s(9335),r=s(1179),i=s(9078),n=s(6347),o=s(4777),a=s(663),e.exports=function(e){function s(e,r,n){var i,o,a,c,l,u;if(s.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(o=0,a=(c=e.children).length;o<a;o++)if((i=c[o]).type===t.Element){this.name=i.name;break}this.documentObject=e,h(r)&&(r=(l=r).pubID,n=l.sysID),null==n&&(n=(u=[r,n])[0],r=u[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(e,t){for(var s in t)l.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"entities",{get:function(){var e,s,r,n,i;for(n={},s=0,r=(i=this.children).length;s<r;s++)(e=i[s]).type!==t.EntityDeclaration||e.pe||(n[e.name]=e);return new a(n)}}),Object.defineProperty(s.prototype,"notations",{get:function(){var e,s,r,n,i;for(n={},s=0,r=(i=this.children).length;s<r;s++)(e=i[s]).type===t.NotationDeclaration&&(n[e.name]=e);return new a(n)}}),Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),s.prototype.element=function(e,t){var s;return s=new n(this,e,t),this.children.push(s),this},s.prototype.attList=function(e,t,s,n,i){var o;return o=new r(this,e,t,s,n,i),this.children.push(o),this},s.prototype.entity=function(e,t){var s;return s=new i(this,!1,e,t),this.children.push(s),this},s.prototype.pEntity=function(e,t){var s;return s=new i(this,!0,e,t),this.children.push(s),this},s.prototype.notation=function(e,t){var s;return s=new o(this,e,t),this.children.push(s),this},s.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},s.prototype.ele=function(e,t){return this.element(e,t)},s.prototype.att=function(e,t,s,r,n){return this.attList(e,t,s,r,n)},s.prototype.ent=function(e,t){return this.entity(e,t)},s.prototype.pent=function(e,t){return this.pEntity(e,t)},s.prototype.not=function(e,t){return this.notation(e,t)},s.prototype.up=function(){return this.root()||this.documentObject},s.prototype.isEqualNode=function(e){return!!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},s}(c)}).call(this)},6934:function(e,t,s){(function(){var t,r,n,i,o,a,c,h={}.hasOwnProperty;c=s(8369).isPlainObject,n=s(1770),r=s(383),i=s(2026),t=s(9335),a=s(5549),o=s(6434),e.exports=function(e){function s(e){s.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,e||(e={}),e.writer||(e.writer=new o),this.options=e,this.stringify=new a(e)}return function(e,t){for(var s in t)h.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"implementation",{value:new n}),Object.defineProperty(s.prototype,"doctype",{get:function(){var e,s,r,n;for(s=0,r=(n=this.children).length;s<r;s++)if((e=n[s]).type===t.DocType)return e;return null}}),Object.defineProperty(s.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(s.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(s.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(s.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(s.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(s.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(s.prototype,"origin",{get:function(){return null}}),Object.defineProperty(s.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(s.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(s.prototype,"contentType",{get:function(){return null}}),s.prototype.end=function(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},s.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},s.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.renameNode=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createNodeIterator=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.createTreeWalker=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(i)}).call(this)},9227:function(e,t,s){(function(){var t,r,n,i,o,a,c,h,l,u,d,p,f,m,g,y,b,v,w,T,S,C,E,O={}.hasOwnProperty;E=s(8369),S=E.isObject,T=E.isFunction,C=E.isPlainObject,w=E.getValue,t=s(9335),p=s(6934),f=s(2161),i=s(6170),o=s(2096),g=s(9406),v=s(3595),m=s(9181),u=s(9077),d=s(6544),a=s(1179),h=s(9078),c=s(6347),l=s(4777),n=s(2750),b=s(5549),y=s(6434),r=s(594),e.exports=function(){function e(e,s,r){var n;this.name="?xml",this.type=t.Document,e||(e={}),n={},e.writer?C(e.writer)&&(n=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(n),this.stringify=new b(e),this.onDataCallback=s||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var s,r,n,i,o,a,c,h;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(r in n={},c=e.attribs)O.call(c,r)&&(s=c[r],n[r]=s.value);this.node(e.name,n);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(o=0,a=(h=e.children).length;o<a;o++)i=h[o],this.createChildNode(i),i.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,s){var r;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=w(e),null==t&&(t={}),t=w(t),S(t)||(s=(r=[t,s])[0],t=r[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=s&&this.text(s),this},e.prototype.element=function(e,s,r){var n,i,o,a,c,h;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||S(e)||T(e))for(a=this.options.noValidation,this.options.noValidation=!0,(h=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,i=0,o=(c=h.children).length;i<o;i++)n=c[i],this.createChildNode(n),n.type===t.Element&&this.up();else this.node(e,s,r);return this},e.prototype.attribute=function(e,t){var s,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=w(e)),S(e))for(s in e)O.call(e,s)&&(r=e[s],this.attribute(s,r));else T(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new g(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var s,r,n,i,o;if(this.openCurrent(),null!=e&&(e=w(e)),null!=t&&(t=w(t)),Array.isArray(e))for(s=0,i=e.length;s<i;s++)r=e[s],this.instruction(r);else if(S(e))for(r in e)O.call(e,r)&&(n=e[r],this.instruction(r,n));else T(t)&&(t=t.apply()),o=new m(this,e,t),this.onData(this.writer.processingInstruction(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,s){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new u(this,e,t,s),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,s){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,s),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var s;return this.openCurrent(),s=new c(this,e,t),this.onData(this.writer.dtdElement(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,s,r,n){var i;return this.openCurrent(),i=new a(this,e,t,s,r,n),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var s;return this.openCurrent(),s=new h(this,!1,e,t),this.onData(this.writer.dtdEntity(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var s;return this.openCurrent(),s=new h(this,!0,e,t),this.onData(this.writer.dtdEntity(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var s;return this.openCurrent(),s=new l(this,e,t),this.onData(this.writer.dtdNotation(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var s,n,i,o;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),n="",e.type===t.Element){for(i in this.writerOptions.state=r.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,o=e.attribs)O.call(o,i)&&(s=o[i],n+=this.writer.attribute(s,this.writerOptions,this.currentLevel));n+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.children?(n+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,n+=">"),n+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(n,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var s;if(!e.isClosed)return"",this.writerOptions.state=r.CloseTag,s=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(s,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,s){return this.node(e,t,s)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,s){return this.declaration(e,t,s)},e.prototype.dtd=function(e,t,s){return this.doctype(e,t,s)},e.prototype.e=function(e,t,s){return this.element(e,t,s)},e.prototype.n=function(e,t,s){return this.node(e,t,s)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},8833:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;r=s(2026),t=s(9335),e.exports=function(e){function s(e){s.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return""},s}(r)}).call(this)},2161:function(e,t,s){(function(){var t,r,n,i,o,a,c,h,l={}.hasOwnProperty;h=s(8369),c=h.isObject,a=h.isFunction,o=h.getValue,i=s(2026),t=s(9335),r=s(2750),n=s(663),e.exports=function(e){function s(e,r,n){var i,o,a,c;if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(o=0,a=(c=e.children).length;o<a;o++)if((i=c[o]).type===t.DocType){i.name=this.name;break}}return function(e,t){for(var s in t)l.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(s.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(s.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(s.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(s.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),s.prototype.clone=function(){var e,t,s,r;for(t in(s=Object.create(this)).isRoot&&(s.documentObject=null),s.attribs={},r=this.attribs)l.call(r,t)&&(e=r[t],s.attribs[t]=e.clone());return s.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=s,s.children.push(t)})),s},s.prototype.attribute=function(e,t){var s,n;if(null!=e&&(e=o(e)),c(e))for(s in e)l.call(e,s)&&(n=e[s],this.attribute(s,n));else a(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new r(this,e,""):null!=t&&(this.attribs[e]=new r(this,e,t));return this},s.prototype.removeAttribute=function(e){var t,s,r;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=o(e),Array.isArray(e))for(s=0,r=e.length;s<r;s++)t=e[s],delete this.attribs[t];else delete this.attribs[e];return this},s.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},s.prototype.att=function(e,t){return this.attribute(e,t)},s.prototype.a=function(e,t){return this.attribute(e,t)},s.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},s.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},s.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setAttributeNS=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},s.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},s.prototype.setIdAttributeNS=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(e){var t,r,n;if(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,n=this.attribs.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},s}(i)}).call(this)},663:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},2026:function(e,t,s){(function(){var t,r,n,i,o,a,c,h,l,u,d,p,f,m,g,y,b,v={}.hasOwnProperty;b=s(8369),y=b.isObject,g=b.isFunction,m=b.isEmpty,f=b.getValue,h=null,n=null,i=null,o=null,a=null,d=null,p=null,u=null,c=null,r=null,l=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,h||(h=s(2161),n=s(6170),i=s(2096),o=s(9077),a=s(6544),d=s(9406),p=s(3595),u=s(9181),c=s(8833),r=s(9335),l=s(2390),s(663),t=s(7557))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,s,n,i;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(i="",t=0,s=(n=this.children).length;t<s;t++)(e=n[t]).textContent&&(i+=e.textContent);return i}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,s,r,n,i;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),i=[],s=0,r=(n=this.children).length;s<r;s++)t=n[s],i.push(t.setParent(this));return i},e.prototype.element=function(e,t,s){var r,n,i,o,a,c,h,l,u,d,p;if(c=null,null===t&&null==s&&(t=(u=[{},null])[0],s=u[1]),null==t&&(t={}),t=f(t),y(t)||(s=(d=[t,s])[0],t=d[1]),null!=e&&(e=f(e)),Array.isArray(e))for(i=0,h=e.length;i<h;i++)n=e[i],c=this.element(n);else if(g(e))c=this.element(e.apply());else if(y(e)){for(a in e)if(v.call(e,a))if(p=e[a],g(p)&&(p=p.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),p);else if(!this.options.separateArrayItems&&Array.isArray(p)&&m(p))c=this.dummy();else if(y(p)&&m(p))c=this.element(a);else if(this.options.keepNullNodes||null!=p)if(!this.options.separateArrayItems&&Array.isArray(p))for(o=0,l=p.length;o<l;o++)n=p[o],(r={})[a]=n,c=this.element(r);else y(p)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?c=this.element(p):(c=this.element(a)).element(p):c=this.element(a,p);else c=this.dummy()}else c=this.options.keepNullNodes||null!==s?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(s):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(s):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(s):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(s):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),s):this.node(e,t,s):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},e.prototype.insertBefore=function(e,t,s){var r,n,i,o,a;if(null!=e?e.type:void 0)return o=t,(i=e).setParent(this),o?(n=children.indexOf(o),a=children.splice(n),children.push(i),Array.prototype.push.apply(children,a)):children.push(i),i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),a=this.parent.children.splice(n),r=this.parent.element(e,t,s),Array.prototype.push.apply(this.parent.children,a),r},e.prototype.insertAfter=function(e,t,s){var r,n,i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),r=this.parent.element(e,t,s),Array.prototype.push.apply(this.parent.children,i),r},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,s){var r,n;return null!=e&&(e=f(e)),t||(t={}),t=f(t),y(t)||(s=(n=[t,s])[0],t=n[1]),r=new h(this,e,t),null!=s&&r.text(s),this.children.push(r),r},e.prototype.text=function(e){var t;return y(e)&&this.element(e),t=new p(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new i(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,s;return t=this.parent.children.indexOf(this),s=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,s),this},e.prototype.commentAfter=function(e){var t,s;return t=this.parent.children.indexOf(this),s=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,s),this},e.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new c(this)},e.prototype.instruction=function(e,t){var s,r,n,i,o;if(null!=e&&(e=f(e)),null!=t&&(t=f(t)),Array.isArray(e))for(i=0,o=e.length;i<o;i++)s=e[i],this.instruction(s);else if(y(e))for(s in e)v.call(e,s)&&(r=e[s],this.instruction(s,r));else g(t)&&(t=t.apply()),n=new u(this,e,t),this.children.push(n);return this},e.prototype.instructionBefore=function(e,t){var s,r;return s=this.parent.children.indexOf(this),r=this.parent.children.splice(s),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.instructionAfter=function(e,t){var s,r;return s=this.parent.children.indexOf(this),r=this.parent.children.splice(s+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.declaration=function(e,t,s){var n,i;return n=this.document(),i=new o(n,e,t,s),0===n.children.length?n.children.unshift(i):n.children[0].type===r.Declaration?n.children[0]=i:n.children.unshift(i),n.root()||n},e.prototype.dtd=function(e,t){var s,n,i,o,c,h,l,u,d;for(s=this.document(),n=new a(s,e,t),i=o=0,h=(u=s.children).length;o<h;i=++o)if(u[i].type===r.DocType)return s.children[i]=n,n;for(i=c=0,l=(d=s.children).length;c<l;i=++c)if(d[i].isRoot)return s.children.splice(i,0,n),n;return s.children.push(n),n},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===r.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===r.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,s;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(s=this.parent)?s.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,s){return this.element(e,t,s)},e.prototype.nod=function(e,t,s){return this.node(e,t,s)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,s){return this.declaration(e,t,s)},e.prototype.e=function(e,t,s){return this.element(e,t,s)},e.prototype.n=function(e,t,s){return this.node(e,t,s)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var s,r;return(s=this)===e?0:this.document()!==e.document()?(r=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?r|=t.Preceding:r|=t.Following,r):s.isAncestor(e)?t.Contains|t.Preceding:s.isDescendant(e)?t.Contains|t.Following:s.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,s,r;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=s=0,r=this.children.length-1;0<=r?s<=r:s>=r;t=0<=r?++s:--s)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,s,r,n;for(s=0,r=(n=this.children).length;s<r;s++){if(e===(t=n[s]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,s;return t=this.treePosition(e),s=this.treePosition(this),-1!==t&&-1!==s&&t<s},e.prototype.isFollowing=function(e){var t,s;return t=this.treePosition(e),s=this.treePosition(this),-1!==t&&-1!==s&&t>s},e.prototype.treePosition=function(e){var t,s;return s=0,t=!1,this.foreachTreeNode(this.document(),(function(r){if(s++,!t&&r===e)return t=!0})),t?s:-1},e.prototype.foreachTreeNode=function(e,t){var s,r,n,i,o;for(e||(e=this.document()),r=0,n=(i=e.children).length;r<n;r++){if(o=t(s=i[r]))return o;if(o=this.foreachTreeNode(s,t))return o}},e}()}).call(this)},2390:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},9181:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;t=s(9335),r=s(6488),e.exports=function(e){function s(e,r,n){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},s.prototype.isEqualNode=function(e){return!!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},s}(r)}).call(this)},9406:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;t=s(9335),r=s(2026),e.exports=function(e){function s(e,r){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},s}(r)}).call(this)},1996:function(e,t,s){(function(){var t,r,n,i={}.hasOwnProperty;t=s(9335),n=s(751),r=s(594),e.exports=function(e){function s(e,t){this.stream=e,s.__super__.constructor.call(this,t)}return function(e,t){for(var s in t)i.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),s.prototype.endline=function(e,t,n){return e.isLastRootNode&&t.state===r.CloseTag?"":s.__super__.endline.call(this,e,t,n)},s.prototype.document=function(e,t){var s,r,n,i,o,a,c,h,l;for(r=n=0,o=(c=e.children).length;n<o;r=++n)(s=c[r]).isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),l=[],i=0,a=(h=e.children).length;i<a;i++)s=h[i],l.push(this.writeChildNode(s,t,0));return l},s.prototype.attribute=function(e,t,r){return this.stream.write(s.__super__.attribute.call(this,e,t,r))},s.prototype.cdata=function(e,t,r){return this.stream.write(s.__super__.cdata.call(this,e,t,r))},s.prototype.comment=function(e,t,r){return this.stream.write(s.__super__.comment.call(this,e,t,r))},s.prototype.declaration=function(e,t,r){return this.stream.write(s.__super__.declaration.call(this,e,t,r))},s.prototype.docType=function(e,t,s){var n,i,o,a;if(s||(s=0),this.openNode(e,t,s),t.state=r.OpenTag,this.stream.write(this.indent(e,t,s)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,s)),t.state=r.InsideTag,i=0,o=(a=e.children).length;i<o;i++)n=a[i],this.writeChildNode(n,t,s+1);t.state=r.CloseTag,this.stream.write("]")}return t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,s)),t.state=r.None,this.closeNode(e,t,s)},s.prototype.element=function(e,s,n){var o,a,c,h,l,u,d,p,f;for(d in n||(n=0),this.openNode(e,s,n),s.state=r.OpenTag,this.stream.write(this.indent(e,s,n)+"<"+e.name),p=e.attribs)i.call(p,d)&&(o=p[d],this.attribute(o,s,n));if(h=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))s.allowEmpty?(this.stream.write(">"),s.state=r.CloseTag,this.stream.write("</"+e.name+">")):(s.state=r.CloseTag,this.stream.write(s.spaceBeforeSlash+"/>"));else if(!s.pretty||1!==c||h.type!==t.Text&&h.type!==t.Raw||null==h.value){for(this.stream.write(">"+this.endline(e,s,n)),s.state=r.InsideTag,l=0,u=(f=e.children).length;l<u;l++)a=f[l],this.writeChildNode(a,s,n+1);s.state=r.CloseTag,this.stream.write(this.indent(e,s,n)+"</"+e.name+">")}else this.stream.write(">"),s.state=r.InsideTag,s.suppressPrettyCount++,this.writeChildNode(h,s,n+1),s.suppressPrettyCount--,s.state=r.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,s,n)),s.state=r.None,this.closeNode(e,s,n)},s.prototype.processingInstruction=function(e,t,r){return this.stream.write(s.__super__.processingInstruction.call(this,e,t,r))},s.prototype.raw=function(e,t,r){return this.stream.write(s.__super__.raw.call(this,e,t,r))},s.prototype.text=function(e,t,r){return this.stream.write(s.__super__.text.call(this,e,t,r))},s.prototype.dtdAttList=function(e,t,r){return this.stream.write(s.__super__.dtdAttList.call(this,e,t,r))},s.prototype.dtdElement=function(e,t,r){return this.stream.write(s.__super__.dtdElement.call(this,e,t,r))},s.prototype.dtdEntity=function(e,t,r){return this.stream.write(s.__super__.dtdEntity.call(this,e,t,r))},s.prototype.dtdNotation=function(e,t,r){return this.stream.write(s.__super__.dtdNotation.call(this,e,t,r))},s}(n)}).call(this)},6434:function(e,t,s){(function(){var t,r={}.hasOwnProperty;t=s(751),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var s in t)r.call(t,s)&&(e[s]=t[s]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var s,r,n,i,o;for(t=this.filterOptions(t),i="",r=0,n=(o=e.children).length;r<n;r++)s=o[r],i+=this.writeChildNode(s,t,0);return t.pretty&&i.slice(-t.newline.length)===t.newline&&(i=i.slice(0,-t.newline.length)),i},t}(t)}).call(this)},5549:function(e){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty;e.exports=function(){function e(e){var r,n,i;for(r in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})s.call(n,r)&&(i=n[r],this[r]=i)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,s;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+s.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+s.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},3595:function(e,t,s){(function(){var t,r,n={}.hasOwnProperty;t=s(9335),r=s(6488),e.exports=function(e){function s(e,r){if(s.__super__.constructor.call(this,e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}return function(e,t){for(var s in t)n.call(t,s)&&(e[s]=t[s]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(s,e),Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var e,t,s;for(s="",t=this.previousSibling;t;)s=t.data+s,t=t.previousSibling;for(s+=this.data,e=this.nextSibling;e;)s+=e.data,e=e.nextSibling;return s}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},s.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(r)}).call(this)},751:function(e,t,s){(function(){var t,r,n,i={}.hasOwnProperty;n=s(8369).assign,t=s(9335),s(9077),s(6544),s(6170),s(2096),s(2161),s(9406),s(3595),s(9181),s(8833),s(1179),s(6347),s(9078),s(4777),r=s(594),e.exports=function(){function e(e){var t,s,r;for(t in e||(e={}),this.options=e,s=e.writer||{})i.call(s,t)&&(r=s[t],this["_"+t]=this[t],this[t]=r)}return e.prototype.filterOptions=function(e){var t,s,i,o,a,c,h,l;return e||(e={}),e=n({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(s=e.indent)?s:"  ",t.newline=null!=(i=e.newline)?i:"\n",t.offset=null!=(o=e.offset)?o:0,t.dontPrettyTextNodes=null!=(a=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?a:0,t.spaceBeforeSlash=null!=(h=null!=(l=e.spaceBeforeSlash)?l:e.spacebeforeslash)?h:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=r.None,t},e.prototype.indent=function(e,t,s){var r;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(r=(s||0)+t.offset+1)>0?new Array(r).join(t.indent):""},e.prototype.endline=function(e,t,s){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,s){var r;return this.openAttribute(e,t,s),r=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,s),r},e.prototype.cdata=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<![CDATA[",t.state=r.InsideTag,n+=e.value,t.state=r.CloseTag,n+="]]>"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.comment=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"\x3c!-- ",t.state=r.InsideTag,n+=e.value,t.state=r.CloseTag,n+=" --\x3e"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.declaration=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<?xml",t.state=r.InsideTag,n+=' version="'+e.version+'"',null!=e.encoding&&(n+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(n+=' standalone="'+e.standalone+'"'),t.state=r.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.docType=function(e,t,s){var n,i,o,a,c;if(s||(s=0),this.openNode(e,t,s),t.state=r.OpenTag,a=this.indent(e,t,s),a+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?a+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(a+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(a+=" [",a+=this.endline(e,t,s),t.state=r.InsideTag,i=0,o=(c=e.children).length;i<o;i++)n=c[i],a+=this.writeChildNode(n,t,s+1);t.state=r.CloseTag,a+="]"}return t.state=r.CloseTag,a+=t.spaceBeforeSlash+">",a+=this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),a},e.prototype.element=function(e,s,n){var o,a,c,h,l,u,d,p,f,m,g,y,b,v;for(f in n||(n=0),m=!1,g="",this.openNode(e,s,n),s.state=r.OpenTag,g+=this.indent(e,s,n)+"<"+e.name,y=e.attribs)i.call(y,f)&&(o=y[f],g+=this.attribute(o,s,n));if(h=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))s.allowEmpty?(g+=">",s.state=r.CloseTag,g+="</"+e.name+">"+this.endline(e,s,n)):(s.state=r.CloseTag,g+=s.spaceBeforeSlash+"/>"+this.endline(e,s,n));else if(!s.pretty||1!==c||h.type!==t.Text&&h.type!==t.Raw||null==h.value){if(s.dontPrettyTextNodes)for(l=0,d=(b=e.children).length;l<d;l++)if(((a=b[l]).type===t.Text||a.type===t.Raw)&&null!=a.value){s.suppressPrettyCount++,m=!0;break}for(g+=">"+this.endline(e,s,n),s.state=r.InsideTag,u=0,p=(v=e.children).length;u<p;u++)a=v[u],g+=this.writeChildNode(a,s,n+1);s.state=r.CloseTag,g+=this.indent(e,s,n)+"</"+e.name+">",m&&s.suppressPrettyCount--,g+=this.endline(e,s,n),s.state=r.None}else g+=">",s.state=r.InsideTag,s.suppressPrettyCount++,m=!0,g+=this.writeChildNode(h,s,n+1),s.suppressPrettyCount--,m=!1,s.state=r.CloseTag,g+="</"+e.name+">"+this.endline(e,s,n);return this.closeNode(e,s,n),g},e.prototype.writeChildNode=function(e,s,r){switch(e.type){case t.CData:return this.cdata(e,s,r);case t.Comment:return this.comment(e,s,r);case t.Element:return this.element(e,s,r);case t.Raw:return this.raw(e,s,r);case t.Text:return this.text(e,s,r);case t.ProcessingInstruction:return this.processingInstruction(e,s,r);case t.Dummy:return"";case t.Declaration:return this.declaration(e,s,r);case t.DocType:return this.docType(e,s,r);case t.AttributeDeclaration:return this.dtdAttList(e,s,r);case t.ElementDeclaration:return this.dtdElement(e,s,r);case t.EntityDeclaration:return this.dtdEntity(e,s,r);case t.NotationDeclaration:return this.dtdNotation(e,s,r);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<?",t.state=r.InsideTag,n+=e.target,e.value&&(n+=" "+e.value),t.state=r.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.raw=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s),t.state=r.InsideTag,n+=e.value,t.state=r.CloseTag,n+=this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.text=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s),t.state=r.InsideTag,n+=e.value,t.state=r.CloseTag,n+=this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.dtdAttList=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<!ATTLIST",t.state=r.InsideTag,n+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(n+=" "+e.defaultValueType),e.defaultValue&&(n+=' "'+e.defaultValue+'"'),t.state=r.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.dtdElement=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<!ELEMENT",t.state=r.InsideTag,n+=" "+e.name+" "+e.value,t.state=r.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.dtdEntity=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<!ENTITY",t.state=r.InsideTag,e.pe&&(n+=" %"),n+=" "+e.name,e.value?n+=' "'+e.value+'"':(e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.nData&&(n+=" NDATA "+e.nData)),t.state=r.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.dtdNotation=function(e,t,s){var n;return this.openNode(e,t,s),t.state=r.OpenTag,n=this.indent(e,t,s)+"<!NOTATION",t.state=r.InsideTag,n+=" "+e.name,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?n+=' PUBLIC "'+e.pubID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),t.state=r.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,s),t.state=r.None,this.closeNode(e,t,s),n},e.prototype.openNode=function(e,t,s){},e.prototype.closeNode=function(e,t,s){},e.prototype.openAttribute=function(e,t,s){},e.prototype.closeAttribute=function(e,t,s){},e}()}).call(this)},5532:function(e,t,s){(function(){var t,r,n,i,o,a,c,h,l,u;u=s(8369),h=u.assign,l=u.isFunction,n=s(1770),i=s(6934),o=s(9227),c=s(6434),a=s(1996),t=s(9335),r=s(594),e.exports.create=function(e,t,s,r){var n,o;if(null==e)throw new Error("Root element needs a name.");return r=h({},t,s,r),o=(n=new i(r)).element(e),r.headless||(n.declaration(r),null==r.pubID&&null==r.sysID||n.dtd(r)),o},e.exports.begin=function(e,t,s){var r;return l(e)&&(t=(r=[e,t])[0],s=r[1],e={}),t?new o(e,t,s):new i(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new a(e,t)},e.exports.implementation=new n,e.exports.nodeType=t,e.exports.writerState=r}).call(this)},6828:e=>{"use strict";e.exports=require("vscode")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},3477:e=>{"use strict";e.exports=require("querystring")},4521:e=>{"use strict";e.exports=require("readline")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6292);module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map